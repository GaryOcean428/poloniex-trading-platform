{
  "version": "1",
  "build": {
    "provider": "node",
    "steps": {
      "install": {
        "commands": [
          "unset YARN_PRODUCTION || true; yarn install --immutable --immutable-cache"
        ]
      },
      "copyShared": {
        "commands": [
          "rm -rf ./shared",
          "mkdir -p ./shared",
          "cp -r ../shared/* ./shared/ || echo 'Shared directory not found'"
        ],
        "dependsOn": ["install"]
      },
      "build": {
        "commands": ["yarn build"],
        "dependsOn": ["copyShared"]
      }
    }
  },
  "deploy": {
    "startCommand": "yarn start",
    "healthCheckPath": "/healthz",
    "healthCheckTimeout": 300
  }
}
