{"version":3,"file":"LiveTradingDashboard-D922YQXM.js","sources":["../../src/services/advancedLiveData.ts","../../src/utils/cn.ts","../../src/components/ui/Tabs.tsx","../../src/components/dashboard/LiveDataDashboard.tsx","../../src/components/dashboard/RealTimePortfolio.tsx","../../src/components/dashboard/RealTimeAlerts.tsx","../../src/pages/LiveTradingDashboard.tsx"],"sourcesContent":["import axios from 'axios';\n// Use browser WebSocket (available globally)\n\n// Simple throttle function\nfunction throttle<T extends (...args: any[]) => any>(func: T, limit: number): T {\n  let inThrottle: boolean;\n  return function(this: any, ...args: any[]) {\n    if (!inThrottle) {\n      func.apply(this, args);\n      inThrottle = true;\n      setTimeout(() => inThrottle = false, limit);\n    }\n  } as T;\n}\n\n// Simple debounce function\nfunction debounce<T extends (...args: any[]) => any>(func: T, wait: number): T {\n  let timeout: NodeJS.Timeout;\n  return function(this: any, ...args: any[]) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => func.apply(this, args), wait);\n  } as T;\n}\n\n// Use a browser-compatible EventEmitter\nclass BrowserEventEmitter {\n  private events: { [key: string]: Function[] } = {};\n\n  on(event: string, callback: Function): void {\n    if (!this.events[event]) {\n      this.events[event] = [];\n    }\n    this.events[event].push(callback);\n  }\n\n  off(event: string, callback: Function): void {\n    if (!this.events[event]) return;\n    this.events[event] = this.events[event].filter(cb => cb !== callback);\n  }\n\n  emit(event: string, ...args: any[]): void {\n    if (!this.events[event]) return;\n    this.events[event].forEach(callback => {\n      try {\n        callback(...args);\n      } catch (error) {\n        console.error('Error in event handler:', error);\n      }\n    });\n  }\n\n  removeAllListeners(event?: string): void {\n    if (event) {\n      delete this.events[event];\n    } else {\n      this.events = {};\n    }\n  }\n}\n\n/**\n * Advanced Live Data Processing Module\n * \n * This module provides enhanced real-time market data processing capabilities\n * with features like data normalization, anomaly detection, and multi-source\n * data aggregation for the Poloniex trading platform.\n */\n\n// Types for live data processing\nexport interface LiveDataConfig {\n  primarySource: 'poloniex' | 'websocket' | 'aggregated';\n  fallbackSources: ('poloniex' | 'websocket' | 'rest')[];\n  updateInterval: number; // milliseconds\n  aggregationMethod: 'weighted' | 'median' | 'mean';\n  enableAnomalyDetection: boolean;\n  anomalyThreshold: number;\n  enableDataNormalization: boolean;\n  cacheDuration: number; // milliseconds\n  maxRetries: number;\n  retryDelay: number; // milliseconds\n  enableCompression: boolean;\n  logLevel: 'debug' | 'info' | 'warn' | 'error';\n}\n\nexport interface MarketDataPoint {\n  symbol: string;\n  timestamp: number;\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  volume: number;\n  quoteVolume?: number;\n  weightedAverage?: number;\n  source?: string;\n  isAnomaly?: boolean;\n  confidence?: number;\n  normalized?: boolean;\n}\n\nexport interface OrderBookEntry {\n  price: number;\n  amount: number;\n  timestamp: number;\n}\n\nexport interface OrderBook {\n  symbol: string;\n  timestamp: number;\n  bids: OrderBookEntry[];\n  asks: OrderBookEntry[];\n  source?: string;\n  lastUpdateId?: number;\n}\n\nexport interface TradeEntry {\n  id: string;\n  symbol: string;\n  timestamp: number;\n  price: number;\n  amount: number;\n  side: 'buy' | 'sell';\n  source?: string;\n}\n\nexport interface MarketSummary {\n  symbol: string;\n  timestamp: number;\n  lastPrice: number;\n  bidPrice: number;\n  askPrice: number;\n  high24h: number;\n  low24h: number;\n  volume24h: number;\n  quoteVolume24h: number;\n  percentChange24h: number;\n  source?: string;\n}\n\n// Default configuration\nconst defaultLiveDataConfig: LiveDataConfig = {\n  primarySource: 'aggregated',\n  fallbackSources: ['poloniex', 'websocket', 'rest'],\n  updateInterval: 1000, // 1 second\n  aggregationMethod: 'weighted',\n  enableAnomalyDetection: true,\n  anomalyThreshold: 3.0, // 3 standard deviations\n  enableDataNormalization: true,\n  cacheDuration: 60000, // 1 minute\n  maxRetries: 3,\n  retryDelay: 1000, // 1 second\n  enableCompression: true,\n  logLevel: 'info'\n};\n\n// Cache for market data\nconst dataCache = new Map<string, {\n  data: any;\n  timestamp: number;\n}>();\n\n// Event emitter for live data updates\nexport const liveDataEvents = new BrowserEventEmitter();\n\n/**\n * Advanced Live Data Service class\n */\nexport class LiveDataService {\n  private config: LiveDataConfig;\n  private websockets: Map<string, WebSocket> = new Map();\n  private poloniexRestClient: any;\n  private isRunning: boolean = false;\n  private retryCount: Map<string, number> = new Map();\n  private dataBuffer: Map<string, MarketDataPoint[]> = new Map();\n  private lastAnomalyCheck: Map<string, number> = new Map();\n  private statisticalBaseline: Map<string, {\n    mean: number;\n    stdDev: number;\n    updateTime: number;\n  }> = new Map();\n  \n  constructor(config: Partial<LiveDataConfig> = {}) {\n    this.config = { ...defaultLiveDataConfig, ...config };\n    this.initializePoloniexClient();\n    \n    // Set up throttled and debounced methods\n    this.processDataThrottled = throttle(this.processData.bind(this), 200);\n    this.updateBaselineDebounced = debounce(this.updateStatisticalBaseline.bind(this), 60000);\n    \n    // Set up event listeners\n    liveDataEvents.on('data_received', this.handleDataReceived.bind(this));\n    liveDataEvents.on('connection_error', this.handleConnectionError.bind(this));\n  }\n  \n  /**\n   * Initialize the Poloniex REST API client\n   */\n  private initializePoloniexClient(): void {\n    this.poloniexRestClient = axios.create({\n      baseURL: 'https://api.poloniex.com/markets',\n      timeout: 10000,\n      headers: {\n        'Content-Type': 'application/json',\n        'User-Agent': 'PoloniexTradingPlatform/1.0'\n      }\n    });\n    \n    this.log('info', 'Poloniex REST client initialized');\n  }\n  \n  /**\n   * Start the live data service\n   */\n  public start(): void {\n    if (this.isRunning) {\n      this.log('warn', 'Live data service is already running');\n      return;\n    }\n    \n    this.isRunning = true;\n    this.log('info', 'Starting live data service');\n    \n    // Initialize connections based on configuration\n    if (this.config.primarySource === 'websocket' || \n        this.config.fallbackSources.includes('websocket')) {\n      this.initializeWebSockets();\n    }\n    \n    liveDataEvents.emit('service_started');\n  }\n  \n  /**\n   * Stop the live data service\n   */\n  public stop(): void {\n    if (!this.isRunning) {\n      this.log('warn', 'Live data service is not running');\n      return;\n    }\n    \n    this.isRunning = false;\n    this.log('info', 'Stopping live data service');\n    \n    // Close all websocket connections\n    for (const [key, ws] of this.websockets.entries()) {\n      ws.close();\n      this.websockets.delete(key);\n    }\n    \n    liveDataEvents.emit('service_stopped');\n  }\n  \n  /**\n   * Initialize WebSocket connections\n   */\n  private initializeWebSockets(): void {\n    try {\n      // Poloniex WebSocket\n      const poloniexWs = new WebSocket('wss://ws.poloniex.com/markets');\n      \n      poloniexWs.on('open', () => {\n        this.log('info', 'Poloniex WebSocket connected');\n        \n        // Subscribe to market data\n        poloniexWs.send(JSON.stringify({\n          event: 'subscribe',\n          channel: ['ticker']\n        }));\n        \n        this.websockets.set('poloniex', poloniexWs);\n        liveDataEvents.emit('websocket_connected', 'poloniex');\n      });\n      \n      poloniexWs.on('message', (data: any) => {\n        try {\n          const parsedData = JSON.parse(data.toString());\n          this.handleWebSocketMessage('poloniex', parsedData);\n        } catch (error) {\n          this.log('error', `Error parsing Poloniex WebSocket message: ${error}`);\n        }\n      });\n      \n      poloniexWs.on('error', (error) => {\n        this.log('error', `Poloniex WebSocket error: ${error}`);\n        liveDataEvents.emit('connection_error', { source: 'poloniex', error });\n      });\n      \n      poloniexWs.on('close', () => {\n        this.log('info', 'Poloniex WebSocket disconnected');\n        this.websockets.delete('poloniex');\n        \n        // Attempt to reconnect if service is still running\n        if (this.isRunning) {\n          const retryCount = (this.retryCount.get('poloniex') || 0) + 1;\n          this.retryCount.set('poloniex', retryCount);\n          \n          if (retryCount <= this.config.maxRetries) {\n            this.log('info', `Attempting to reconnect to Poloniex WebSocket (attempt ${retryCount})`);\n            setTimeout(() => this.initializeWebSockets(), this.config.retryDelay * retryCount);\n          } else {\n            this.log('error', 'Max retry attempts reached for Poloniex WebSocket');\n            liveDataEvents.emit('max_retries_reached', 'poloniex');\n          }\n        }\n      });\n    } catch (error) {\n      this.log('error', `Error initializing WebSockets: ${error}`);\n      liveDataEvents.emit('initialization_error', { error });\n    }\n  }\n  \n  /**\n   * Handle WebSocket messages\n   */\n  private handleWebSocketMessage(source: string, message: any): void {\n    try {\n      if (source === 'poloniex') {\n        // Process Poloniex-specific message format\n        if (message.channel === 'ticker' && message.data) {\n          const tickerData = message.data;\n          \n          const marketData: MarketDataPoint = {\n            symbol: tickerData.symbol,\n            timestamp: Date.now(),\n            open: parseFloat(tickerData.open),\n            high: parseFloat(tickerData.high),\n            low: parseFloat(tickerData.low),\n            close: parseFloat(tickerData.close),\n            volume: parseFloat(tickerData.volume),\n            quoteVolume: parseFloat(tickerData.quoteVolume),\n            source: 'poloniex_ws'\n          };\n          \n          // Process the data (throttled)\n          this.processDataThrottled(marketData);\n          \n          // Add to buffer for statistical analysis\n          this.addToDataBuffer(marketData);\n        }\n      }\n      \n      liveDataEvents.emit('data_received', { source, data: message });\n    } catch (error) {\n      this.log('error', `Error handling WebSocket message: ${error}`);\n    }\n  }\n  \n  /**\n   * Add data point to buffer for statistical analysis\n   */\n  private addToDataBuffer(dataPoint: MarketDataPoint): void {\n    const key = dataPoint.symbol;\n    \n    if (!this.dataBuffer.has(key)) {\n      this.dataBuffer.set(key, []);\n    }\n    \n    const buffer = this.dataBuffer.get(key)!;\n    buffer.push(dataPoint);\n    \n    // Keep buffer at a reasonable size (last 100 points)\n    if (buffer.length > 100) {\n      buffer.shift();\n    }\n    \n    // Update statistical baseline periodically\n    const lastUpdate = this.statisticalBaseline.get(key)?.updateTime || 0;\n    if (Date.now() - lastUpdate > 300000) { // 5 minutes\n      this.updateBaselineDebounced(key);\n    }\n  }\n  \n  /**\n   * Update statistical baseline for anomaly detection\n   */\n  private updateStatisticalBaseline(symbol: string): void {\n    const buffer = this.dataBuffer.get(symbol);\n    \n    if (!buffer || buffer.length < 30) {\n      return; // Not enough data points\n    }\n    \n    // Calculate mean and standard deviation of closing prices\n    const prices = buffer.map(d => d.close);\n    const mean = prices.reduce((sum, price) => sum + price, 0) / prices.length;\n    \n    const squaredDiffs = prices.map(price => Math.pow(price - mean, 2));\n    const variance = squaredDiffs.reduce((sum, diff) => sum + diff, 0) / squaredDiffs.length;\n    const stdDev = Math.sqrt(variance);\n    \n    this.statisticalBaseline.set(symbol, {\n      mean,\n      stdDev,\n      updateTime: Date.now()\n    });\n    \n    this.log('debug', `Updated statistical baseline for ${symbol}: mean=${mean.toFixed(4)}, stdDev=${stdDev.toFixed(4)}`);\n  }\n  \n  /**\n   * Process incoming market data\n   */\n  private processData(dataPoint: MarketDataPoint): void {\n    try {\n      // Apply data normalization if enabled\n      if (this.config.enableDataNormalization) {\n        dataPoint = this.normalizeData(dataPoint);\n      }\n      \n      // Detect anomalies if enabled\n      if (this.config.enableAnomalyDetection) {\n        dataPoint = this.detectAnomaly(dataPoint);\n      }\n      \n      // Cache the processed data\n      const cacheKey = `${dataPoint.symbol}_${dataPoint.timestamp}`;\n      dataCache.set(cacheKey, {\n        data: dataPoint,\n        timestamp: Date.now()\n      });\n      \n      // Emit processed data event\n      liveDataEvents.emit('data_processed', dataPoint);\n    } catch (error) {\n      this.log('error', `Error processing data: ${error}`);\n    }\n  }\n  \n  /**\n   * Normalize market data\n   */\n  private normalizeData(dataPoint: MarketDataPoint): MarketDataPoint {\n    // Simple normalization: ensure all numeric values are valid\n    const normalized = { ...dataPoint };\n    \n    // Ensure numeric values are valid numbers\n    for (const key of ['open', 'high', 'low', 'close', 'volume', 'quoteVolume', 'weightedAverage']) {\n      if (key in normalized && (isNaN(normalized[key]) || !isFinite(normalized[key]))) {\n        normalized[key] = 0;\n      }\n    }\n    \n    // Ensure high is the highest value\n    normalized.high = Math.max(normalized.open, normalized.high, normalized.low, normalized.close);\n    \n    // Ensure low is the lowest value\n    normalized.low = Math.min(normalized.open, normalized.low, normalized.close);\n    \n    // Mark as normalized\n    normalized.normalized = true;\n    \n    return normalized;\n  }\n  \n  /**\n   * Detect anomalies in market data\n   */\n  private detectAnomaly(dataPoint: MarketDataPoint): MarketDataPoint {\n    const baseline = this.statisticalBaseline.get(dataPoint.symbol);\n    \n    if (!baseline) {\n      return { ...dataPoint, isAnomaly: false, confidence: 0 };\n    }\n    \n    // Calculate z-score (number of standard deviations from mean)\n    const zScore = Math.abs((dataPoint.close - baseline.mean) / baseline.stdDev);\n    \n    // Mark as anomaly if z-score exceeds threshold\n    const isAnomaly = zScore > this.config.anomalyThreshold;\n    \n    // Calculate confidence (0-1 scale)\n    const confidence = Math.min(zScore / (this.config.anomalyThreshold * 2), 1);\n    \n    return {\n      ...dataPoint,\n      isAnomaly,\n      confidence\n    };\n  }\n  \n  /**\n   * Fetch market data from Poloniex REST API\n   */\n  public async fetchMarketData(symbol: string, interval: string = '1h', limit: number = 100): Promise<MarketDataPoint[]> {\n    try {\n      // Check cache first\n      const cacheKey = `${symbol}_${interval}_${limit}`;\n      const cached = dataCache.get(cacheKey);\n      \n      if (cached && (Date.now() - cached.timestamp < this.config.cacheDuration)) {\n        this.log('debug', `Using cached data for ${cacheKey}`);\n        return cached.data;\n      }\n      \n      this.log('info', `Fetching market data for ${symbol} (${interval})`);\n      \n      const response = await this.poloniexRestClient.get(`/${symbol}/candles`, {\n        params: {\n          interval,\n          limit\n        }\n      });\n      \n      if (!response.data) {\n        throw new Error('No data received from Poloniex API');\n      }\n      \n      // Transform API response to MarketDataPoint[]\n      const marketData: MarketDataPoint[] = response.data.map((candle: any) => ({\n        symbol,\n        timestamp: candle.timestamp,\n        open: parseFloat(candle.open),\n        high: parseFloat(candle.high),\n        low: parseFloat(candle.low),\n        close: parseFloat(candle.close),\n        volume: parseFloat(candle.volume),\n        quoteVolume: parseFloat(candle.quoteVolume),\n        source: 'poloniex_rest'\n      }));\n      \n      // Process each data point\n      const processedData = marketData.map(dataPoint => {\n        // Apply normalization if enabled\n        if (this.config.enableDataNormalization) {\n          dataPoint = this.normalizeData(dataPoint);\n        }\n        \n        // Detect anomalies if enabled\n        if (this.config.enableAnomalyDetection) {\n          dataPoint = this.detectAnomaly(dataPoint);\n        }\n        \n        return dataPoint;\n      });\n      \n      // Cache the processed data\n      dataCache.set(cacheKey, {\n        data: processedData,\n        timestamp: Date.now()\n      });\n      \n      return processedData;\n    } catch (error) {\n      this.log('error', `Error fetching market data: ${error}`);\n      \n      // Try to use cached data even if expired\n      const cached = dataCache.get(`${symbol}_${interval}_${limit}`);\n      if (cached) {\n        this.log('warn', `Using expired cached data for ${symbol}`);\n        return cached.data;\n      }\n      \n      throw error;\n    }\n  }\n  \n  /**\n   * Fetch order book from Poloniex REST API\n   */\n  public async fetchOrderBook(symbol: string, limit: number = 100): Promise<OrderBook> {\n    try {\n      // Check cache first\n      const cacheKey = `orderbook_${symbol}_${limit}`;\n      const cached = dataCache.get(cacheKey);\n      \n      if (cached && (Date.now() - cached.timestamp < this.config.cacheDuration / 10)) { // Shorter cache for order book\n        this.log('debug', `Using cached order book for ${symbol}`);\n        return cached.data;\n      }\n      \n      this.log('info', `Fetching order book for ${symbol}`);\n      \n      const response = await this.poloniexRestClient.get(`/${symbol}/orderBook`, {\n        params: { limit }\n      });\n      \n      if (!response.data) {\n        throw new Error('No data received from Poloniex API');\n      }\n      \n      // Transform API response to OrderBook\n      const orderBook: OrderBook = {\n        symbol,\n        timestamp: Date.now(),\n        bids: response.data.bids.map((bid: any) => ({\n          price: parseFloat(bid[0]),\n          amount: parseFloat(bid[1]),\n          timestamp: Date.now()\n        })),\n        asks: response.data.asks.map((ask: any) => ({\n          price: parseFloat(ask[0]),\n          amount: parseFloat(ask[1]),\n          timestamp: Date.now()\n        })),\n        source: 'poloniex_rest',\n        lastUpdateId: response.data.sequence\n      };\n      \n      // Cache the order book\n      dataCache.set(cacheKey, {\n        data: orderBook,\n        timestamp: Date.now()\n      });\n      \n      return orderBook;\n    } catch (error) {\n      this.log('error', `Error fetching order book: ${error}`);\n      \n      // Try to use cached data even if expired\n      const cached = dataCache.get(`orderbook_${symbol}_${limit}`);\n      if (cached) {\n        this.log('warn', `Using expired cached order book for ${symbol}`);\n        return cached.data;\n      }\n      \n      throw error;\n    }\n  }\n  \n  /**\n   * Fetch recent trades from Poloniex REST API\n   */\n  public async fetchTrades(symbol: string, limit: number = 100): Promise<TradeEntry[]> {\n    try {\n      // Check cache first\n      const cacheKey = `trades_${symbol}_${limit}`;\n      const cached = dataCache.get(cacheKey);\n      \n      if (cached && (Date.now() - cached.timestamp < this.config.cacheDuration / 10)) { // Shorter cache for trades\n        this.log('debug', `Using cached trades for ${symbol}`);\n        return cached.data;\n      }\n      \n      this.log('info', `Fetching trades for ${symbol}`);\n      \n      const response = await this.poloniexRestClient.get(`/${symbol}/trades`, {\n        params: { limit }\n      });\n      \n      if (!response.data) {\n        throw new Error('No data received from Poloniex API');\n      }\n      \n      // Transform API response to TradeEntry[]\n      const trades: TradeEntry[] = response.data.map((trade: any) => ({\n        id: trade.id.toString(),\n        symbol,\n        timestamp: trade.ts,\n        price: parseFloat(trade.price),\n        amount: parseFloat(trade.amount),\n        side: trade.takerSide === 'sell' ? 'buy' : 'sell', // Invert taker side to get maker side\n        source: 'poloniex_rest'\n      }));\n      \n      // Cache the trades\n      dataCache.set(cacheKey, {\n        data: trades,\n        timestamp: Date.now()\n      });\n      \n      return trades;\n    } catch (error) {\n      this.log('error', `Error fetching trades: ${error}`);\n      \n      // Try to use cached data even if expired\n      const cached = dataCache.get(`trades_${symbol}_${limit}`);\n      if (cached) {\n        this.log('warn', `Using expired cached trades for ${symbol}`);\n        return cached.data;\n      }\n      \n      throw error;\n    }\n  }\n  \n  /**\n   * Fetch market summary from Poloniex REST API\n   */\n  public async fetchMarketSummary(symbol: string): Promise<MarketSummary> {\n    try {\n      // Check cache first\n      const cacheKey = `summary_${symbol}`;\n      const cached = dataCache.get(cacheKey);\n      \n      if (cached && (Date.now() - cached.timestamp < this.config.cacheDuration / 2)) { // Medium cache for summary\n        this.log('debug', `Using cached market summary for ${symbol}`);\n        return cached.data;\n      }\n      \n      this.log('info', `Fetching market summary for ${symbol}`);\n      \n      const response = await this.poloniexRestClient.get(`/${symbol}/ticker24h`);\n      \n      if (!response.data) {\n        throw new Error('No data received from Poloniex API');\n      }\n      \n      // Transform API response to MarketSummary\n      const summary: MarketSummary = {\n        symbol,\n        timestamp: Date.now(),\n        lastPrice: parseFloat(response.data.close),\n        bidPrice: parseFloat(response.data.markPrice), // Using mark price as bid\n        askPrice: parseFloat(response.data.markPrice), // Using mark price as ask\n        high24h: parseFloat(response.data.high),\n        low24h: parseFloat(response.data.low),\n        volume24h: parseFloat(response.data.volume),\n        quoteVolume24h: parseFloat(response.data.quoteVolume),\n        percentChange24h: parseFloat(response.data.change) * 100,\n        source: 'poloniex_rest'\n      };\n      \n      // Cache the summary\n      dataCache.set(cacheKey, {\n        data: summary,\n        timestamp: Date.now()\n      });\n      \n      return summary;\n    } catch (error) {\n      this.log('error', `Error fetching market summary: ${error}`);\n      \n      // Try to use cached data even if expired\n      const cached = dataCache.get(`summary_${symbol}`);\n      if (cached) {\n        this.log('warn', `Using expired cached market summary for ${symbol}`);\n        return cached.data;\n      }\n      \n      throw error;\n    }\n  }\n  \n  /**\n   * Aggregate data from multiple sources\n   */\n  public async getAggregatedData(symbol: string, interval: string = '1h', limit: number = 100): Promise<MarketDataPoint[]> {\n    try {\n      // Fetch data from multiple sources\n      const sources = [];\n      \n      // Primary source\n      if (this.config.primarySource === 'poloniex' || this.config.fallbackSources.includes('poloniex')) {\n        try {\n          const poloniexData = await this.fetchMarketData(symbol, interval, limit);\n          sources.push({ source: 'poloniex', data: poloniexData, weight: 1.0 });\n        } catch (error) {\n          this.log('warn', `Failed to fetch data from Poloniex: ${error}`);\n        }\n      }\n      \n      // WebSocket data (from buffer)\n      if (this.config.primarySource === 'websocket' || this.config.fallbackSources.includes('websocket')) {\n        const wsData = this.dataBuffer.get(symbol);\n        if (wsData && wsData.length > 0) {\n          sources.push({ source: 'websocket', data: wsData, weight: 1.2 }); // Higher weight for real-time data\n        }\n      }\n      \n      // If no data sources available, throw error\n      if (sources.length === 0) {\n        throw new Error('No data available from any source');\n      }\n      \n      // If only one source, return its data\n      if (sources.length === 1) {\n        return sources[0].data;\n      }\n      \n      // Aggregate data from multiple sources\n      return this.aggregateDataSources(sources, this.config.aggregationMethod);\n    } catch (error) {\n      this.log('error', `Error getting aggregated data: ${error}`);\n      throw error;\n    }\n  }\n  \n  /**\n   * Aggregate data from multiple sources\n   */\n  private aggregateDataSources(\n    sources: { source: string; data: MarketDataPoint[]; weight: number }[],\n    method: 'weighted' | 'median' | 'mean'\n  ): MarketDataPoint[] {\n    // Group data points by timestamp (rounded to nearest minute)\n    const groupedByTimestamp = new Map<number, { points: MarketDataPoint[], weights: number[] }>();\n    \n    for (const source of sources) {\n      for (const point of source.data) {\n        // Round timestamp to nearest minute\n        const roundedTimestamp = Math.floor(point.timestamp / 60000) * 60000;\n        \n        if (!groupedByTimestamp.has(roundedTimestamp)) {\n          groupedByTimestamp.set(roundedTimestamp, { points: [], weights: [] });\n        }\n        \n        const group = groupedByTimestamp.get(roundedTimestamp)!;\n        group.points.push(point);\n        group.weights.push(source.weight);\n      }\n    }\n    \n    // Aggregate data points for each timestamp\n    const aggregatedData: MarketDataPoint[] = [];\n    \n    for (const [timestamp, { points, weights }] of groupedByTimestamp.entries()) {\n      if (points.length === 0) continue;\n      \n      let aggregatedPoint: MarketDataPoint;\n      \n      switch (method) {\n        case 'weighted':\n          aggregatedPoint = this.weightedAggregate(points, weights);\n          break;\n        case 'median':\n          aggregatedPoint = this.medianAggregate(points);\n          break;\n        case 'mean':\n        default:\n          aggregatedPoint = this.meanAggregate(points);\n          break;\n      }\n      \n      // Set timestamp and symbol\n      aggregatedPoint.timestamp = timestamp;\n      aggregatedPoint.symbol = points[0].symbol;\n      aggregatedPoint.source = 'aggregated';\n      \n      aggregatedData.push(aggregatedPoint);\n    }\n    \n    // Sort by timestamp\n    return aggregatedData.sort((a, b) => a.timestamp - b.timestamp);\n  }\n  \n  /**\n   * Weighted aggregate of data points\n   */\n  private weightedAggregate(points: MarketDataPoint[], weights: number[]): MarketDataPoint {\n    // Normalize weights\n    const totalWeight = weights.reduce((sum, w) => sum + w, 0);\n    const normalizedWeights = weights.map(w => w / totalWeight);\n    \n    // Calculate weighted average for each numeric field\n    const result: any = {};\n    \n    for (const field of ['open', 'high', 'low', 'close', 'volume', 'quoteVolume']) {\n      let weightedSum = 0;\n      \n      for (let i = 0; i < points.length; i++) {\n        weightedSum += points[i][field] * normalizedWeights[i];\n      }\n      \n      result[field] = weightedSum;\n    }\n    \n    return result as MarketDataPoint;\n  }\n  \n  /**\n   * Median aggregate of data points\n   */\n  private medianAggregate(points: MarketDataPoint[]): MarketDataPoint {\n    const result: any = {};\n    \n    for (const field of ['open', 'high', 'low', 'close', 'volume', 'quoteVolume']) {\n      const values = points.map(p => p[field]).sort((a, b) => a - b);\n      const middle = Math.floor(values.length / 2);\n      \n      if (values.length % 2 === 0) {\n        result[field] = (values[middle - 1] + values[middle]) / 2;\n      } else {\n        result[field] = values[middle];\n      }\n    }\n    \n    return result as MarketDataPoint;\n  }\n  \n  /**\n   * Mean aggregate of data points\n   */\n  private meanAggregate(points: MarketDataPoint[]): MarketDataPoint {\n    const result: any = {};\n    \n    for (const field of ['open', 'high', 'low', 'close', 'volume', 'quoteVolume']) {\n      const sum = points.reduce((acc, p) => acc + p[field], 0);\n      result[field] = sum / points.length;\n    }\n    \n    return result as MarketDataPoint;\n  }\n  \n  /**\n   * Handle data received event\n   */\n  private handleDataReceived(event: any): void {\n    this.log('debug', `Data received from ${event.source}`);\n    // Additional handling can be added here\n  }\n  \n  /**\n   * Handle connection error event\n   */\n  private handleConnectionError(event: any): void {\n    this.log('error', `Connection error from ${event.source}: ${event.error}`);\n    \n    // If primary source fails, switch to fallback\n    if (event.source === this.config.primarySource) {\n      const fallbacks = this.config.fallbackSources.filter(s => s !== event.source);\n      \n      if (fallbacks.length > 0) {\n        this.log('info', `Switching to fallback source: ${fallbacks[0]}`);\n        // Implementation of fallback logic\n      }\n    }\n  }\n  \n  /**\n   * Log messages based on configured log level\n   */\n  private log(level: 'debug' | 'info' | 'warn' | 'error', message: string): void {\n    const levels = { debug: 0, info: 1, warn: 2, error: 3 };\n    \n    if (levels[level] >= levels[this.config.logLevel]) {\n      const timestamp = new Date().toISOString();\n      console[level](`[${timestamp}] [LiveData] [${level.toUpperCase()}] ${message}`);\n    }\n  }\n  \n  // Throttled and debounced methods (defined in constructor)\n  private processDataThrottled: (dataPoint: MarketDataPoint) => void;\n  private updateBaselineDebounced: (symbol: string) => void;\n}\n\n// Export singleton instance\nexport const liveDataService = new LiveDataService();\n\nexport default {\n  LiveDataService,\n  liveDataService,\n  liveDataEvents\n};\n","import { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\n/**\n * Utility function to merge Tailwind CSS classes\n * Combines clsx for conditional classes and tailwind-merge to handle conflicts\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n","import * as React from \"react\";\nimport { cn } from \"@/utils/cn\";\n\ninterface TabsProps {\n  defaultValue?: string;\n  value?: string;\n  onValueChange?: (value: string) => void;\n  className?: string;\n  children: React.ReactNode;\n}\n\nconst Tabs = ({ defaultValue, value, onValueChange, className, children }: TabsProps) => {\n  const [activeTab, setActiveTab] = React.useState(value || defaultValue || \"\");\n\n  React.useEffect(() => {\n    if (value !== undefined) {\n      setActiveTab(value);\n    }\n  }, [value]);\n\n  const handleTabChange = (tabValue: string) => {\n    if (value === undefined) {\n      setActiveTab(tabValue);\n    }\n    if (onValueChange) {\n      onValueChange(tabValue);\n    }\n  };\n\n  return (\n    <div className={cn(\"w-full\", className)}>\n      {React.Children.map(children, (child) => {\n        if (React.isValidElement(child) && child.type === TabsList) {\n          return React.cloneElement(child as React.ReactElement<TabsListProps>, {\n            activeTab,\n            onTabChange: handleTabChange,\n          });\n        }\n        if (React.isValidElement(child) && child.type === TabsContent) {\n          return React.cloneElement(child as React.ReactElement<TabsContentProps>, {\n            activeTab,\n          });\n        }\n        return child;\n      })}\n    </div>\n  );\n};\n\ninterface TabsListProps {\n  className?: string;\n  children: React.ReactNode;\n  activeTab?: string;\n  onTabChange?: (value: string) => void;\n}\n\nconst TabsList = ({ className, children, activeTab, onTabChange }: TabsListProps) => {\n  return (\n    <div className={cn(\"flex border-b\", className)}>\n      {React.Children.map(children, (child) => {\n        if (React.isValidElement(child) && child.type === TabsTrigger) {\n          return React.cloneElement(child as React.ReactElement<TabsTriggerProps>, {\n            active: activeTab === child.props.value,\n            onSelect: () => onTabChange && onTabChange(child.props.value),\n          });\n        }\n        return child;\n      })}\n    </div>\n  );\n};\n\ninterface TabsTriggerProps {\n  className?: string;\n  value: string;\n  children: React.ReactNode;\n  active?: boolean;\n  onSelect?: () => void;\n}\n\n// Removed unused value parameter from the function parameters, keeping it in the interface\nconst TabsTrigger = ({ className, children, active, onSelect }: TabsTriggerProps) => {\n  return (\n    <button\n      className={cn(\n        \"px-4 py-2 text-sm font-medium\",\n        active\n          ? \"border-b-2 border-primary text-primary\"\n          : \"text-muted-foreground hover:text-foreground\",\n        className\n      )}\n      onClick={onSelect}\n    >\n      {children}\n    </button>\n  );\n};\n\ninterface TabsContentProps {\n  className?: string;\n  value: string;\n  children: React.ReactNode;\n  activeTab?: string;\n}\n\nconst TabsContent = ({ className, value, children, activeTab }: TabsContentProps) => {\n  if (value !== activeTab) {\n    return null;\n  }\n\n  return (\n    <div className={cn(\"mt-4\", className)}>\n      {children}\n    </div>\n  );\n};\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { \n  LiveDataService, \n  liveDataService, \n  liveDataEvents,\n  LiveDataConfig,\n  MarketDataPoint,\n  OrderBook,\n  TradeEntry,\n  MarketSummary\n} from '@/services/advancedLiveData';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/Tabs';\n\nconst LiveDataDashboard: React.FC = () => {\n  const [marketData, setMarketData] = useState<MarketDataPoint[]>([]);\n  const [orderBook, setOrderBook] = useState<OrderBook | null>(null);\n  const [trades, setTrades] = useState<TradeEntry[]>([]);\n  const [marketSummary, setMarketSummary] = useState<MarketSummary | null>(null);\n  const [selectedSymbol, setSelectedSymbol] = useState<string>('BTC_USDT');\n  const [timeframe, setTimeframe] = useState<string>('1h');\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [anomalies, setAnomalies] = useState<MarketDataPoint[]>([]);\n  const [serviceStatus, setServiceStatus] = useState<'stopped' | 'running'>('stopped');\n  const [config, setConfig] = useState<LiveDataConfig>({\n    primarySource: 'aggregated',\n    fallbackSources: ['poloniex', 'websocket', 'rest'],\n    updateInterval: 1000,\n    aggregationMethod: 'weighted',\n    enableAnomalyDetection: true,\n    anomalyThreshold: 3.0,\n    enableDataNormalization: true,\n    cacheDuration: 60000,\n    maxRetries: 3,\n    retryDelay: 1000,\n    enableCompression: true,\n    logLevel: 'info'\n  });\n  \n  // Available symbols\n  const symbols = [\n    'BTC_USDT', 'ETH_USDT', 'SOL_USDT', 'XRP_USDT', 'ADA_USDT',\n    'DOGE_USDT', 'MATIC_USDT', 'DOT_USDT', 'AVAX_USDT', 'LINK_USDT'\n  ];\n  \n  // Available timeframes\n  const timeframes = ['5m', '15m', '30m', '1h', '4h', '1d'];\n  \n  // Fetch market data\n  const fetchMarketData = useCallback(async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const data = await liveDataService.getAggregatedData(selectedSymbol, timeframe, 100);\n      setMarketData(data);\n      \n      // Extract anomalies\n      const anomalyPoints = data.filter(point => point.isAnomaly);\n      setAnomalies(anomalyPoints);\n      \n      setIsLoading(false);\n    } catch (err) {\n      console.error('Error fetching market data:', err);\n      setError(`Failed to fetch market data: ${err instanceof Error ? err.message : 'Unknown error'}`);\n      setIsLoading(false);\n    }\n  }, [selectedSymbol, timeframe]);\n  \n  // Fetch order book\n  const fetchOrderBook = useCallback(async () => {\n    try {\n      const book = await liveDataService.fetchOrderBook(selectedSymbol);\n      setOrderBook(book);\n    } catch (err) {\n      console.error('Error fetching order book:', err);\n      // Don't set error state to avoid disrupting the UI\n    }\n  }, [selectedSymbol]);\n  \n  // Fetch trades\n  const fetchTrades = useCallback(async () => {\n    try {\n      const tradeData = await liveDataService.fetchTrades(selectedSymbol, 50);\n      setTrades(tradeData);\n    } catch (err) {\n      console.error('Error fetching trades:', err);\n      // Don't set error state to avoid disrupting the UI\n    }\n  }, [selectedSymbol]);\n  \n  // Fetch market summary\n  const fetchMarketSummary = useCallback(async () => {\n    try {\n      const summary = await liveDataService.fetchMarketSummary(selectedSymbol);\n      setMarketSummary(summary);\n    } catch (err) {\n      console.error('Error fetching market summary:', err);\n      // Don't set error state to avoid disrupting the UI\n    }\n  }, [selectedSymbol]);\n  \n  // Start/stop live data service\n  const toggleLiveDataService = () => {\n    if (serviceStatus === 'stopped') {\n      liveDataService.start();\n      setServiceStatus('running');\n    } else {\n      liveDataService.stop();\n      setServiceStatus('stopped');\n    }\n  };\n  \n  // Update configuration\n  const updateConfig = (newConfig: Partial<LiveDataConfig>) => {\n    const updatedConfig = { ...config, ...newConfig };\n    setConfig(updatedConfig);\n    \n    // Restart service if running\n    if (serviceStatus === 'running') {\n      liveDataService.stop();\n      \n      // Create new service with updated config\n      const newService = new LiveDataService(updatedConfig);\n      newService.start();\n    }\n  };\n  \n  // Initial data fetch\n  useEffect(() => {\n    fetchMarketData();\n    fetchOrderBook();\n    fetchTrades();\n    fetchMarketSummary();\n    \n    // Set up event listeners\n    const handleDataProcessed = (data: MarketDataPoint) => {\n      if (data.symbol === selectedSymbol) {\n        setMarketData(prevData => {\n          // Add new data point and keep the last 100\n          const newData = [...prevData, data];\n          if (newData.length > 100) {\n            return newData.slice(-100);\n          }\n          return newData;\n        });\n        \n        // Check for anomaly\n        if (data.isAnomaly) {\n          setAnomalies(prevAnomalies => [...prevAnomalies, data]);\n        }\n      }\n    };\n    \n    const handleServiceStarted = () => {\n      setServiceStatus('running');\n    };\n    \n    const handleServiceStopped = () => {\n      setServiceStatus('stopped');\n    };\n    \n    liveDataEvents.on('data_processed', handleDataProcessed);\n    liveDataEvents.on('service_started', handleServiceStarted);\n    liveDataEvents.on('service_stopped', handleServiceStopped);\n    \n    // Clean up\n    return () => {\n      liveDataEvents.off('data_processed', handleDataProcessed);\n      liveDataEvents.off('service_started', handleServiceStarted);\n      liveDataEvents.off('service_stopped', handleServiceStopped);\n    };\n  }, [fetchMarketData, fetchOrderBook, fetchTrades, fetchMarketSummary, selectedSymbol]);\n  \n  // Set up polling for order book, trades, and summary\n  useEffect(() => {\n    const orderBookInterval = setInterval(fetchOrderBook, 10000); // 10 seconds\n    const tradesInterval = setInterval(fetchTrades, 5000); // 5 seconds\n    const summaryInterval = setInterval(fetchMarketSummary, 30000); // 30 seconds\n    \n    return () => {\n      clearInterval(orderBookInterval);\n      clearInterval(tradesInterval);\n      clearInterval(summaryInterval);\n    };\n  }, [fetchOrderBook, fetchTrades, fetchMarketSummary]);\n  \n  // Format market data for chart\n  const formatChartData = () => {\n    return marketData.map(point => ({\n      timestamp: new Date(point.timestamp).toLocaleTimeString(),\n      close: point.close,\n      volume: point.volume / 1000, // Scale down for better visualization\n      isAnomaly: point.isAnomaly ? point.close : null\n    }));\n  };\n  \n  return (\n    <div className=\"bg-white dark:bg-neutral-800 rounded-lg shadow p-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-xl font-semibold text-neutral-800 dark:text-white\">Advanced Live Data Dashboard</h2>\n        \n        <div className=\"flex items-center space-x-4\">\n          <button\n            onClick={toggleLiveDataService}\n            className={`px-4 py-2 rounded-md text-white ${\n              serviceStatus === 'running' \n                ? 'bg-red-600 hover:bg-red-700' \n                : 'bg-green-600 hover:bg-green-700'\n            }`}\n          >\n            {serviceStatus === 'running' ? 'Stop Live Data' : 'Start Live Data'}\n          </button>\n          \n          <div className=\"relative\">\n            <select\n              value={selectedSymbol}\n              onChange={(e) => setSelectedSymbol(e.target.value)}\n              className=\"block w-full pl-3 pr-10 py-2 text-base border-neutral-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md dark:bg-neutral-700 dark:border-neutral-600 dark:text-white\"\n            >\n              {symbols.map(symbol => (\n                <option key={symbol} value={symbol}>{symbol}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div className=\"relative\">\n            <select\n              value={timeframe}\n              onChange={(e) => setTimeframe(e.target.value)}\n              className=\"block w-full pl-3 pr-10 py-2 text-base border-neutral-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md dark:bg-neutral-700 dark:border-neutral-600 dark:text-white\"\n            >\n              {timeframes.map(tf => (\n                <option key={tf} value={tf}>{tf}</option>\n              ))}\n            </select>\n          </div>\n          \n          <button\n            onClick={fetchMarketData}\n            disabled={isLoading}\n            className={`px-4 py-2 rounded-md text-white ${\n              isLoading ? 'bg-neutral-400' : 'bg-blue-600 hover:bg-blue-700'\n            }`}\n          >\n            {isLoading ? 'Loading...' : 'Refresh'}\n          </button>\n        </div>\n      </div>\n      \n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n        {marketSummary && (\n          <>\n            <div className=\"bg-neutral-100 dark:bg-neutral-700 p-4 rounded-md\">\n              <h3 className=\"text-lg font-medium mb-2 text-neutral-700 dark:text-neutral-300\">Price</h3>\n              <div className=\"text-3xl font-bold text-neutral-800 dark:text-white\">\n                ${marketSummary.lastPrice.toFixed(2)}\n              </div>\n              <div className={`text-sm font-medium ${\n                marketSummary.percentChange24h >= 0 \n                  ? 'text-green-600' \n                  : 'text-red-600'\n              }`}>\n                {marketSummary.percentChange24h >= 0 ? '+' : ''}\n                {marketSummary.percentChange24h.toFixed(2)}%\n              </div>\n            </div>\n            \n            <div className=\"bg-neutral-100 dark:bg-neutral-700 p-4 rounded-md\">\n              <h3 className=\"text-lg font-medium mb-2 text-neutral-700 dark:text-neutral-300\">24h Range</h3>\n              <div className=\"flex justify-between items-center\">\n                <div>\n                  <div className=\"text-sm text-neutral-500 dark:text-neutral-400\">Low</div>\n                  <div className=\"text-lg font-semibold text-neutral-800 dark:text-white\">\n                    ${marketSummary.low24h.toFixed(2)}\n                  </div>\n                </div>\n                <div className=\"w-full mx-4\">\n                  <div className=\"w-full bg-neutral-200 rounded-full h-2.5 dark:bg-neutral-600\">\n                    <div \n                      className=\"h-2.5 rounded-full bg-blue-600\" \n                      style={{ \n                        width: `${((marketSummary.lastPrice - marketSummary.low24h) / \n                                (marketSummary.high24h - marketSummary.low24h) * 100).toFixed(0)}%` \n                      }}\n                    ></div>\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-sm text-neutral-500 dark:text-neutral-400\">High</div>\n                  <div className=\"text-lg font-semibold text-neutral-800 dark:text-white\">\n                    ${marketSummary.high24h.toFixed(2)}\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"bg-neutral-100 dark:bg-neutral-700 p-4 rounded-md\">\n              <h3 className=\"text-lg font-medium mb-2 text-neutral-700 dark:text-neutral-300\">24h Volume</h3>\n              <div className=\"text-3xl font-bold text-neutral-800 dark:text-white\">\n                {marketSummary.volume24h.toLocaleString(undefined, { maximumFractionDigits: 2 })}\n              </div>\n              <div className=\"text-sm text-neutral-500 dark:text-neutral-400\">\n                ${marketSummary.quoteVolume24h.toLocaleString(undefined, { maximumFractionDigits: 2 })}\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n      \n      <div className=\"mb-6\">\n        <h3 className=\"text-lg font-medium mb-2 text-neutral-700 dark:text-neutral-300\">Price Chart</h3>\n        \n        <div className=\"h-80 bg-neutral-50 dark:bg-neutral-700 p-4 rounded-md\">\n          {marketData.length > 0 ? (\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <LineChart\n                data={formatChartData()}\n                margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\n              >\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"timestamp\" />\n                <YAxis yAxisId=\"left\" />\n                <YAxis yAxisId=\"right\" orientation=\"right\" />\n                <Tooltip />\n                <Legend />\n                <Line \n                  yAxisId=\"left\"\n                  type=\"monotone\" \n                  dataKey=\"close\" \n                  stroke=\"#2563eb\" \n                  dot={false} \n                  activeDot={{ r: 8 }} \n                />\n                <Line \n                  yAxisId=\"right\"\n                  type=\"monotone\" \n                  dataKey=\"volume\" \n                  stroke=\"#9ca3af\" \n                  dot={false}\n                />\n                <Line \n                  yAxisId=\"left\"\n                  type=\"monotone\" \n                  dataKey=\"isAnomaly\" \n                  stroke=\"#ef4444\" \n                  strokeWidth={0}\n                  dot={{ r: 6, fill: '#ef4444' }}\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          ) : (\n            <div className=\"flex items-center justify-center h-full\">\n              <p className=\"text-neutral-500 dark:text-neutral-400\">No data available</p>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      <Tabs defaultValue=\"order-book\">\n        <TabsList>\n          <TabsTrigger value=\"order-book\">Order Book</TabsTrigger>\n          <TabsTrigger value=\"recent-trades\">Recent Trades</TabsTrigger>\n          <TabsTrigger value=\"anomalies\">Anomalies</TabsTrigger>\n          <TabsTrigger value=\"configuration\">Configuration</TabsTrigger>\n        </TabsList>\n        \n        <TabsContent value=\"order-book\">\n          {orderBook ? (\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <h4 className=\"text-md font-medium mb-2 text-green-600\">Bids</h4>\n                <div className=\"overflow-y-auto max-h-60\">\n                  <table className=\"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700\">\n                    <thead className=\"bg-neutral-50 dark:bg-neutral-800\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                          Price\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                          Amount\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                          Total\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-neutral-200 dark:bg-neutral-900 dark:divide-neutral-700\">\n                      {orderBook.bids.map((bid, index) => (\n                        <tr key={index}>\n                          <td className=\"px-6 py-2 whitespace-nowrap text-sm font-medium text-green-600\">\n                            {bid.price.toFixed(2)}\n                          </td>\n                          <td className=\"px-6 py-2 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400\">\n                            {bid.amount.toFixed(6)}\n                          </td>\n                          <td className=\"px-6 py-2 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400\">\n                            {(bid.price * bid.amount).toFixed(2)}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n              \n              <div>\n                <h4 className=\"text-md font-medium mb-2 text-red-600\">Asks</h4>\n                <div className=\"overflow-y-auto max-h-60\">\n                  <table className=\"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700\">\n                    <thead className=\"bg-neutral-50 dark:bg-neutral-800\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                          Price\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                          Amount\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                          Total\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-neutral-200 dark:bg-neutral-900 dark:divide-neutral-700\">\n                      {orderBook.asks.map((ask, index) => (\n                        <tr key={index}>\n                          <td className=\"px-6 py-2 whitespace-nowrap text-sm font-medium text-red-600\">\n                            {ask.price.toFixed(2)}\n                          </td>\n                          <td className=\"px-6 py-2 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400\">\n                            {ask.amount.toFixed(6)}\n                          </td>\n                          <td className=\"px-6 py-2 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400\">\n                            {(ask.price * ask.amount).toFixed(2)}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex items-center justify-center h-40\">\n              <p className=\"text-neutral-500 dark:text-neutral-400\">No order book data available</p>\n            </div>\n          )}\n        </TabsContent>\n        \n        <TabsContent value=\"recent-trades\">\n          {trades.length > 0 ? (\n            <div className=\"overflow-y-auto max-h-60\">\n              <table className=\"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700\">\n                <thead className=\"bg-neutral-50 dark:bg-neutral-800\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                      Time\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                      Price\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                      Amount\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                      Side\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-neutral-200 dark:bg-neutral-900 dark:divide-neutral-700\">\n                  {trades.map((trade) => (\n                    <tr key={trade.id}>\n                      <td className=\"px-6 py-2 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400\">\n                        {new Date(trade.timestamp).toLocaleTimeString()}\n                      </td>\n                      <td className={`px-6 py-2 whitespace-nowrap text-sm font-medium ${\n                        trade.side === 'buy' ? 'text-green-600' : 'text-red-600'\n                      }`}>\n                        {trade.price.toFixed(2)}\n                      </td>\n                      <td className=\"px-6 py-2 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400\">\n                        {trade.amount.toFixed(6)}\n                      </td>\n                      <td className=\"px-6 py-2 whitespace-nowrap text-sm\">\n                        <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                          trade.side === 'buy' \n                            ? 'bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100' \n                            : 'bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100'\n                        }`}>\n                          {trade.side.toUpperCase()}\n                        </span>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"flex items-center justify-center h-40\">\n              <p className=\"text-neutral-500 dark:text-neutral-400\">No trade data available</p>\n            </div>\n          )}\n        </TabsContent>\n        \n        <TabsContent value=\"anomalies\">\n          {anomalies.length > 0 ? (\n            <div className=\"overflow-y-auto max-h-60\">\n              <table className=\"min-w-full divide-y divide-neutral-200 dark:divide-neutral-700\">\n                <thead className=\"bg-neutral-50 dark:bg-neutral-800\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                      Time\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                      Price\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                      Confidence\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-neutral-500 dark:text-neutral-300 uppercase tracking-wider\">\n                      Type\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-neutral-200 dark:bg-neutral-900 dark:divide-neutral-700\">\n                  {anomalies.map((anomaly, index) => (\n                    <tr key={index}>\n                      <td className=\"px-6 py-2 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400\">\n                        {new Date(anomaly.timestamp).toLocaleString()}\n                      </td>\n                      <td className=\"px-6 py-2 whitespace-nowrap text-sm font-medium text-neutral-800 dark:text-white\">\n                        {anomaly.close.toFixed(2)}\n                      </td>\n                      <td className=\"px-6 py-2 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400\">\n                        <div className=\"w-full bg-neutral-200 rounded-full h-2.5 dark:bg-neutral-700\">\n                          <div \n                            className=\"h-2.5 rounded-full bg-red-600\" \n                            style={{ width: `${((anomaly.confidence || 0) * 100).toFixed(0)}%` }}\n                          ></div>\n                        </div>\n                        <span className=\"text-xs\">{((anomaly.confidence || 0) * 100).toFixed(0)}%</span>\n                      </td>\n                      <td className=\"px-6 py-2 whitespace-nowrap text-sm\">\n                        <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100\">\n                          PRICE ANOMALY\n                        </span>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <div className=\"flex items-center justify-center h-40\">\n              <p className=\"text-neutral-500 dark:text-neutral-400\">No anomalies detected</p>\n            </div>\n          )}\n        </TabsContent>\n        \n        <TabsContent value=\"configuration\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <h4 className=\"text-md font-medium mb-4 text-neutral-700 dark:text-neutral-300\">Data Sources</h4>\n              \n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1\">\n                  Primary Source\n                </label>\n                <select\n                  value={config.primarySource}\n                  onChange={(e) => updateConfig({ primarySource: e.target.value as LiveDataConfig['primarySource'] })}\n                  className=\"w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white\"\n                >\n                  <option value=\"poloniex\">Poloniex API</option>\n                  <option value=\"websocket\">WebSocket</option>\n                  <option value=\"aggregated\">Aggregated (Multiple Sources)</option>\n                </select>\n              </div>\n              \n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1\">\n                  Aggregation Method\n                </label>\n                <select\n                  value={config.aggregationMethod}\n                  onChange={(e) => updateConfig({ aggregationMethod: e.target.value as LiveDataConfig['aggregationMethod'] })}\n                  className=\"w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white\"\n                >\n                  <option value=\"weighted\">Weighted Average</option>\n                  <option value=\"median\">Median</option>\n                  <option value=\"mean\">Mean</option>\n                </select>\n              </div>\n              \n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1\">\n                  Update Interval (ms)\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"100\"\n                  max=\"10000\"\n                  step=\"100\"\n                  value={config.updateInterval}\n                  onChange={(e) => updateConfig({ updateInterval: parseInt(e.target.value) })}\n                  className=\"w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white\"\n                />\n              </div>\n            </div>\n            \n            <div>\n              <h4 className=\"text-md font-medium mb-4 text-neutral-700 dark:text-neutral-300\">Data Processing</h4>\n              \n              <div className=\"flex items-center mb-4\">\n                <input\n                  type=\"checkbox\"\n                  id=\"enableAnomalyDetection\"\n                  checked={config.enableAnomalyDetection}\n                  onChange={(e) => updateConfig({ enableAnomalyDetection: e.target.checked })}\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-neutral-300 rounded\"\n                />\n                <label htmlFor=\"enableAnomalyDetection\" className=\"ml-2 block text-sm text-neutral-700 dark:text-neutral-300\">\n                  Enable Anomaly Detection\n                </label>\n              </div>\n              \n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1\">\n                  Anomaly Threshold (standard deviations)\n                </label>\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"10\"\n                  step=\"0.1\"\n                  value={config.anomalyThreshold}\n                  onChange={(e) => updateConfig({ anomalyThreshold: parseFloat(e.target.value) })}\n                  className=\"w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white\"\n                />\n              </div>\n              \n              <div className=\"flex items-center mb-4\">\n                <input\n                  type=\"checkbox\"\n                  id=\"enableDataNormalization\"\n                  checked={config.enableDataNormalization}\n                  onChange={(e) => updateConfig({ enableDataNormalization: e.target.checked })}\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-neutral-300 rounded\"\n                />\n                <label htmlFor=\"enableDataNormalization\" className=\"ml-2 block text-sm text-neutral-700 dark:text-neutral-300\">\n                  Enable Data Normalization\n                </label>\n              </div>\n              \n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-1\">\n                  Log Level\n                </label>\n                <select\n                  value={config.logLevel}\n                  onChange={(e) => updateConfig({ logLevel: e.target.value as LiveDataConfig['logLevel'] })}\n                  className=\"w-full px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-neutral-700 dark:border-neutral-600 dark:text-white\"\n                >\n                  <option value=\"debug\">Debug</option>\n                  <option value=\"info\">Info</option>\n                  <option value=\"warn\">Warning</option>\n                  <option value=\"error\">Error</option>\n                </select>\n              </div>\n            </div>\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default LiveDataDashboard;\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { useWebSocket } from '../../services/websocketService';\nimport { useTradingContext } from '../../hooks/useTradingContext';\nimport { \n  TrendingUp, \n  TrendingDown, \n  BarChart3,\n  Wallet,\n  Target\n} from 'lucide-react';\n\ninterface PortfolioMetric {\n  value: number;\n  change: number;\n  changePercent: number;\n  timestamp: number;\n}\n\ninterface RealTimePortfolioData {\n  totalValue: PortfolioMetric;\n  availableBalance: PortfolioMetric;\n  unrealizedPnL: PortfolioMetric;\n  realizedPnL: PortfolioMetric;\n  dayPnL: PortfolioMetric;\n  openPositions: number;\n  marginUsed: number;\n  marginFree: number;\n  totalEquity: number;\n}\n\ninterface MarketData {\n  symbol: string;\n  price: number;\n  change: number;\n  changePercent: number;\n  volume: number;\n  timestamp: number;\n}\n\ninterface TradeData {\n  amount: number;\n  price: number;\n  profit: number;\n  side: 'buy' | 'sell';\n  symbol: string;\n  timestamp: number;\n}\n\ninterface RealTimePortfolioProps {\n  refreshInterval?: number;\n}\n\nconst RealTimePortfolio: React.FC<RealTimePortfolioProps> = ({ \n  refreshInterval = 5000 \n}) => {\n  const { accountBalance, activeStrategies } = useTradingContext();\n  const { isConnected, on, off } = useWebSocket();\n  \n  const [portfolioData, setPortfolioData] = useState<RealTimePortfolioData | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [lastUpdate, setLastUpdate] = useState<number>(Date.now());\n\n  // Initialize portfolio data from account balance\n  const initializePortfolioData = useCallback(() => {\n    if (accountBalance) {\n      const totalValue = parseFloat(accountBalance.totalAmount || '0');\n      const unrealizedPnL = parseFloat(accountBalance.unrealizedPnL || '0');\n      const todayPnL = parseFloat(accountBalance.todayPnL || '0');\n      const availableBalance = parseFloat(accountBalance.availableAmount || '0');\n\n      const baseMetric = {\n        change: 0,\n        changePercent: 0,\n        timestamp: Date.now()\n      };\n\n      setPortfolioData({\n        totalValue: { value: totalValue, ...baseMetric },\n        availableBalance: { value: availableBalance, ...baseMetric },\n        unrealizedPnL: { \n          value: unrealizedPnL, \n          change: unrealizedPnL,\n          changePercent: totalValue > 0 ? (unrealizedPnL / totalValue) * 100 : 0,\n          timestamp: Date.now()\n        },\n        realizedPnL: { value: 0, ...baseMetric },\n        dayPnL: { \n          value: todayPnL,\n          change: todayPnL,\n          changePercent: parseFloat(accountBalance.todayPnLPercentage || '0'),\n          timestamp: Date.now()\n        },\n        openPositions: 0,\n        marginUsed: 0,\n        marginFree: availableBalance,\n        totalEquity: totalValue\n      });\n      \n      setIsLoading(false);\n    }\n  }, [accountBalance]);\n\n  // Handle real-time trade execution updates\n  const handleTradeExecuted = useCallback((tradeData: TradeData) => {\n    setPortfolioData(prev => {\n      if (!prev) return null;\n\n      const tradeValue = (tradeData.amount || 0) * (tradeData.price || 0);\n      const profit = tradeData.profit || 0;\n      const isPositive = profit >= 0;\n\n      return {\n        ...prev,\n        totalValue: {\n          ...prev.totalValue,\n          value: prev.totalValue.value + profit,\n          change: profit,\n          changePercent: prev.totalValue.value > 0 ? (profit / prev.totalValue.value) * 100 : 0,\n          timestamp: Date.now()\n        },\n        realizedPnL: {\n          ...prev.realizedPnL,\n          value: prev.realizedPnL.value + profit,\n          change: profit,\n          changePercent: isPositive ? Math.abs(profit / tradeValue * 100) : -Math.abs(profit / tradeValue * 100),\n          timestamp: Date.now()\n        },\n        dayPnL: {\n          ...prev.dayPnL,\n          value: prev.dayPnL.value + profit,\n          change: profit,\n          changePercent: prev.totalValue.value > 0 ? ((prev.dayPnL.value + profit) / prev.totalValue.value) * 100 : 0,\n          timestamp: Date.now()\n        },\n        openPositions: tradeData.side === 'buy' ? prev.openPositions + 1 : Math.max(0, prev.openPositions - 1)\n      };\n    });\n\n    setLastUpdate(Date.now());\n  }, []);\n\n  // Handle market data updates that might affect portfolio value\n  const handleMarketData = useCallback((marketData: MarketData) => {\n    // Update portfolio value based on market movements\n    // This is a simplified calculation - in a real implementation,\n    // you'd calculate based on actual holdings\n    setPortfolioData(prev => {\n      if (!prev) return null;\n\n      // Simple simulation: portfolio moves with market\n      const marketChange = marketData.changePercent || 0;\n      const portfolioImpact = prev.totalValue.value * (marketChange / 100) * 0.1; // 10% correlation\n\n      return {\n        ...prev,\n        unrealizedPnL: {\n          ...prev.unrealizedPnL,\n          value: prev.unrealizedPnL.value + portfolioImpact,\n          change: portfolioImpact,\n          changePercent: prev.totalValue.value > 0 ? (portfolioImpact / prev.totalValue.value) * 100 : 0,\n          timestamp: Date.now()\n        },\n        totalValue: {\n          ...prev.totalValue,\n          value: prev.totalValue.value + portfolioImpact,\n          change: portfolioImpact,\n          changePercent: marketChange * 0.1, // Dampened market correlation\n          timestamp: Date.now()\n        }\n      };\n    });\n  }, []);\n\n  // Initialize data on component mount\n  useEffect(() => {\n    initializePortfolioData();\n  }, [initializePortfolioData]);\n\n  // Set up WebSocket listeners\n  useEffect(() => {\n    if (isConnected) {\n      on('tradeExecuted', handleTradeExecuted);\n      on('marketData', handleMarketData);\n\n      return () => {\n        off('tradeExecuted', handleTradeExecuted);\n        off('marketData', handleMarketData);\n      };\n    }\n  }, [isConnected, handleTradeExecuted, handleMarketData, on, off]);\n\n  // Periodic refresh for data that might be stale\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setLastUpdate(Date.now());\n    }, refreshInterval);\n\n    return () => clearInterval(interval);\n  }, [refreshInterval]);\n\n  if (isLoading || !portfolioData) {\n    return (\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {[...Array(4)].map((_, i) => (\n          <div key={i} className=\"trading-card animate-pulse\">\n            <div className=\"h-20 bg-neutral-200 rounded\"></div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    }).format(value);\n  };\n\n  const formatPercent = (value: number) => {\n    return `${value >= 0 ? '+' : ''}${value.toFixed(2)}%`;\n  };\n\n  const getChangeColor = (value: number) => {\n    return value >= 0 ? 'text-green-600' : 'text-red-600';\n  };\n\n  const getChangeBgColor = (value: number) => {\n    return value >= 0 ? 'bg-green-100' : 'bg-red-100';\n  };\n\n  const getChangeIcon = (value: number) => {\n    return value >= 0 ? (\n      <TrendingUp className=\"h-5 w-5 text-green-600\" />\n    ) : (\n      <TrendingDown className=\"h-5 w-5 text-red-600\" />\n    );\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Connection Status */}\n      <div className=\"flex items-center justify-between text-sm text-neutral-500\">\n        <div className=\"flex items-center space-x-2\">\n          <div className={`w-2 h-2 rounded-full ${isConnected ? 'bg-green-500' : 'bg-red-500'}`}></div>\n          <span>{isConnected ? 'Live updates active' : 'Offline mode'}</span>\n        </div>\n        <span>Last update: {new Date(lastUpdate).toLocaleTimeString()}</span>\n      </div>\n\n      {/* Portfolio Metrics Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {/* Total Portfolio Value */}\n        <div className=\"trading-card\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex-1\">\n              <div className=\"text-sm font-medium text-neutral-500 mb-1\">\n                Total Portfolio\n              </div>\n              <div className=\"text-2xl font-bold text-neutral-800\">\n                {formatCurrency(portfolioData.totalValue.value)}\n              </div>\n              <div className={`text-sm font-medium ${getChangeColor(portfolioData.totalValue.changePercent)}`}>\n                {formatPercent(portfolioData.totalValue.changePercent)}\n              </div>\n            </div>\n            <div className={`p-2 rounded-full ${getChangeBgColor(portfolioData.totalValue.changePercent)}`}>\n              <Wallet className=\"h-6 w-6 text-blue-600\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Day P&L */}\n        <div className=\"trading-card\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex-1\">\n              <div className=\"text-sm font-medium text-neutral-500 mb-1\">\n                Today's P&L\n              </div>\n              <div className=\"text-2xl font-bold text-neutral-800\">\n                {formatCurrency(portfolioData.dayPnL.value)}\n              </div>\n              <div className={`text-sm font-medium ${getChangeColor(portfolioData.dayPnL.changePercent)}`}>\n                {formatPercent(portfolioData.dayPnL.changePercent)}\n              </div>\n            </div>\n            <div className={`p-2 rounded-full ${getChangeBgColor(portfolioData.dayPnL.changePercent)}`}>\n              {getChangeIcon(portfolioData.dayPnL.changePercent)}\n            </div>\n          </div>\n        </div>\n\n        {/* Unrealized P&L */}\n        <div className=\"trading-card\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex-1\">\n              <div className=\"text-sm font-medium text-neutral-500 mb-1\">\n                Unrealized P&L\n              </div>\n              <div className=\"text-2xl font-bold text-neutral-800\">\n                {formatCurrency(portfolioData.unrealizedPnL.value)}\n              </div>\n              <div className={`text-sm font-medium ${getChangeColor(portfolioData.unrealizedPnL.changePercent)}`}>\n                {formatPercent(portfolioData.unrealizedPnL.changePercent)}\n              </div>\n            </div>\n            <div className={`p-2 rounded-full ${getChangeBgColor(portfolioData.unrealizedPnL.changePercent)}`}>\n              <BarChart3 className=\"h-6 w-6 text-purple-600\" />\n            </div>\n          </div>\n        </div>\n\n        {/* Open Positions */}\n        <div className=\"trading-card\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex-1\">\n              <div className=\"text-sm font-medium text-neutral-500 mb-1\">\n                Open Positions\n              </div>\n              <div className=\"text-2xl font-bold text-neutral-800\">\n                {portfolioData.openPositions}\n              </div>\n              <div className=\"text-sm text-neutral-500\">\n                {activeStrategies.length} strategies active\n              </div>\n            </div>\n            <div className=\"p-2 rounded-full bg-orange-100\">\n              <Target className=\"h-6 w-6 text-orange-600\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Detailed Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div className=\"trading-card\">\n          <h4 className=\"text-lg font-medium text-neutral-800 mb-3\">Available Balance</h4>\n          <div className=\"text-xl font-bold text-neutral-800\">\n            {formatCurrency(portfolioData.availableBalance.value)}\n          </div>\n          <div className=\"text-sm text-neutral-500 mt-1\">\n            Ready for trading\n          </div>\n        </div>\n\n        <div className=\"trading-card\">\n          <h4 className=\"text-lg font-medium text-neutral-800 mb-3\">Realized P&L</h4>\n          <div className={`text-xl font-bold ${getChangeColor(portfolioData.realizedPnL.value)}`}>\n            {formatCurrency(portfolioData.realizedPnL.value)}\n          </div>\n          <div className=\"text-sm text-neutral-500 mt-1\">\n            Closed positions\n          </div>\n        </div>\n\n        <div className=\"trading-card\">\n          <h4 className=\"text-lg font-medium text-neutral-800 mb-3\">Total Equity</h4>\n          <div className=\"text-xl font-bold text-neutral-800\">\n            {formatCurrency(portfolioData.totalEquity)}\n          </div>\n          <div className=\"text-sm text-neutral-500 mt-1\">\n            Including unrealized\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RealTimePortfolio;","import React, { useState, useEffect, useCallback } from 'react';\nimport { useWebSocket } from '../../services/websocketService';\nimport { useTradingContext } from '../../hooks/useTradingContext';\nimport { \n  Bell, \n  CheckCircle, \n  AlertTriangle, \n  XCircle, \n  Info,\n  X,\n  Volume2,\n  VolumeX,\n  Settings\n} from 'lucide-react';\n\ninterface MarketDataEvent {\n  symbol: string;\n  price: number;\n  changePercent: number;\n  volume: number;\n  timestamp: number;\n}\n\ninterface TradeExecutionEvent {\n  id: string;\n  symbol: string;\n  side: 'buy' | 'sell';\n  amount: number;\n  price: number;\n  profit?: number;\n  timestamp: number;\n}\n\nexport interface RealTimeAlert {\n  id: string;\n  type: 'success' | 'warning' | 'error' | 'info';\n  category: 'trade' | 'market' | 'strategy' | 'system' | 'risk';\n  title: string;\n  message: string;\n  timestamp: number;\n  priority: 'low' | 'medium' | 'high' | 'critical';\n  acknowledged: boolean;\n  data?: Record<string, unknown>; // Additional data for the alert\n}\n\ninterface AlertRules {\n  priceChange: {\n    enabled: boolean;\n    threshold: number; // percentage\n  };\n  volumeSpike: {\n    enabled: boolean;\n    threshold: number; // multiplier\n  };\n  portfolioChange: {\n    enabled: boolean;\n    threshold: number; // percentage\n  };\n  strategyStop: {\n    enabled: boolean;\n  };\n  connectionIssues: {\n    enabled: boolean;\n  };\n}\n\ninterface RealTimeAlertsProps {\n  maxAlerts?: number;\n  soundEnabled?: boolean;\n  onAlertClick?: (alert: RealTimeAlert) => void;\n}\n\nconst RealTimeAlerts: React.FC<RealTimeAlertsProps> = ({\n  maxAlerts = 50,\n  soundEnabled: initialSoundEnabled = true,\n  onAlertClick\n}) => {\n  const { isConnected, on, off } = useWebSocket();\n  const { activeStrategies } = useTradingContext();\n\n  const [alerts, setAlerts] = useState<RealTimeAlert[]>([]);\n  const [soundEnabled, setSoundEnabled] = useState(initialSoundEnabled);\n  const [showSettings, setShowSettings] = useState(false);\n  const [alertRules, setAlertRules] = useState<AlertRules>({\n    priceChange: { enabled: true, threshold: 5 },\n    volumeSpike: { enabled: true, threshold: 3 },\n    portfolioChange: { enabled: true, threshold: 2 },\n    strategyStop: { enabled: true },\n    connectionIssues: { enabled: true }\n  });\n\n  // Create alert utility function\n  const createAlert = useCallback((\n    type: RealTimeAlert['type'],\n    category: RealTimeAlert['category'],\n    title: string,\n    message: string,\n    priority: RealTimeAlert['priority'] = 'medium',\n    data?: Record<string, unknown>\n  ): RealTimeAlert => {\n    return {\n      id: `alert-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      type,\n      category,\n      title,\n      message,\n      timestamp: Date.now(),\n      priority,\n      acknowledged: false,\n      data\n    };\n  }, []);\n\n  // Add alert function\n  const addAlert = useCallback((alert: RealTimeAlert) => {\n    setAlerts(prev => {\n      const newAlerts = [alert, ...prev];\n      \n      // Limit alerts to maxAlerts\n      if (newAlerts.length > maxAlerts) {\n        return newAlerts.slice(0, maxAlerts);\n      }\n      \n      return newAlerts;\n    });\n\n    // Play sound for high/critical priority alerts\n    if (soundEnabled && (alert.priority === 'high' || alert.priority === 'critical')) {\n      playAlertSound(alert.type);\n    }\n  }, [maxAlerts, soundEnabled]);\n\n  // Play alert sound\n  const playAlertSound = (type: RealTimeAlert['type']) => {\n    try {\n      const AudioContextClass = window.AudioContext || (window as typeof window & { webkitAudioContext?: typeof AudioContext }).webkitAudioContext;\n      if (!AudioContextClass) return;\n      \n      const audioContext = new AudioContextClass();\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n\n      // Different frequencies for different alert types\n      const frequencies = {\n        success: 800,\n        info: 600,\n        warning: 400,\n        error: 200\n      };\n\n      oscillator.frequency.value = frequencies[type];\n      oscillator.type = 'sine';\n\n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);\n\n      oscillator.start(audioContext.currentTime);\n      oscillator.stop(audioContext.currentTime + 0.5);\n    } catch (error) {\n      console.warn('Could not play alert sound:', error);\n    }\n  };\n\n  // Handle market data alerts\n  const handleMarketData = useCallback((marketData: MarketDataEvent) => {\n    if (!alertRules.priceChange.enabled) return;\n\n    const changePercent = Math.abs(marketData.changePercent || 0);\n    \n    if (changePercent >= alertRules.priceChange.threshold) {\n      const alert = createAlert(\n        changePercent >= 10 ? 'error' : 'warning',\n        'market',\n        'Significant Price Movement',\n        `${marketData.pair} moved ${marketData.changePercent > 0 ? '+' : ''}${marketData.changePercent.toFixed(2)}%`,\n        changePercent >= 10 ? 'high' : 'medium',\n        marketData\n      );\n      addAlert(alert);\n    }\n  }, [alertRules.priceChange, createAlert, addAlert]);\n\n  // Handle trade execution alerts\n  const handleTradeExecuted = useCallback((tradeData: TradeExecutionEvent) => {\n    const isProfit = (tradeData.profit || 0) > 0;\n    const alert = createAlert(\n      isProfit ? 'success' : 'error',\n      'trade',\n      'Trade Executed',\n      `${tradeData.side?.toUpperCase() || 'TRADE'} ${tradeData.amount || 0} ${tradeData.pair || ''} ${isProfit ? `+$${tradeData.profit?.toFixed(2) || '0.00'}` : `$${tradeData.profit?.toFixed(2) || '0.00'}`}`,\n      isProfit ? 'low' : 'medium',\n      tradeData\n    );\n    addAlert(alert);\n  }, [createAlert, addAlert]);\n\n  // Handle WebSocket connection changes\n  const handleConnectionChange = useCallback((connectionState: string) => {\n    if (!alertRules.connectionIssues.enabled) return;\n\n    if (connectionState === 'disconnected' || connectionState === 'failed') {\n      const alert = createAlert(\n        'error',\n        'system',\n        'Connection Lost',\n        'WebSocket connection lost. Trading may be affected.',\n        'high'\n      );\n      addAlert(alert);\n    } else if (connectionState === 'connected') {\n      const alert = createAlert(\n        'success',\n        'system',\n        'Connected',\n        'WebSocket connection restored.',\n        'low'\n      );\n      addAlert(alert);\n    }\n  }, [alertRules.connectionIssues, createAlert, addAlert]);\n\n  // Set up WebSocket listeners\n  useEffect(() => {\n    if (isConnected) {\n      on('marketData', handleMarketData);\n      on('tradeExecuted', handleTradeExecuted);\n      on('connectionStateChanged', handleConnectionChange);\n\n      return () => {\n        off('marketData', handleMarketData);\n        off('tradeExecuted', handleTradeExecuted);\n        off('connectionStateChanged', handleConnectionChange);\n      };\n    }\n  }, [isConnected, handleMarketData, handleTradeExecuted, handleConnectionChange, on, off]);\n\n  // Monitor strategy changes\n  useEffect(() => {\n    if (!alertRules.strategyStop.enabled) return;\n\n    const previousActiveCount = alerts.filter(a => a.category === 'strategy').length;\n    const currentActiveCount = activeStrategies.length;\n\n    if (previousActiveCount > currentActiveCount) {\n      const alert = createAlert(\n        'warning',\n        'strategy',\n        'Strategy Stopped',\n        `A trading strategy has stopped. ${currentActiveCount} strategies still active.`,\n        'medium'\n      );\n      addAlert(alert);\n    }\n  }, [activeStrategies.length, alertRules.strategyStop, createAlert, addAlert, alerts]);\n\n  // Acknowledge alert\n  const acknowledgeAlert = (alertId: string) => {\n    setAlerts(prev => \n      prev.map(alert => \n        alert.id === alertId ? { ...alert, acknowledged: true } : alert\n      )\n    );\n  };\n\n  // Remove alert\n  const removeAlert = (alertId: string) => {\n    setAlerts(prev => prev.filter(alert => alert.id !== alertId));\n  };\n\n  // Clear all alerts\n  const clearAllAlerts = () => {\n    setAlerts([]);\n  };\n\n  // Acknowledge all alerts\n  const acknowledgeAllAlerts = () => {\n    setAlerts(prev => prev.map(alert => ({ ...alert, acknowledged: true })));\n  };\n\n  // Get alert icon\n  const getAlertIcon = (alert: RealTimeAlert) => {\n    switch (alert.type) {\n      case 'success':\n        return <CheckCircle className=\"h-5 w-5 text-green-500\" />;\n      case 'warning':\n        return <AlertTriangle className=\"h-5 w-5 text-yellow-500\" />;\n      case 'error':\n        return <XCircle className=\"h-5 w-5 text-red-500\" />;\n      case 'info':\n      default:\n        return <Info className=\"h-5 w-5 text-blue-500\" />;\n    }\n  };\n\n  // Get alert background color\n  const getAlertBgColor = (alert: RealTimeAlert) => {\n    const base = alert.acknowledged ? 'opacity-50 ' : '';\n    switch (alert.type) {\n      case 'success':\n        return base + 'bg-green-50 border-green-200';\n      case 'warning':\n        return base + 'bg-yellow-50 border-yellow-200';\n      case 'error':\n        return base + 'bg-red-50 border-red-200';\n      case 'info':\n      default:\n        return base + 'bg-blue-50 border-blue-200';\n    }\n  };\n\n  // Get priority badge color\n  const getPriorityColor = (priority: RealTimeAlert['priority']) => {\n    switch (priority) {\n      case 'critical':\n        return 'bg-red-100 text-red-800';\n      case 'high':\n        return 'bg-orange-100 text-orange-800';\n      case 'medium':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'low':\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const unacknowledgedCount = alerts.filter(a => !a.acknowledged).length;\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <Bell className=\"h-5 w-5 text-neutral-600\" />\n          <h3 className=\"text-lg font-medium text-neutral-800\">Real-time Alerts</h3>\n          {unacknowledgedCount > 0 && (\n            <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800\">\n              {unacknowledgedCount} new\n            </span>\n          )}\n        </div>\n\n        <div className=\"flex items-center space-x-2\">\n          {/* Sound Toggle */}\n          <button\n            onClick={() => setSoundEnabled(!soundEnabled)}\n            className={`p-2 rounded-md transition-colors ${\n              soundEnabled \n                ? 'bg-blue-100 text-blue-600 hover:bg-blue-200' \n                : 'bg-gray-100 text-gray-400 hover:bg-gray-200'\n            }`}\n            title={soundEnabled ? 'Disable sound' : 'Enable sound'}\n          >\n            {soundEnabled ? <Volume2 className=\"h-4 w-4\" /> : <VolumeX className=\"h-4 w-4\" />}\n          </button>\n\n          {/* Settings */}\n          <button\n            onClick={() => setShowSettings(!showSettings)}\n            className=\"p-2 rounded-md bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors\"\n            title=\"Alert settings\"\n          >\n            <Settings className=\"h-4 w-4\" />\n          </button>\n\n          {/* Acknowledge All */}\n          {unacknowledgedCount > 0 && (\n            <button\n              onClick={acknowledgeAllAlerts}\n              className=\"px-3 py-1 text-sm bg-blue-100 text-blue-600 rounded-md hover:bg-blue-200 transition-colors\"\n            >\n              Acknowledge All\n            </button>\n          )}\n\n          {/* Clear All */}\n          {alerts.length > 0 && (\n            <button\n              onClick={clearAllAlerts}\n              className=\"px-3 py-1 text-sm bg-red-100 text-red-600 rounded-md hover:bg-red-200 transition-colors\"\n            >\n              Clear All\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Settings Panel */}\n      {showSettings && (\n        <div className=\"p-4 bg-neutral-50 rounded-md border\">\n          <h4 className=\"text-md font-medium mb-3\">Alert Settings</h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label className=\"flex items-center space-x-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={alertRules.priceChange.enabled}\n                  onChange={(e) => setAlertRules(prev => ({\n                    ...prev,\n                    priceChange: { ...prev.priceChange, enabled: e.target.checked }\n                  }))}\n                  className=\"rounded\"\n                />\n                <span className=\"text-sm\">Price change alerts</span>\n              </label>\n              {alertRules.priceChange.enabled && (\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"50\"\n                  value={alertRules.priceChange.threshold}\n                  onChange={(e) => setAlertRules(prev => ({\n                    ...prev,\n                    priceChange: { ...prev.priceChange, threshold: parseFloat(e.target.value) }\n                  }))}\n                  className=\"mt-1 block w-full px-3 py-1 border border-gray-300 rounded-md text-sm\"\n                  placeholder=\"Threshold %\"\n                />\n              )}\n            </div>\n\n            <div>\n              <label className=\"flex items-center space-x-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={alertRules.portfolioChange.enabled}\n                  onChange={(e) => setAlertRules(prev => ({\n                    ...prev,\n                    portfolioChange: { ...prev.portfolioChange, enabled: e.target.checked }\n                  }))}\n                  className=\"rounded\"\n                />\n                <span className=\"text-sm\">Portfolio change alerts</span>\n              </label>\n            </div>\n\n            <div>\n              <label className=\"flex items-center space-x-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={alertRules.strategyStop.enabled}\n                  onChange={(e) => setAlertRules(prev => ({\n                    ...prev,\n                    strategyStop: { ...prev.strategyStop, enabled: e.target.checked }\n                  }))}\n                  className=\"rounded\"\n                />\n                <span className=\"text-sm\">Strategy alerts</span>\n              </label>\n            </div>\n\n            <div>\n              <label className=\"flex items-center space-x-2\">\n                <input\n                  type=\"checkbox\"\n                  checked={alertRules.connectionIssues.enabled}\n                  onChange={(e) => setAlertRules(prev => ({\n                    ...prev,\n                    connectionIssues: { ...prev.connectionIssues, enabled: e.target.checked }\n                  }))}\n                  className=\"rounded\"\n                />\n                <span className=\"text-sm\">Connection alerts</span>\n              </label>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Alerts List */}\n      <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n        {alerts.length > 0 ? (\n          alerts.map(alert => (\n            <div\n              key={alert.id}\n              className={`p-3 rounded-md border transition-all duration-200 cursor-pointer ${getAlertBgColor(alert)}`}\n              onClick={() => {\n                if (onAlertClick) {\n                  onAlertClick(alert);\n                }\n                if (!alert.acknowledged) {\n                  acknowledgeAlert(alert.id);\n                }\n              }}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-start space-x-3 flex-1\">\n                  {getAlertIcon(alert)}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center space-x-2\">\n                      <h4 className=\"text-sm font-medium text-neutral-800 truncate\">\n                        {alert.title}\n                      </h4>\n                      <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${getPriorityColor(alert.priority)}`}>\n                        {alert.priority}\n                      </span>\n                    </div>\n                    <p className=\"text-sm text-neutral-600 mt-1\">\n                      {alert.message}\n                    </p>\n                    <p className=\"text-xs text-neutral-400 mt-1\">\n                      {new Date(alert.timestamp).toLocaleTimeString()}\n                    </p>\n                  </div>\n                </div>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    removeAlert(alert.id);\n                  }}\n                  className=\"ml-2 p-1 text-neutral-400 hover:text-neutral-600 transition-colors\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"text-center py-8\">\n            <Bell className=\"h-12 w-12 text-neutral-300 mx-auto mb-4\" />\n            <p className=\"text-neutral-500\">No alerts yet</p>\n            <p className=\"text-sm text-neutral-400 mt-1\">\n              Real-time alerts will appear here\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RealTimeAlerts;","import React, { useState, useEffect, useCallback } from 'react';\nimport { useTradingContext } from '../hooks/useTradingContext';\nimport { useWebSocket } from '../services/websocketService';\nimport LiveDataDashboard from '../components/dashboard/LiveDataDashboard';\nimport RealTimePortfolio from '../components/dashboard/RealTimePortfolio';\nimport RealTimeAlerts from '../components/dashboard/RealTimeAlerts';\nimport RecentTrades from '../components/dashboard/RecentTrades';\nimport StrategyPerformance from '../components/dashboard/StrategyPerformance';\nimport MockModeNotice from '../components/MockModeNotice';\nimport { \n  Activity, \n  TrendingUp, \n  TrendingDown, \n  Clock,\n  BarChart3,\n  Wifi,\n  WifiOff,\n  Zap\n} from 'lucide-react';\nimport { Line } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n} from 'chart.js';\n\n// Register Chart.js components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\ninterface RealTimeMetric {\n  timestamp: number;\n  value: number;\n  change: number;\n  changePercent: number;\n}\n\ninterface LiveAlert {\n  id: string;\n  type: 'success' | 'warning' | 'error' | 'info';\n  message: string;\n  timestamp: number;\n  acknowledged: boolean;\n}\n\nconst LiveTradingDashboard: React.FC = () => {\n  const { \n    marketData, \n    strategies, \n    activeStrategies, \n    trades, \n    isMockMode \n  } = useTradingContext();\n  \n  const { \n    connectionState, \n    isMockMode: wsIsMockMode, \n    isConnected,\n    on,\n    off\n  } = useWebSocket();\n\n  const [realTimePrice, setRealTimePrice] = useState<RealTimeMetric | null>(null);\n  const [priceHistory, setPriceHistory] = useState<RealTimeMetric[]>([]);\n  const [selectedPair, setSelectedPair] = useState<string>('BTC-USDT');\n  const [isLiveMode, setIsLiveMode] = useState<boolean>(false);\n\n  // Available trading pairs for live monitoring\n  const tradingPairs = [\n    'BTC-USDT', 'ETH-USDT', 'SOL-USDT', 'XRP-USDT', \n    'ADA-USDT', 'DOGE-USDT', 'MATIC-USDT', 'DOT-USDT'\n  ];\n\n  // Handle real-time market data\n  const handleMarketData = useCallback((data: any) => {\n    if (data.pair === selectedPair) {\n      const newMetric: RealTimeMetric = {\n        timestamp: data.timestamp || Date.now(),\n        value: data.close || data.price,\n        change: data.change || 0,\n        changePercent: data.changePercent || 0\n      };\n\n      setRealTimePrice(newMetric);\n      \n      // Update price history (keep last 50 points)\n      setPriceHistory(prev => {\n        const updated = [...prev, newMetric];\n        return updated.slice(-50);\n      });\n    }\n  }, [selectedPair]);\n\n  // Handle real-time trade execution\n  const handleTradeExecuted = useCallback((tradeData: any) => {\n    // This will be handled by the RealTimeAlerts component\n    console.log('Trade executed:', tradeData);\n  }, []);\n\n  // Set up WebSocket event listeners\n  useEffect(() => {\n    if (isLiveMode && isConnected) {\n      on('marketData', handleMarketData);\n      on('tradeExecuted', handleTradeExecuted);\n\n      return () => {\n        off('marketData', handleMarketData);\n        off('tradeExecuted', handleTradeExecuted);\n      };\n    }\n  }, [isLiveMode, isConnected, handleMarketData, handleTradeExecuted, on, off]);\n\n  // Toggle live mode\n  const toggleLiveMode = () => {\n    setIsLiveMode(!isLiveMode);\n    if (!isLiveMode) {\n      // Clear existing data when starting live mode\n      setPriceHistory([]);\n    }\n  };\n\n  // Format chart data for real-time price chart\n  const formatPriceChartData = () => {\n    const labels = priceHistory.map(point => \n      new Date(point.timestamp).toLocaleTimeString()\n    );\n    \n    return {\n      labels,\n      datasets: [\n        {\n          label: `${selectedPair} Price`,\n          data: priceHistory.map(point => point.value),\n          borderColor: 'rgb(59, 130, 246)',\n          backgroundColor: 'rgba(59, 130, 246, 0.1)',\n          borderWidth: 2,\n          fill: true,\n          tension: 0.1\n        }\n      ]\n    };\n  };\n\n  // Chart options\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top' as const,\n      },\n      title: {\n        display: true,\n        text: `Real-time ${selectedPair} Price`\n      }\n    },\n    scales: {\n      y: {\n        beginAtZero: false,\n      }\n    },\n    animation: {\n      duration: 0 // No animation for real-time updates\n    }\n  };\n\n  return (\n    <div className=\"container-responsive\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h1 className=\"text-2xl font-bold text-neutral-800\">Real-time Trading Dashboard</h1>\n        \n        <div className=\"flex items-center space-x-4\">\n          {/* Connection Status */}\n          <div className=\"flex items-center space-x-2\">\n            {isConnected ? (\n              <Wifi className=\"h-5 w-5 text-green-500\" />\n            ) : (\n              <WifiOff className=\"h-5 w-5 text-red-500\" />\n            )}\n            <span className=\"text-sm text-neutral-600\">\n              {isConnected ? 'Connected' : 'Disconnected'}\n            </span>\n          </div>\n\n          {/* Pair Selector */}\n          <select\n            value={selectedPair}\n            onChange={(e) => setSelectedPair(e.target.value)}\n            className=\"block w-32 px-3 py-2 border border-neutral-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n          >\n            {tradingPairs.map(pair => (\n              <option key={pair} value={pair}>{pair}</option>\n            ))}\n          </select>\n\n          {/* Live Mode Toggle */}\n          <button\n            onClick={toggleLiveMode}\n            className={`flex items-center space-x-2 px-4 py-2 rounded-md font-medium transition-colors ${\n              isLiveMode \n                ? 'bg-red-600 text-white hover:bg-red-700' \n                : 'bg-green-600 text-white hover:bg-green-700'\n            }`}\n          >\n            <Activity size={16} />\n            <span>{isLiveMode ? 'Stop Live' : 'Start Live'}</span>\n          </button>\n        </div>\n      </div>\n\n      {(isMockMode || wsIsMockMode) && (\n        <div className=\"mb-6\">\n          <MockModeNotice />\n        </div>\n      )}\n\n      {/* Real-time Portfolio Overview */}\n      <div className=\"mb-6\">\n        <RealTimePortfolio />\n      </div>\n\n      {/* Real-time Price Chart and Alerts */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n        {/* Real-time Price Chart */}\n        <div className=\"lg:col-span-2 trading-card\">\n          <h3 className=\"text-lg font-medium mb-4\">Real-time Price Movement</h3>\n          <div className=\"h-64\">\n            {priceHistory.length > 0 ? (\n              <Line data={formatPriceChartData()} options={chartOptions} />\n            ) : (\n              <div className=\"flex items-center justify-center h-full\">\n                <div className=\"text-center\">\n                  <Clock className=\"h-12 w-12 text-neutral-400 mx-auto mb-2\" />\n                  <p className=\"text-neutral-500\">\n                    {isLiveMode ? 'Waiting for real-time data...' : 'Start live mode to see real-time updates'}\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Live Alerts */}\n        <div className=\"trading-card\">\n          <RealTimeAlerts maxAlerts={10} />\n        </div>\n      </div>\n\n      {/* Advanced Live Data Dashboard */}\n      <div className=\"mb-6\">\n        <LiveDataDashboard />\n      </div>\n\n      {/* Strategy Performance and Recent Trades */}\n      <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n        <div className=\"trading-card\">\n          <h3 className=\"text-lg font-medium mb-4\">Live Strategy Performance</h3>\n          <StrategyPerformance strategies={strategies} />\n        </div>\n\n        <div className=\"trading-card\">\n          <h3 className=\"text-lg font-medium mb-4\">Recent Live Trades</h3>\n          <RecentTrades trades={trades} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LiveTradingDashboard;"],"names":["throttle","func","limit","inThrottle","args","debounce","wait","timeout","BrowserEventEmitter","__publicField","event","callback","cb","error","defaultLiveDataConfig","dataCache","liveDataEvents","LiveDataService","config","axios","key","ws","poloniexWs","data","parsedData","retryCount","source","message","tickerData","marketData","dataPoint","buffer","lastUpdate","_a","symbol","prices","d","mean","sum","price","squaredDiffs","variance","diff","stdDev","cacheKey","normalized","baseline","zScore","isAnomaly","confidence","interval","cached","response","processedData","candle","orderBook","bid","ask","trades","trade","summary","sources","poloniexData","wsData","method","groupedByTimestamp","point","roundedTimestamp","group","aggregatedData","timestamp","points","weights","aggregatedPoint","a","b","totalWeight","w","normalizedWeights","result","field","weightedSum","i","values","p","middle","acc","fallbacks","s","level","levels","liveDataService","cn","inputs","twMerge","clsx","Tabs","defaultValue","value","onValueChange","className","children","activeTab","setActiveTab","React.useState","React.useEffect","handleTabChange","tabValue","jsx","React.Children","child","React.isValidElement","TabsList","React.cloneElement","TabsContent","onTabChange","TabsTrigger","active","onSelect","LiveDataDashboard","setMarketData","useState","setOrderBook","setTrades","marketSummary","setMarketSummary","selectedSymbol","setSelectedSymbol","timeframe","setTimeframe","isLoading","setIsLoading","setError","anomalies","setAnomalies","serviceStatus","setServiceStatus","setConfig","symbols","timeframes","fetchMarketData","useCallback","anomalyPoints","err","fetchOrderBook","book","fetchTrades","tradeData","fetchMarketSummary","toggleLiveDataService","updateConfig","newConfig","updatedConfig","useEffect","handleDataProcessed","prevData","newData","prevAnomalies","handleServiceStarted","handleServiceStopped","orderBookInterval","tradesInterval","summaryInterval","formatChartData","jsxs","e","tf","Fragment","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Legend","Line","index","anomaly","RealTimePortfolio","refreshInterval","accountBalance","activeStrategies","useTradingContext","isConnected","on","off","useWebSocket","portfolioData","setPortfolioData","setLastUpdate","initializePortfolioData","totalValue","unrealizedPnL","todayPnL","availableBalance","baseMetric","handleTradeExecuted","prev","tradeValue","profit","isPositive","handleMarketData","marketChange","portfolioImpact","_","formatCurrency","formatPercent","getChangeColor","getChangeBgColor","getChangeIcon","TrendingUp","TrendingDown","Wallet","BarChart3","Target","RealTimeAlerts","maxAlerts","initialSoundEnabled","onAlertClick","alerts","setAlerts","soundEnabled","setSoundEnabled","showSettings","setShowSettings","alertRules","setAlertRules","createAlert","type","category","title","priority","addAlert","alert","newAlerts","playAlertSound","AudioContextClass","audioContext","oscillator","gainNode","frequencies","changePercent","isProfit","_b","_c","handleConnectionChange","connectionState","previousActiveCount","currentActiveCount","acknowledgeAlert","alertId","removeAlert","clearAllAlerts","acknowledgeAllAlerts","getAlertIcon","CheckCircle","AlertTriangle","XCircle","Info","getAlertBgColor","base","getPriorityColor","unacknowledgedCount","Bell","Volume2","VolumeX","Settings","X","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","LiveTradingDashboard","strategies","isMockMode","wsIsMockMode","realTimePrice","setRealTimePrice","priceHistory","setPriceHistory","selectedPair","setSelectedPair","isLiveMode","setIsLiveMode","tradingPairs","newMetric","toggleLiveMode","formatPriceChartData","chartOptions","Wifi","WifiOff","pair","Activity","MockModeNotice","Clock","StrategyPerformance","RecentTrades"],"mappings":"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"}