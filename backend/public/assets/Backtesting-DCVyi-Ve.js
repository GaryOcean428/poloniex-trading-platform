var K=Object.defineProperty;var Z=(v,t,a)=>t in v?K(v,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):v[t]=a;var L=(v,t,a)=>Z(v,typeof t!="symbol"?t+"":t,a);import{r as M,j as e,a2 as V,D as B,a3 as z,a4 as Y,T as E,m as I,q as J,Z as X,S as O,J as _,a0 as ee,k as te,h as se,P as q,a5 as ae,a6 as W}from"./vendor-52n1XO7X.js";import{p as le,u as ne}from"./index-CF9_aBFn.js";import{e as re}from"./strategyExecutors-aBpXDD8U.js";import{C as ie,a as ce,b as de,P as oe,c as me,f as xe,p as he,d as ue,e as ge,i as pe}from"./chartjs-BJCDgmXj.js";import"./crypto-CgpT01XT.js";import"./utils-BD673Xbx.js";import"./recharts-BPJZfBEU.js";const A=class A{constructor(){L(this,"historicalDataCache",new Map);L(this,"correlationCache",new Map)}static getInstance(){return A.instance||(A.instance=new A),A.instance}async runAdvancedBacktest(t,a){const l=await this.getMultiTimeframeData({symbols:[t.parameters.pair],timeframes:["1h","4h","1d"],startDate:a.startDate,endDate:a.endDate,includeVolume:!0,adjustForSplits:!0,adjustForDividends:!0}),s=l["1h"]||l["4h"]||l["1d"];if(!s||s.length===0)throw new Error("No historical data available");let n=a.initialBalance;const i=[];let c=n;const o=[];for(let h=50;h<s.length;h++){const w=s.slice(0,h+1),k=re(t,w);if(k.signal){const D=s[h].close,P=this.calculateOptimalPositionSize(n,D,w),C=this.executeAdvancedTrade(k.signal,D,P,n,a,w[w.length-1]);i.push(C),n=C.balance,n>c&&(c=n);const F=(c-n)/c;o.push({timestamp:s[h].timestamp,balance:n,drawdown:F})}}const b=this.calculateBasicMetrics(i,a.initialBalance),m=this.calculateAdvancedMetrics(i,o,a.initialBalance);return{...{strategyId:t.id,startDate:a.startDate,endDate:a.endDate,initialBalance:a.initialBalance,finalBalance:n,totalPnL:n-a.initialBalance,totalTrades:i.length,winningTrades:i.filter(h=>h.pnl>0).length,losingTrades:i.filter(h=>h.pnl<0).length,winRate:i.length>0?i.filter(h=>h.pnl>0).length/i.length*100:0,maxDrawdown:this.calculateMaxDrawdown(i),sharpeRatio:this.calculateSharpeRatio(i),trades:i,metrics:b},advancedMetrics:m}}async runPortfolioBacktest(t){const a=[],l=[];for(const c of t.strategies){const o=await this.runAdvancedBacktest(c,t);a.push(o)}const s=this.calculateStrategyCorrelations(a),n=this.calculatePortfolioReturns(a,t.weights),i=this.calculateDiversificationRatio(a,t.weights,s);return{portfolioBalance:n.reduce((c,o)=>c+o,t.initialBalance),strategyReturns:a,correlationMatrix:s,diversificationRatio:i,portfolioSharpe:this.calculatePortfolioSharpe(n),portfolioVolatility:this.calculatePortfolioVolatility(n),maxPortfolioDrawdown:this.calculatePortfolioMaxDrawdown(n),rebalanceEvents:l}}async runStressTest(t,a,l){const s={};for(const n of l)try{const i=await this.runStressScenario(t,a,n);s[n.name]=i}catch{}return s}async getMultiTimeframeData(t){const a=JSON.stringify(t);if(this.historicalDataCache.has(a))return this.historicalDataCache.get(a);const l={};for(const s of t.timeframes)for(const n of t.symbols)try{const i=await le.getHistoricalData(n,t.startDate,t.endDate);l[s]||(l[s]=[]),l[s]=i}catch{}return this.historicalDataCache.set(a,l),l}calculateOptimalPositionSize(t,a,l){const s=l.slice(-20).map((b,m)=>m===0?0:(b.close-l[l.length-20+m-1].close)/l[l.length-20+m-1].close).slice(1),n=Math.sqrt(s.reduce((b,m)=>b+m*m,0)/s.length),i=.02,c=Math.max(.1,Math.min(2,1/(n*100))),o=i*c;return t*o/a}executeAdvancedTrade(t,a,l,s,n,i){const c=Math.min(.001,l/(i.volume||1e6)*.01),o=Math.abs(i.high-i.low)/i.close*.1,b=n.slippage+c+o,m=t==="BUY"?a*(1+b):a*(1-b),f=m*l,h=f*n.feeRate,w=t==="SELL"?f-h-a*l:0,k=w/(a*l)*100,D=t==="BUY"?s-f-h:s+f-h;return{timestamp:i.timestamp,type:t,price:m,amount:l,total:f,pnl:w,pnlPercent:k,balance:D}}calculateAdvancedMetrics(t,a,l){var H;const s=t.map(g=>g.pnlPercent/100),n=this.calculateDailyReturns(t),i=this.calculateMonthlyReturns(t),c=[...s].sort((g,y)=>g-y),o=s.filter(g=>g<0),b=s.filter(g=>g>0),m=s.reduce((g,y)=>g+y,0)/s.length,f=s.reduce((g,y)=>g+Math.pow(y-m,2),0)/s.length,h=Math.sqrt(f),w=this.calculateSkewness(s,m,h),k=this.calculateKurtosis(s,m,h),D=Math.floor(.05*c.length),P=Math.floor(.01*c.length),C=c[D]||0,F=c[P]||0,T=c.slice(0,D+1).reduce((g,y)=>g+y,0)/(D+1)||0,d=c.slice(0,P+1).reduce((g,y)=>g+y,0)/(P+1)||0,x=s.filter(g=>g<0),r=Math.sqrt(x.reduce((g,y)=>g+y*y,0)/x.length),j=r>0?m/r:0,u=Math.max(...a.map(g=>g.drawdown)),R=u>0?m*252/u:0,S=Math.sqrt(a.reduce((g,y)=>g+y.drawdown*y.drawdown,0)/a.length),p=S>0?m/S:0,N=0,Q=s.filter(g=>g>N).reduce((g,y)=>g+(y-N),0),$=Math.abs(s.filter(g=>g<N).reduce((g,y)=>g+(y-N),0)),G=$>0?Q/$:0;return{dailyReturns:n,monthlyReturns:i,volatility:h,profitFactor:this.calculateProfitFactor(t),recoveryFactor:u>0?(((H=t[t.length-1])==null?void 0:H.balance)-l)/(u*l):0,averageWin:b.reduce((g,y)=>g+y,0)/b.length||0,averageLoss:Math.abs(o.reduce((g,y)=>g+y,0)/o.length)||0,largestWin:Math.max(...s),largestLoss:Math.min(...s),averageHoldingPeriod:this.calculateAverageHoldingPeriod(t),bestMonth:Math.max(...i),worstMonth:Math.min(...i),valueAtRisk95:Math.abs(C)*100,valueAtRisk99:Math.abs(F)*100,conditionalVaR95:Math.abs(T)*100,conditionalVaR99:Math.abs(d)*100,calmarRatio:R,sortinoRatio:j,omegaRatio:G,kappa3:r>0?m/Math.pow(r,3):0,gainToPainRatio:this.calculateGainToPainRatio(s),ulcerIndex:S,martinRatio:p,painIndex:this.calculatePainIndex(a),burkeRatio:this.calculateBurkeRatio(s,a),modifiedSharpe:this.calculateModifiedSharpe(s,w,k),treynorRatio:0,informationRatio:0,modigliani:0,excessReturnOnVaR:C!==0?m/Math.abs(C):0,conditionalSharpe:T!==0?m/Math.abs(T):0,skewness:w,kurtosis:k,tailRatio:F!==0?Math.abs(C/F):0,upnessIndex:this.calculateUpnessIndex(s),upsidePotentialRatio:this.calculateUpsidePotentialRatio(s)}}calculateSkewness(t,a,l){if(l===0)return 0;const s=t.length;return s/((s-1)*(s-2))*t.reduce((n,i)=>n+Math.pow((i-a)/l,3),0)}calculateKurtosis(t,a,l){if(l===0)return 0;const s=t.length,n=s*(s+1)/((s-1)*(s-2)*(s-3)),i=3*(s-1)*(s-1)/((s-2)*(s-3));return n*t.reduce((c,o)=>c+Math.pow((o-a)/l,4),0)-i}calculateGainToPainRatio(t){const a=t.filter(s=>s>0).reduce((s,n)=>s+n,0),l=Math.abs(t.filter(s=>s<0).reduce((s,n)=>s+n,0));return l>0?a/l:0}calculatePainIndex(t){return t.reduce((a,l)=>a+l.drawdown,0)/t.length}calculateBurkeRatio(t,a){const l=t.reduce((n,i)=>n+i,0)/t.length*252,s=Math.sqrt(a.reduce((n,i)=>n+i.drawdown*i.drawdown,0));return s>0?l/s:0}calculateModifiedSharpe(t,a,l){const s=t.reduce((o,b)=>o+b,0)/t.length,n=Math.sqrt(t.reduce((o,b)=>o+Math.pow(b-s,2),0)/t.length);if(n===0)return 0;const i=s/n,c=1+a/6*i-(l-3)/24*i*i;return i*c}calculateUpnessIndex(t){return t.filter(l=>l>0).length/t.length}calculateUpsidePotentialRatio(t){const l=t.filter(n=>n>0).reduce((n,i)=>n+(i-0),0)/t.length,s=Math.sqrt(t.filter(n=>n<0).reduce((n,i)=>n+Math.pow(i-0,2),0)/t.length);return s>0?l/s:0}calculateBasicMetrics(t,a){var c;const l=this.calculateDailyReturns(t),s=this.calculateMonthlyReturns(t),n=t.filter(o=>o.pnl>0),i=t.filter(o=>o.pnl<0);return{dailyReturns:l,monthlyReturns:s,volatility:this.calculateVolatility(l),profitFactor:this.calculateProfitFactor(t),recoveryFactor:this.calculateMaxDrawdown(t)>0?(((c=t[t.length-1])==null?void 0:c.balance)-a)/(this.calculateMaxDrawdown(t)*a):0,averageWin:n.reduce((o,b)=>o+b.pnl,0)/n.length||0,averageLoss:Math.abs(i.reduce((o,b)=>o+b.pnl,0)/i.length)||0,largestWin:t.length>0?Math.max(...t.map(o=>o.pnl)):0,largestLoss:t.length>0?Math.min(...t.map(o=>o.pnl)):0,averageHoldingPeriod:this.calculateAverageHoldingPeriod(t),bestMonth:s.length>0?Math.max(...s):0,worstMonth:s.length>0?Math.min(...s):0}}calculateVolatility(t){if(t.length<2)return 0;const a=t.reduce((l,s)=>l+s,0)/t.length;return Math.sqrt(t.reduce((l,s)=>l+Math.pow(s-a,2),0)/t.length)}calculateDailyReturns(t){const a=new Map;return t.forEach(l=>{const s=new Date(l.timestamp).toISOString().split("T")[0],n=a.get(s)||0;a.set(s,n+l.pnl)}),Array.from(a.values())}calculateMonthlyReturns(t){const a=new Map;return t.forEach(l=>{const s=new Date(l.timestamp),n=`${s.getFullYear()}-${s.getMonth()+1}`,i=a.get(n)||0;a.set(n,i+l.pnl)}),Array.from(a.values())}calculateMaxDrawdown(t){let a=-1/0,l=0;return t.forEach(s=>{s.balance>a&&(a=s.balance);const n=(a-s.balance)/a;l=Math.max(l,n)}),l}calculateSharpeRatio(t){const a=t.map(n=>n.pnlPercent),l=a.reduce((n,i)=>n+i,0)/a.length,s=Math.sqrt(a.reduce((n,i)=>n+Math.pow(i-l,2),0)/a.length);return l/s}calculateProfitFactor(t){const a=t.filter(s=>s.pnl>0).reduce((s,n)=>s+n.pnl,0),l=Math.abs(t.filter(s=>s.pnl<0).reduce((s,n)=>s+n.pnl,0));return a/l}calculateAverageHoldingPeriod(t){let a=0,l=0;for(let s=0;s<t.length-1;s++)t[s].type==="BUY"&&t[s+1].type==="SELL"&&(a+=t[s+1].timestamp-t[s].timestamp,l++);return a/l/(1e3*60*60)}calculateStrategyCorrelations(t){const a=t.length,l=Array(a).fill(null).map(()=>Array(a).fill(0));for(let s=0;s<a;s++)for(let n=0;n<a;n++)if(s===n)l[s][n]=1;else{const i=t[s].trades.map(o=>o.pnlPercent),c=t[n].trades.map(o=>o.pnlPercent);l[s][n]=this.calculateCorrelation(i,c)}return l}calculateCorrelation(t,a){const l=Math.min(t.length,a.length);if(l===0)return 0;const s=t.slice(0,l).reduce((m,f)=>m+f,0)/l,n=a.slice(0,l).reduce((m,f)=>m+f,0)/l;let i=0,c=0,o=0;for(let m=0;m<l;m++){const f=t[m]-s,h=a[m]-n;i+=f*h,c+=f*f,o+=h*h}const b=Math.sqrt(c*o);return b===0?0:i/b}calculatePortfolioReturns(t,a){const l=Math.max(...t.map(n=>n.trades.length)),s=[];for(let n=0;n<l;n++){let i=0;for(let c=0;c<t.length;c++){const o=t[c].trades[n];o&&(i+=o.pnlPercent/100*a[c])}s.push(i)}return s}calculateDiversificationRatio(t,a,l){const s=a.reduce((c,o,b)=>{const m=Math.sqrt(t[b].trades.reduce((f,h)=>f+h.pnlPercent*h.pnlPercent,0)/t[b].trades.length);return c+o*m},0);let n=0;for(let c=0;c<a.length;c++)for(let o=0;o<a.length;o++){const b=Math.sqrt(t[c].trades.reduce((f,h)=>f+h.pnlPercent*h.pnlPercent,0)/t[c].trades.length),m=Math.sqrt(t[o].trades.reduce((f,h)=>f+h.pnlPercent*h.pnlPercent,0)/t[o].trades.length);n+=a[c]*a[o]*l[c][o]*b*m}const i=Math.sqrt(n);return i>0?s/i:0}calculatePortfolioSharpe(t){const a=t.reduce((s,n)=>s+n,0)/t.length,l=Math.sqrt(t.reduce((s,n)=>s+(n-a)*(n-a),0)/t.length);return l>0?a/l:0}calculatePortfolioVolatility(t){const a=t.reduce((l,s)=>l+s,0)/t.length;return Math.sqrt(t.reduce((l,s)=>l+(s-a)*(s-a),0)/t.length)}calculatePortfolioMaxDrawdown(t){let a=-1/0,l=0,s=0;for(const n of t){s+=n,s>a&&(a=s);const i=(a-s)/Math.abs(a);l=Math.max(l,i)}return l}async runStressScenario(t,a,l){return this.runAdvancedBacktest(t,a)}};L(A,"instance");let U=A;const be=U.getInstance(),fe=({onDataLoaded:v})=>{const[t,a]=M.useState({symbols:["BTC_USDT"],timeframes:["1h"],startDate:"2023-01-01",endDate:"2024-01-01",includeVolume:!0,adjustForSplits:!0,adjustForDividends:!1}),[l,s]=M.useState([]),[n,i]=M.useState(!1),[c,o]=M.useState(0),[b,m]=M.useState(null),f=["BTC_USDT","ETH_USDT","BNB_USDT","ADA_USDT","XRP_USDT","SOL_USDT","DOT_USDT","DOGE_USDT","AVAX_USDT","SHIB_USDT"],h=[{value:"1m",label:"1 Minute"},{value:"5m",label:"5 Minutes"},{value:"15m",label:"15 Minutes"},{value:"30m",label:"30 Minutes"},{value:"1h",label:"1 Hour"},{value:"4h",label:"4 Hours"},{value:"1d",label:"1 Day"},{value:"1w",label:"1 Week"}],w=d=>{t.symbols.includes(d)||a(x=>({...x,symbols:[...x.symbols,d]}))},k=d=>{a(x=>({...x,symbols:x.symbols.filter(r=>r!==d)}))},D=d=>{a(x=>({...x,timeframes:x.timeframes.includes(d)?x.timeframes.filter(r=>r!==d):[...x.timeframes,d]}))},P=async()=>{i(!0),m(null),o(0);try{const d=t.symbols.length*t.timeframes.length;let x=0;const r=[];for(const j of t.symbols)for(const u of t.timeframes){await new Promise(N=>setTimeout(N,500));const R=Math.floor(Math.random()*1e3)+500,S=Math.floor(Math.random()*50),p=(R-S)/R*100;r.push({symbol:j,timeframe:u,totalCandles:R,missingCandles:S,completeness:p,gaps:S>0?[{start:"2023-06-15T10:00:00Z",end:"2023-06-15T12:00:00Z",duration:2*60*60*1e3}]:[]}),x++,o(x/d*100)}s(r),v&&v({request:t,quality:r,loadedAt:new Date})}catch(d){m(d instanceof Error?d.message:"Failed to load historical data")}finally{i(!1),o(0)}},C=()=>{const d=JSON.stringify(t,null,2),x="data:application/json;charset=utf-8,"+encodeURIComponent(d),r=`data-request-${new Date().toISOString().split("T")[0]}.json`,j=document.createElement("a");j.setAttribute("href",x),j.setAttribute("download",r),j.click()},F=d=>d>=95?"text-green-600":d>=85?"text-yellow-600":"text-red-600",T=d=>d>=95?e.jsx(J,{className:"w-4 h-4 text-green-600"}):d>=85?e.jsx(I,{className:"w-4 h-4 text-yellow-600"}):e.jsx(I,{className:"w-4 h-4 text-red-600"});return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),"Historical Data Manager"]}),e.jsxs("button",{onClick:C,className:"flex items-center px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),"Export Config"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-medium mb-3",children:"Trading Pairs"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 mb-3",children:f.map(d=>e.jsx("button",{onClick:()=>t.symbols.includes(d)?k(d):w(d),className:`px-3 py-2 text-sm rounded-md border transition-colors ${t.symbols.includes(d)?"bg-blue-50 border-blue-500 text-blue-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:d},d))}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Selected: ",t.symbols.length," pairs"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-md font-medium mb-3",children:"Timeframes"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-3",children:h.map(({value:d,label:x})=>e.jsx("button",{onClick:()=>D(d),className:`px-3 py-2 text-sm rounded-md border transition-colors ${t.timeframes.includes(d)?"bg-blue-50 border-blue-500 text-blue-700":"bg-gray-50 border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:x},d))}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Selected: ",t.timeframes.length," timeframes"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-medium mb-3 flex items-center",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Date Range"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:t.startDate,onChange:d=>a(x=>({...x,startDate:d.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:t.endDate,onChange:d=>a(x=>({...x,endDate:d.target.value})),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-md font-medium mb-3 flex items-center",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Data Options"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.includeVolume,onChange:d=>a(x=>({...x,includeVolume:d.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Include Volume Data"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.adjustForSplits,onChange:d=>a(x=>({...x,adjustForSplits:d.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Adjust for Stock Splits"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:t.adjustForDividends,onChange:d=>a(x=>({...x,adjustForDividends:d.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Adjust for Dividends"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("button",{onClick:P,disabled:n||t.symbols.length===0||t.timeframes.length===0,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Loading... ",c.toFixed(0),"%"]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Load Historical Data"]})}),n&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})})})]}),b&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"w-4 h-4 text-red-600 mr-2"}),e.jsx("span",{className:"text-sm text-red-700",children:b})]})}),l.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium mb-3",children:"Data Quality Report"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Symbol"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timeframe"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Candles"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Missing"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completeness"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((d,x)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:d.symbol}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:d.timeframe}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:d.totalCandles.toLocaleString()}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:d.missingCandles}),e.jsxs("td",{className:`px-4 py-3 whitespace-nowrap text-sm font-medium ${F(d.completeness)}`,children:[d.completeness.toFixed(1),"%"]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex items-center",children:[T(d.completeness),e.jsx("span",{className:`ml-2 ${F(d.completeness)}`,children:d.completeness>=95?"Excellent":d.completeness>=85?"Good":"Poor"})]})})]},x))})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Datasets"}),e.jsx("p",{className:"text-lg font-bold",children:l.length})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Average Completeness"}),e.jsxs("p",{className:"text-lg font-bold",children:[l.length>0?(l.reduce((d,x)=>d+x.completeness,0)/l.length).toFixed(1):0,"%"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Candles"}),e.jsx("p",{className:"text-lg font-bold",children:l.reduce((d,x)=>d+x.totalCandles,0).toLocaleString()})]})]})]})]})};ie.register(ce,de,oe,me,xe,he,ue,ge,pe);const Se=()=>{const{strategies:v}=ne(),[t,a]=M.useState(null),[l,s]=M.useState({startDate:"2023-01-01",endDate:"2024-01-01",initialBalance:1e4,feeRate:.001,slippage:.001,useHistoricalData:!0}),[n,i]=M.useState([]),[c,o]=M.useState(null),[b,m]=M.useState(!1),[f,h]=M.useState("setup"),[w,k]=M.useState(!1);M.useEffect(()=>{if(v.length>0&&n.length===0){const r={id:"1",name:"Sample Backtest",strategy:v[0],options:l,result:null,advancedMetrics:null,createdAt:new Date,status:"pending"};i([r])}},[v,l,n.length]);const D=async()=>{if(!t)return;m(!0);const r=Date.now().toString(),j={id:r,name:`Backtest ${t.name} ${new Date().toLocaleDateString()}`,strategy:t,options:l,result:null,advancedMetrics:null,createdAt:new Date,status:"running"};i(u=>[j,...u]),o(j);try{const u=await be.runAdvancedBacktest(t,l),R=u.advancedMetrics,S={...j,result:{...u,metrics:{...u.metrics,netProfit:u.totalPnL,grossProfit:u.trades.filter(p=>p.pnl>0).reduce((p,N)=>p+N.pnl,0),grossLoss:Math.abs(u.trades.filter(p=>p.pnl<0).reduce((p,N)=>p+N.pnl,0)),maxConsecutiveWins:0,maxConsecutiveLosses:0,averageTrade:u.trades.reduce((p,N)=>p+N.pnl,0)/u.trades.length||0,averageProfit:u.trades.filter(p=>p.pnl>0).reduce((p,N)=>p+N.pnl,0)/u.trades.filter(p=>p.pnl>0).length||0,averageLoss:u.trades.filter(p=>p.pnl<0).reduce((p,N)=>p+N.pnl,0)/u.trades.filter(p=>p.pnl<0).length||0,largestProfit:Math.max(...u.trades.map(p=>p.pnl)),largestLoss:Math.min(...u.trades.map(p=>p.pnl)),annualizedReturn:(u.finalBalance/u.initialBalance-1)*365/365}},advancedMetrics:R,status:"completed"};i(p=>p.map(N=>N.id===r?S:N)),o(S),h("results")}catch(u){console.error("Backtest failed:",u);const R={...j,status:"failed"};i(S=>S.map(p=>p.id===r?R:p))}finally{m(!1)}},P=async r=>{c!=null&&c.result&&console.log(`Exporting results in ${r} format`)},C=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"Backtest Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Strategy"}),e.jsxs("select",{value:(t==null?void 0:t.id)||"",onChange:r=>{const j=v.find(u=>u.id===r.target.value);a(j||null)},className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select a strategy"}),v.map(r=>e.jsxs("option",{value:r.id,children:[r.name," (",r.type,")"]},r.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Balance (USD)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"number",min:"100",max:"1000000",step:"100",value:l.initialBalance,onChange:r=>s({...l,initialBalance:parseFloat(r.target.value)||1e4}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter amount (min: $100)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[1e3,5e3,1e4,25e3,5e4,1e5].map(r=>e.jsxs("button",{type:"button",onClick:()=>s({...l,initialBalance:r}),className:`px-3 py-1 text-xs rounded-md border transition-colors ${l.initialBalance===r?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"}`,children:["$",r.toLocaleString()]},r))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Choose a starting balance for your backtest simulation"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),e.jsx("input",{type:"date",value:l.startDate,onChange:r=>s({...l,startDate:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",value:l.endDate,onChange:r=>s({...l,endDate:r.target.value}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fee Rate (%)"}),e.jsx("input",{type:"number",step:"0.001",value:l.feeRate*100,onChange:r=>s({...l,feeRate:parseFloat(r.target.value)/100}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Slippage (%)"}),e.jsx("input",{type:"number",step:"0.001",value:l.slippage*100,onChange:r=>s({...l,slippage:parseFloat(r.target.value)/100}),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsxs("button",{onClick:D,disabled:!t||b,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),b?"Running Backtest...":"Run Backtest"]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Recent Sessions"}),e.jsx("div",{className:"space-y-3",children:n.slice(0,5).map(r=>e.jsx("div",{onClick:()=>o(r),className:`p-4 border rounded-md cursor-pointer transition-colors ${(c==null?void 0:c.id)===r.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.strategy.name," â€¢ ",r.createdAt.toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.status==="completed"?"bg-green-100 text-green-800":r.status==="running"?"bg-yellow-100 text-yellow-800":r.status==="failed"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:r.status}),r.result&&e.jsxs("span",{className:`text-sm font-medium ${r.result.totalPnL>0?"text-green-600":"text-red-600"}`,children:[r.result.totalPnL>0?"+":"","$",r.result.totalPnL.toFixed(2)]})]})]})},r.id))})]})]}),F=()=>{if(!(c!=null&&c.result))return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:[e.jsx(E,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Results Available"}),e.jsx("p",{className:"text-gray-600",children:"Run a backtest to see results here."})]});const r=c.result,j=c.advancedMetrics;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"w-8 h-8 text-green-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Return"}),e.jsxs("p",{className:`text-xl font-bold ${r.totalPnL>0?"text-green-600":"text-red-600"}`,children:[((r.finalBalance-r.initialBalance)/r.initialBalance*100).toFixed(2),"%"]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-8 h-8 text-blue-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sharpe Ratio"}),e.jsx("p",{className:"text-xl font-bold",children:r.sharpeRatio.toFixed(2)})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"w-8 h-8 text-red-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Max Drawdown"}),e.jsxs("p",{className:"text-xl font-bold text-red-600",children:[r.maxDrawdown.toFixed(2),"%"]})]})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"w-8 h-8 text-purple-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Win Rate"}),e.jsxs("p",{className:"text-xl font-bold",children:[r.winRate.toFixed(1),"%"]})]})]})})]}),j&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Advanced Risk Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"VaR (95%)"}),e.jsxs("p",{className:"text-lg font-bold",children:[j.valueAtRisk95.toFixed(2),"%"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"CVaR (95%)"}),e.jsxs("p",{className:"text-lg font-bold",children:[j.conditionalVaR95.toFixed(2),"%"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Calmar Ratio"}),e.jsx("p",{className:"text-lg font-bold",children:j.calmarRatio.toFixed(2)})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sortino Ratio"}),e.jsx("p",{className:"text-lg font-bold",children:j.sortinoRatio.toFixed(2)})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Omega Ratio"}),e.jsx("p",{className:"text-lg font-bold",children:j.omegaRatio.toFixed(2)})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Expectancy"}),e.jsxs("p",{className:"text-lg font-bold",children:["$",j.expectancy.toFixed(2)]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ulcer Index"}),e.jsx("p",{className:"text-lg font-bold",children:j.ulcerIndex.toFixed(2)})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Recovery Factor"}),e.jsx("p",{className:"text-lg font-bold",children:j.recoveryFactor.toFixed(2)})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Equity Curve"}),e.jsx("div",{className:"h-64",children:e.jsx(q,{data:{labels:r.trades.map((u,R)=>R+1),datasets:[{label:"Equity",data:r.trades.map(u=>u.balance),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!1}}}})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Trade Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"P&L Distribution"}),e.jsx("div",{className:"h-48",children:e.jsx(ae,{data:{labels:["Winning Trades","Losing Trades"],datasets:[{label:"Count",data:[r.winningTrades,r.losingTrades],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)"]}]},options:{responsive:!0,maintainAspectRatio:!1}})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Monthly Returns"}),e.jsx("div",{className:"h-48",children:e.jsx(q,{data:{labels:r.metrics.monthlyReturns.map((u,R)=>`Month ${R+1}`),datasets:[{label:"Monthly Return",data:r.metrics.monthlyReturns,borderColor:"rgb(168, 85, 247)",backgroundColor:"rgba(168, 85, 247, 0.1)",tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1}})})]})]})]})]})},T=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(fe,{onDataLoaded:r=>{k(!0),console.log("Historical data loaded:",r)}}),w&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Historical data successfully loaded and ready for backtesting"})]})})]}),d=()=>{if(!(c!=null&&c.advancedMetrics))return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow text-center",children:[e.jsx(W,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Advanced Analysis"}),e.jsx("p",{className:"text-gray-600",children:"Run a backtest to see advanced analysis and risk metrics."})]});const r=c.advancedMetrics;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Risk Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Value at Risk"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-red-600",children:"VaR (95%)"}),e.jsxs("span",{className:"font-bold text-red-800",children:[r.valueAtRisk95.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-red-600",children:"VaR (99%)"}),e.jsxs("span",{className:"font-bold text-red-800",children:[r.valueAtRisk99.toFixed(2),"%"]})]})]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-orange-800 mb-2",children:"Conditional VaR"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-orange-600",children:"CVaR (95%)"}),e.jsxs("span",{className:"font-bold text-orange-800",children:[r.conditionalVaR95.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-orange-600",children:"CVaR (99%)"}),e.jsxs("span",{className:"font-bold text-orange-800",children:[r.conditionalVaR99.toFixed(2),"%"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Advanced Ratios"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-blue-600",children:"Calmar Ratio"}),e.jsx("span",{className:"font-bold text-blue-800",children:r.calmarRatio.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-blue-600",children:"Sortino Ratio"}),e.jsx("span",{className:"font-bold text-blue-800",children:r.sortinoRatio.toFixed(2)})]})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Downside Risk Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ulcer Index"}),e.jsx("p",{className:"text-lg font-bold",children:r.ulcerIndex.toFixed(2)})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pain Index"}),e.jsx("p",{className:"text-lg font-bold",children:r.painIndex.toFixed(2)})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Martin Ratio"}),e.jsx("p",{className:"text-lg font-bold",children:r.martinRatio.toFixed(2)})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Burke Ratio"}),e.jsx("p",{className:"text-lg font-bold",children:r.burkeRatio.toFixed(2)})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Return Distribution Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Statistical Measures"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Skewness"}),e.jsx("span",{className:"font-medium",children:r.skewness.toFixed(3)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Kurtosis"}),e.jsx("span",{className:"font-medium",children:r.kurtosis.toFixed(3)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tail Ratio"}),e.jsx("span",{className:"font-medium",children:r.tailRatio.toFixed(3)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Upside Potential"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Upness Index"}),e.jsxs("span",{className:"font-medium",children:[(r.upnessIndex*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Upside Potential Ratio"}),e.jsx("span",{className:"font-medium",children:r.upsidePotentialRatio.toFixed(3)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Gain to Pain Ratio"}),e.jsx("span",{className:"font-medium",children:r.gainToPainRatio.toFixed(3)})]})]})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Performance Attribution"}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[e.jsx(W,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-blue-700 font-medium",children:"Factor Analysis"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Factor decomposition and performance attribution analysis coming in next update"})]})]})]})},x=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Export Results"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>P("csv"),className:"flex items-center justify-center p-4 border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(B,{className:"w-5 h-5 mr-2"}),"Export CSV"]}),e.jsxs("button",{onClick:()=>P("excel"),className:"flex items-center justify-center p-4 border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(B,{className:"w-5 h-5 mr-2"}),"Export Excel"]}),e.jsxs("button",{onClick:()=>P("pdf"),className:"flex items-center justify-center p-4 border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsx(B,{className:"w-5 h-5 mr-2"}),"Export PDF Report"]})]})]})});return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-8 h-8 mr-3 text-blue-600"}),"Advanced Backtesting Engine"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Comprehensive strategy testing with advanced risk metrics and performance analysis"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"setup",label:"Setup",icon:O},{id:"data",label:"Historical Data",icon:V},{id:"results",label:"Results",icon:E},{id:"analysis",label:"Analysis",icon:_},{id:"reports",label:"Reports",icon:B}].map(({id:r,label:j,icon:u})=>e.jsxs("button",{onClick:()=>h(r),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center ${f===r?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),j]},r))})})}),f==="setup"&&C(),f==="data"&&T(),f==="results"&&F(),f==="analysis"&&d(),f==="reports"&&x()]})};export{Se as default};
//# sourceMappingURL=Backtesting-DCVyi-Ve.js.map
