const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Dashboard-B3KufttE.js","./vendor-52n1XO7X.js","./chartjs-BJCDgmXj.js","./crypto-CgpT01XT.js","./PriceChart-C8GqRWFz.js","./RecentTrades-D8HiDYdf.js","./MockModeNotice-CLq-RO69.js","./utils-BD673Xbx.js","./recharts-BPJZfBEU.js","./LiveTradingDashboard-D922YQXM.js","./ui-yGZq-iow.js","./Strategies-D7j36S5d.js","./strategyExecutors-aBpXDD8U.js","./Backtesting-DCVyi-Ve.js","./Account-CdD4l8Gt.js","./TransactionHistory-ZXUL7fnR.js","./TradeHistory-C9itp1K4.js","./MarketAnalysis-EUtPDXJ9.js","./Performance-DPalqm9O.js","./Settings-Dq0a8jsy.js","./Chat-8W-4CWKU.js","./ExtensionDownload-BXG43aZv.js","./NotFound-D9Dwe4IF.js"])))=>i.map(i=>d[i]);
var It=Object.defineProperty;var jt=(t,e,n)=>e in t?It(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var S=(t,e,n)=>jt(t,typeof e!="symbol"?e+"":e,n);import{r as l,j as o,u as We,Z as ge,X as ue,L as Ke,b as lt,U as $e,C as dt,c as ut,M as ht,d as mt,S as He,e as ft,B as Nt,f as Mt,R as te,g as Rt,h as Ot,T as Lt,i as Ut,H as zt,k as Ve,l as pt,m as gt,W as Ft,n as Bt,o as Wt,D as Kt,p as xt,I as $t,q as Ht,s as Vt,t as Gt,v as I,w as Jt}from"./vendor-52n1XO7X.js";import{C as Ie}from"./crypto-CgpT01XT.js";import{a as pe,l as St}from"./utils-BD673Xbx.js";import{c as me}from"./recharts-BPJZfBEU.js";import"./chartjs-BJCDgmXj.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const qt="modulepreload",Xt=function(t,e){return new URL(t,e).href},Xe={},R=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){let a=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const c=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),m=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=a(n.map(h=>{if(h=Xt(h,s),h in Xe)return;Xe[h]=!0;const d=h.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!s)for(let g=c.length-1;g>=0;g--){const w=c[g];if(w.href===h&&(!d||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${f}`))return;const E=document.createElement("link");if(E.rel=d?"stylesheet":qt,d||(E.as="script"),E.crossOrigin="",E.href=h,m&&E.setAttribute("nonce",m),document.head.appendChild(E),d)return new Promise((g,w)=>{E.addEventListener("load",g),E.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&r(c.reason);return e().catch(r)})},Yt={API_KEY:"poloniex_api_key",API_SECRET:"poloniex_api_secret",IS_LIVE_TRADING:"poloniex_is_live_trading",NOTIFICATIONS:"poloniex_notifications",DARK_MODE:"poloniex_dark_mode",DEFAULT_PAIR:"poloniex_default_pair",EMAIL_NOTIFICATIONS:"poloniex_email_notifications",TRADE_NOTIFICATIONS:"poloniex_trade_notifications",PRICE_ALERTS:"poloniex_price_alerts",CHAT_NOTIFICATIONS:"poloniex_chat_notifications",SHOW_EXTENSION:"poloniex_show_extension"},P=(t,e)=>{try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch(n){return console.error(`Error getting item from storage: ${t}`,n),e}},Qt=(t,e)=>{try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error(`Error setting item in storage: ${t}`,n)}},Zt=()=>{try{const t="__storage_test__";return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch{return!1}},Ye={apiKey:"",apiSecret:"",isLiveTrading:!1,darkMode:!1,defaultPair:"BTC-USDT",emailNotifications:!0,tradeNotifications:!0,priceAlerts:!1,chatNotifications:!0,showExtension:!0,chartType:"candle",timeframe:"5m",leverage:1,riskPerTrade:2,stopLossPercent:2,takeProfitPercent:4,trailingStopPercent:1,autoTradingEnabled:!1},A={...Yt,CHART_TYPE:"poloniex_chart_type",TIMEFRAME:"poloniex_timeframe",LEVERAGE:"poloniex_leverage",RISK_PER_TRADE:"poloniex_risk_per_trade",STOP_LOSS_PERCENT:"poloniex_stop_loss_percent",TAKE_PROFIT_PERCENT:"poloniex_take_profit_percent",TRAILING_STOP_PERCENT:"poloniex_trailing_stop_percent",AUTO_TRADING_ENABLED:"poloniex_auto_trading_enabled"},bt=l.createContext(void 0),en=({children:t})=>{const e=Zt(),n=()=>e?{apiKey:P(A.API_KEY,""),apiSecret:P(A.API_SECRET,""),isLiveTrading:P(A.IS_LIVE_TRADING,!1),darkMode:P(A.DARK_MODE,!1),defaultPair:P(A.DEFAULT_PAIR,"BTC-USDT"),emailNotifications:P(A.EMAIL_NOTIFICATIONS,!0),tradeNotifications:P(A.TRADE_NOTIFICATIONS,!0),priceAlerts:P(A.PRICE_ALERTS,!1),chatNotifications:P(A.CHAT_NOTIFICATIONS,!0),showExtension:P(A.SHOW_EXTENSION,!0),chartType:P(A.CHART_TYPE,"candle"),timeframe:P(A.TIMEFRAME,"5m"),leverage:P(A.LEVERAGE,1),riskPerTrade:P(A.RISK_PER_TRADE,2),stopLossPercent:P(A.STOP_LOSS_PERCENT,2),takeProfitPercent:P(A.TAKE_PROFIT_PERCENT,4),trailingStopPercent:P(A.TRAILING_STOP_PERCENT,1),autoTradingEnabled:P(A.AUTO_TRADING_ENABLED,!1)}:{...Ye,apiKey:"",apiSecret:""},[s,i]=l.useState(n),[r,a]=l.useState(!1);l.useEffect(()=>{a(!!(s.apiKey&&s.apiSecret))},[s.apiKey,s.apiSecret]),l.useEffect(()=>{s.darkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[s.darkMode]);const c=d=>{i(f=>{const p={...f,...d};return d.isLiveTrading!==void 0&&d.isLiveTrading&&(!p.apiKey||!p.apiSecret)&&(console.log("Cannot enable live trading without API credentials"),p.isLiveTrading=!1),e&&Object.entries(d).forEach(([E,g])=>{const w=A[E.toUpperCase()]||`poloniex_${E}`;Qt(w,g)}),p})},u=()=>{i(Ye),e&&Object.values(A).forEach(d=>{localStorage.removeItem(d)})},m=()=>{try{const d={...s};return["apiKey","apiSecret"].forEach(p=>{p in d&&delete d[p]}),JSON.stringify(d)}catch(d){return console.error("Error exporting settings:",d),""}},h=d=>{try{const f=JSON.parse(d);if(typeof f!="object"||f===null)throw new Error("Invalid settings format");return["apiKey","apiSecret"].forEach(E=>{E in f&&delete f[E]}),c(f),!0}catch(f){return console.error("Error importing settings:",f),!1}};return o.jsx(bt.Provider,{value:{...s,updateSettings:c,resetSettings:u,hasStoredCredentials:r,exportSettings:m,importSettings:h,mockMode:!s.isLiveTrading},children:t})},Ge=()=>{const t=l.useContext(bt);if(t===void 0)throw new Error("useSettings must be used within a SettingsProvider");return t},Et=()=>{const[t,e]=l.useState(!1),[n,s]=l.useState("desktop"),i=l.useCallback(()=>{const d=window.innerWidth;return d<768?"mobile":d<1024?"tablet":"desktop"},[]),r=l.useCallback(()=>{const d=i();s(d),d!=="mobile"&&t&&e(!1)},[i,t]);l.useEffect(()=>(r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[r]);const a=l.useCallback(()=>{e(d=>!d)},[]),c=l.useCallback(()=>{e(!1)},[]);return l.useEffect(()=>{if(!t)return;const d=p=>{p.key==="Escape"&&c()},f=p=>{const E=p.target,g=document.getElementById("mobile-navigation"),w=document.getElementById("mobile-menu-toggle");g&&!g.contains(E)&&!(w!=null&&w.contains(E))&&c()};return document.addEventListener("keydown",d),document.addEventListener("click",f),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",d),document.removeEventListener("click",f),document.body.style.overflow=""}},[t,c]),{isMobileMenuOpen:t,toggleMobileMenu:a,closeMobileMenu:c,isMobile:n==="mobile",isTablet:n==="tablet",isDesktop:n==="desktop",screenSize:n}},tn=({isOpen:t,onClose:e})=>{const n=We(),s=[{path:"/",label:"Dashboard",icon:o.jsx(lt,{size:20})},{path:"/strategies",label:"Trading Strategies",icon:o.jsx(ge,{size:20})},{path:"/account",label:"Account",icon:o.jsx($e,{size:20})},{path:"/charts",label:"Market Analysis",icon:o.jsx(dt,{size:20})},{path:"/performance",label:"Performance",icon:o.jsx(ut,{size:20})},{path:"/chat",label:"Community Chat",icon:o.jsx(ht,{size:20})},{path:"/extension",label:"Chrome Extension",icon:o.jsx(mt,{size:20})},{path:"/settings",label:"Settings",icon:o.jsx(He,{size:20})}];return t?o.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",role:"dialog","aria-modal":"true","aria-label":"Mobile navigation menu",children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:e,"aria-hidden":"true"}),o.jsxs("nav",{id:"mobile-navigation",className:"relative flex flex-col w-full max-w-xs bg-neutral-800 text-white h-full shadow-xl","aria-label":"Mobile navigation",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-neutral-700",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(ge,{className:"h-8 w-8 text-blue-400 mr-2","aria-hidden":"true"}),o.jsx("h2",{className:"text-xl font-bold",children:"TradingBot"})]}),o.jsx("button",{onClick:e,className:"p-2 rounded-md text-neutral-400 hover:text-white hover:bg-neutral-700 transition-colors","aria-label":"Close navigation menu",children:o.jsx(ue,{size:20,"aria-hidden":"true"})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:o.jsx("ul",{className:"p-4 space-y-2",role:"list",children:s.map(i=>o.jsx("li",{children:o.jsxs(Ke,{to:i.path,onClick:e,className:`
                    flex items-center p-3 rounded-md transition-all duration-200 touch-target
                    ${n.pathname===i.path?"bg-blue-700 text-white":"text-neutral-300 hover:bg-neutral-700 hover:text-white"}
                  `,"aria-label":i.label,"aria-current":n.pathname===i.path?"page":void 0,children:[o.jsx("span",{className:"flex-shrink-0 mr-3","aria-hidden":"true",children:i.icon}),o.jsx("span",{className:"font-medium",children:i.label})]})},i.path))})}),o.jsx("div",{className:"p-4 border-t border-neutral-700",children:o.jsxs("div",{className:"text-sm text-neutral-400",children:[o.jsx("p",{children:"Poloniex Trading Platform"}),o.jsx("p",{className:"text-xs mt-1",children:"Version 1.0.0"})]})})]})]}):null},nn=()=>{const[t]=l.useState(3),{hasStoredCredentials:e}=Ge(),{isMobileMenuOpen:n,toggleMobileMenu:s,closeMobileMenu:i,isMobile:r}=Et();return o.jsxs(o.Fragment,{children:[o.jsxs("nav",{className:"bg-white border-b border-neutral-200 px-4 py-2.5 flex justify-between items-center",role:"banner","aria-label":"Main navigation",children:[o.jsxs("div",{className:"flex items-center",children:[r&&o.jsx("button",{id:"mobile-menu-toggle",onClick:s,className:"mr-3 p-2 rounded-md text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 transition-colors touch-target","aria-label":"Toggle mobile menu","aria-expanded":n,"aria-controls":"mobile-navigation",children:o.jsx(ft,{className:"h-6 w-6","aria-hidden":"true"})}),o.jsxs("h1",{className:"text-lg sm:text-xl font-bold text-blue-600",children:[o.jsx("span",{className:"hidden sm:inline",children:"Poloniex Futures"}),o.jsx("span",{className:"sm:hidden",children:"Poloniex"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[o.jsx("div",{className:"relative",children:o.jsxs("button",{className:"p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-md transition-colors touch-target","aria-label":`Notifications${t>0?` (${t} new)`:" (none)"}`,children:[o.jsx(Nt,{className:"h-5 w-5 sm:h-6 sm:w-6","aria-hidden":"true"}),t>0&&o.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white bg-red-600 rounded-full min-w-[1.25rem]","aria-hidden":"true",children:t>99?"99+":t})]})}),o.jsx("div",{className:"flex items-center",children:o.jsxs(Ke,{to:"/account",className:"flex items-center p-2 text-neutral-500 hover:text-neutral-700 hover:bg-neutral-100 rounded-md transition-colors touch-target","aria-label":e?"Go to My Account":"Connect Account",children:[o.jsx($e,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-1 sm:mr-2","aria-hidden":"true"}),o.jsx("span",{className:"hidden md:inline-block text-sm font-medium",children:e?"My Account":"Connect Account"}),o.jsx("span",{className:"md:hidden text-sm font-medium",children:e?"Account":"Connect"})]})})]})]}),o.jsx(tn,{isOpen:n,onClose:i})]})};var ae=(t=>(t.MOVING_AVERAGE_CROSSOVER="MovingAverageCrossover",t.MA_CROSSOVER="MovingAverageCrossover",t.RSI="RSI",t.MACD="MACD",t.BOLLINGER_BANDS="BollingerBands",t.BREAKOUT="Breakout",t.CUSTOM="Custom",t))(ae||{});const Es=[{id:"tx_1",type:"DEPOSIT",description:"USDT Deposit",amount:5e3,status:"COMPLETED",timestamp:Date.now()-24*60*60*1e3},{id:"tx_2",type:"TRADE",description:"BTC-USDT Buy",amount:2500,status:"COMPLETED",timestamp:Date.now()-12*60*60*1e3},{id:"tx_3",type:"WITHDRAWAL",description:"USDT Withdrawal",amount:1e3,status:"PENDING",timestamp:Date.now()-6*60*60*1e3},{id:"tx_4",type:"TRADE",description:"ETH-USDT Sell",amount:1500,status:"COMPLETED",timestamp:Date.now()-3*60*60*1e3},{id:"tx_5",type:"DEPOSIT",description:"BTC Deposit",amount:3e3,status:"COMPLETED",timestamp:Date.now()-1*60*60*1e3}],W=Array.from({length:100},(t,e)=>{const n=5e4+Math.random()*5e3,s=n*.01,i=Date.now()-(99-e)*60*1e3,r=n+(Math.random()-.5)*s,a=r+Math.random()*s,c=r-Math.random()*s,u=c+Math.random()*(a-c);return{pair:"BTC-USDT",timestamp:i,open:r,high:a,low:c,close:u,volume:100+Math.random()*900}});ae.MA_CROSSOVER,new Date().toISOString(),new Date().toISOString(),ae.RSI,new Date(Date.now()-7*24*60*60*1e3).toISOString(),new Date(Date.now()-7*24*60*60*1e3).toISOString(),ae.BREAKOUT,new Date(Date.now()-14*24*60*60*1e3).toISOString(),new Date(Date.now()-14*24*60*60*1e3).toISOString();const K=[{id:"mock-trade-1",pair:"BTC-USDT",timestamp:Date.now()-3*60*60*1e3,type:"BUY",price:51234.56,amount:.05,total:2561.73,strategyId:"1",status:"COMPLETED"},{id:"mock-trade-2",pair:"BTC-USDT",timestamp:Date.now()-2*60*60*1e3,type:"SELL",price:51934.12,amount:.05,total:2596.71,strategyId:"1",status:"COMPLETED"},{id:"mock-trade-3",pair:"ETH-USDT",timestamp:Date.now()-1*60*60*1e3,type:"BUY",price:3245.78,amount:.25,total:811.45,strategyId:"2",status:"COMPLETED"},{id:"mock-trade-4",pair:"BTC-USDT",timestamp:Date.now()-30*60*1e3,type:"BUY",price:52100.45,amount:.03,total:1563.01,strategyId:"3",status:"PENDING"}];function yt(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var r;const a=u=>u===null?null:JSON.parse(u,void 0),c=(r=n.getItem(i))!=null?r:null;return c instanceof Promise?c.then(a):a(c)},setItem:(i,r)=>n.setItem(i,JSON.stringify(r,void 0)),removeItem:i=>n.removeItem(i)}}const je=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(s){return je(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return je(s)(n)}}}},sn=(t,e)=>(n,s,i)=>{let r={storage:yt(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},a=!1;const c=new Set,u=new Set;let m=r.storage;if(!m)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${r.name}', the given storage is currently unavailable.`),n(...g)},s,i);const h=()=>{const g=r.partialize({...s()});return m.setItem(r.name,{state:g,version:r.version})},d=i.setState;i.setState=(g,w)=>{d(g,w),h()};const f=t((...g)=>{n(...g),h()},s,i);i.getInitialState=()=>f;let p;const E=()=>{var g,w;if(!m)return;a=!1,c.forEach(T=>{var v;return T((v=s())!=null?v:f)});const k=((w=r.onRehydrateStorage)==null?void 0:w.call(r,(g=s())!=null?g:f))||void 0;return je(m.getItem.bind(m))(r.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==r.version){if(r.migrate){const v=r.migrate(T.state,T.version);return v instanceof Promise?v.then(j=>[!0,j]):[!0,v]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var v;const[j,z]=T;if(p=r.merge(z,(v=s())!=null?v:f),n(p,!0),j)return h()}).then(()=>{k==null||k(p,void 0),p=s(),a=!0,u.forEach(T=>T(p))}).catch(T=>{k==null||k(void 0,T)})};return i.persist={setOptions:g=>{r={...r,...g},g.storage&&(m=g.storage)},clearStorage:()=>{m==null||m.removeItem(r.name)},getOptions:()=>r,rehydrate:()=>E(),hasHydrated:()=>a,onHydrate:g=>(c.add(g),()=>{c.delete(g)}),onFinishHydration:g=>(u.add(g),()=>{u.delete(g)})},r.skipHydration||E(),p||f},on=sn;var wt=Symbol.for("immer-nothing"),Qe=Symbol.for("immer-draftable"),N=Symbol.for("immer-state");function L(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ne=Object.getPrototypeOf;function se(t){return!!t&&!!t[N]}function q(t){var e;return t?Tt(t)||Array.isArray(t)||!!t[Qe]||!!((e=t.constructor)!=null&&e[Qe])||Te(t)||ve(t):!1}var rn=Object.prototype.constructor.toString();function Tt(t){if(!t||typeof t!="object")return!1;const e=ne(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===rn}function xe(t,e){we(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,s)=>e(s,n,t))}function we(t){const e=t[N];return e?e.type_:Array.isArray(t)?1:Te(t)?2:ve(t)?3:0}function Ne(t,e){return we(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function vt(t,e,n){const s=we(t);s===2?t.set(e,n):s===3?t.add(n):t[e]=n}function an(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Te(t){return t instanceof Map}function ve(t){return t instanceof Set}function $(t){return t.copy_||t.base_}function Me(t,e){if(Te(t))return new Map(t);if(ve(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Tt(t);if(e===!0||e==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(t);delete s[N];let i=Reflect.ownKeys(s);for(let r=0;r<i.length;r++){const a=i[r],c=s[a];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(s[a]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[a]})}return Object.create(ne(t),s)}else{const s=ne(t);if(s!==null&&n)return{...t};const i=Object.create(s);return Object.assign(i,t)}}function Je(t,e=!1){return _e(t)||se(t)||!q(t)||(we(t)>1&&(t.set=t.add=t.clear=t.delete=cn),Object.freeze(t),e&&Object.entries(t).forEach(([n,s])=>Je(s,!0))),t}function cn(){L(2)}function _e(t){return Object.isFrozen(t)}var ln={};function X(t){const e=ln[t];return e||L(0,t),e}var ce;function _t(){return ce}function dn(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ze(t,e){e&&(X("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Re(t){Oe(t),t.drafts_.forEach(un),t.drafts_=null}function Oe(t){t===ce&&(ce=t.parent_)}function et(t){return ce=dn(ce,t)}function un(t){const e=t[N];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function tt(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[N].modified_&&(Re(e),L(4)),q(t)&&(t=Se(e,t),e.parent_||be(e,t)),e.patches_&&X("Patches").generateReplacementPatches_(n[N].base_,t,e.patches_,e.inversePatches_)):t=Se(e,n,[]),Re(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==wt?t:void 0}function Se(t,e,n){if(_e(e))return e;const s=e[N];if(!s)return xe(e,(i,r)=>nt(t,s,e,i,r,n)),e;if(s.scope_!==t)return e;if(!s.modified_)return be(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let r=i,a=!1;s.type_===3&&(r=new Set(i),i.clear(),a=!0),xe(r,(c,u)=>nt(t,s,i,c,u,n,a)),be(t,i,!1),n&&t.patches_&&X("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function nt(t,e,n,s,i,r,a){if(se(i)){const c=r&&e&&e.type_!==3&&!Ne(e.assigned_,s)?r.concat(s):void 0,u=Se(t,i,c);if(vt(n,s,u),se(u))t.canAutoFreeze_=!1;else return}else a&&n.add(i);if(q(i)&&!_e(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Se(t,i),(!e||!e.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&be(t,i)}}function be(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Je(e,n)}function hn(t,e){const n=Array.isArray(t),s={type_:n?1:0,scope_:e?e.scope_:_t(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=s,r=qe;n&&(i=[s],r=le);const{revoke:a,proxy:c}=Proxy.revocable(i,r);return s.draft_=c,s.revoke_=a,c}var qe={get(t,e){if(e===N)return t;const n=$(t);if(!Ne(n,e))return mn(t,n,e);const s=n[e];return t.finalized_||!q(s)?s:s===ke(t.base_,e)?(De(t),t.copy_[e]=Ue(s,t)):s},has(t,e){return e in $(t)},ownKeys(t){return Reflect.ownKeys($(t))},set(t,e,n){const s=Ct($(t),e);if(s!=null&&s.set)return s.set.call(t.draft_,n),!0;if(!t.modified_){const i=ke($(t),e),r=i==null?void 0:i[N];if(r&&r.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(an(n,i)&&(n!==void 0||Ne(t.base_,e)))return!0;De(t),Le(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return ke(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,De(t),Le(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=$(t),s=Reflect.getOwnPropertyDescriptor(n,e);return s&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:s.enumerable,value:n[e]}},defineProperty(){L(11)},getPrototypeOf(t){return ne(t.base_)},setPrototypeOf(){L(12)}},le={};xe(qe,(t,e)=>{le[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});le.deleteProperty=function(t,e){return le.set.call(this,t,e,void 0)};le.set=function(t,e,n){return qe.set.call(this,t[0],e,n,t[0])};function ke(t,e){const n=t[N];return(n?$(n):t)[e]}function mn(t,e,n){var i;const s=Ct(e,n);return s?"value"in s?s.value:(i=s.get)==null?void 0:i.call(t.draft_):void 0}function Ct(t,e){if(!(e in t))return;let n=ne(t);for(;n;){const s=Object.getOwnPropertyDescriptor(n,e);if(s)return s;n=ne(n)}}function Le(t){t.modified_||(t.modified_=!0,t.parent_&&Le(t.parent_))}function De(t){t.copy_||(t.copy_=Me(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var fn=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,s)=>{if(typeof e=="function"&&typeof n!="function"){const r=n;n=e;const a=this;return function(u=r,...m){return a.produce(u,h=>n.call(this,h,...m))}}typeof n!="function"&&L(6),s!==void 0&&typeof s!="function"&&L(7);let i;if(q(e)){const r=et(this),a=Ue(e,void 0);let c=!0;try{i=n(a),c=!1}finally{c?Re(r):Oe(r)}return Ze(r,s),tt(i,r)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===wt&&(i=void 0),this.autoFreeze_&&Je(i,!0),s){const r=[],a=[];X("Patches").generateReplacementPatches_(e,i,r,a),s(r,a)}return i}else L(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...c)=>this.produceWithPatches(a,u=>e(u,...c));let s,i;return[this.produce(e,n,(a,c)=>{s=a,i=c}),s,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){q(t)||L(8),se(t)&&(t=pn(t));const e=et(this),n=Ue(t,void 0);return n[N].isManual_=!0,Oe(e),n}finishDraft(t,e){const n=t&&t[N];(!n||!n.isManual_)&&L(9);const{scope_:s}=n;return Ze(s,e),tt(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const s=X("Patches").applyPatches_;return se(t)?s(t,e):this.produce(t,i=>s(i,e))}};function Ue(t,e){const n=Te(t)?X("MapSet").proxyMap_(t,e):ve(t)?X("MapSet").proxySet_(t,e):hn(t,e);return(e?e.scope_:_t()).drafts_.push(n),n}function pn(t){return se(t)||L(10,t),kt(t)}function kt(t){if(!q(t)||_e(t))return t;const e=t[N];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Me(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Me(t,!0);return xe(n,(s,i)=>{vt(n,s,kt(i))}),e&&(e.finalized_=!1),n}var M=new fn,gn=M.produce;M.produceWithPatches.bind(M);M.setAutoFreeze.bind(M);M.setUseStrictShallowCopy.bind(M);M.applyPatches.bind(M);M.createDraft.bind(M);M.finishDraft.bind(M);const xn=t=>(e,n,s)=>(s.setState=(i,r,...a)=>{const c=typeof i=="function"?gn(i):i;return e(c,r,...a)},t(s.setState,n,s)),Sn=xn,Dt="poloniex-trading-platform-key",st=t=>{try{return Ie.AES.encrypt(t,Dt).toString()}catch(e){return console.error("Encryption failed:",e),t}},ot=t=>{try{return Ie.AES.decrypt(t,Dt).toString(Ie.enc.Utf8)}catch(e){return console.error("Decryption failed:",e),t}},bn=()=>({getItem:t=>{var n;const e=localStorage.getItem(t);if(!e)return null;try{const s=JSON.parse(e);return(n=s.state)!=null&&n.apiCredentials&&(s.state.apiCredentials.apiKey&&(s.state.apiCredentials.apiKey=ot(s.state.apiCredentials.apiKey)),s.state.apiCredentials.apiSecret&&(s.state.apiCredentials.apiSecret=ot(s.state.apiCredentials.apiSecret))),JSON.stringify(s)}catch(s){return console.error("Error parsing stored data:",s),e}},setItem:(t,e)=>{var n;try{const s=JSON.parse(e);(n=s.state)!=null&&n.apiCredentials&&(s.state.apiCredentials.apiKey&&(s.state.apiCredentials.apiKey=st(s.state.apiCredentials.apiKey)),s.state.apiCredentials.apiSecret&&(s.state.apiCredentials.apiSecret=st(s.state.apiCredentials.apiSecret))),localStorage.setItem(t,JSON.stringify(s))}catch(s){console.error("Error storing data:",s),localStorage.setItem(t,e)}},removeItem:t=>{localStorage.removeItem(t)}}),En={apiCredentials:{apiKey:"",apiSecret:"",isLiveTrading:!1},ui:{darkMode:!1,showExtension:!0,notifications:{email:!0,trade:!0,price:!0,chat:!0}},trading:{defaultPair:"BTC_USDT",mockMode:!0},toasts:[]},Ee=Mt()(on(Sn((t,e)=>({...En,setApiCredentials:n=>t(s=>{Object.assign(s.apiCredentials,n)}),clearApiCredentials:()=>t(n=>{n.apiCredentials={apiKey:"",apiSecret:"",isLiveTrading:!1}}),setDarkMode:n=>t(s=>{s.ui.darkMode=n}),setShowExtension:n=>t(s=>{s.ui.showExtension=n}),setNotifications:n=>t(s=>{Object.assign(s.ui.notifications,n)}),setDefaultPair:n=>t(s=>{s.trading.defaultPair=n}),setMockMode:n=>t(s=>{s.trading.mockMode=n}),addToast:n=>t(s=>{const i={...n,id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:Date.now()};s.toasts.push(i)}),removeToast:n=>t(s=>{const i=s.toasts.findIndex(r=>r.id===n);i!==-1&&s.toasts.splice(i,1)}),clearToasts:()=>t(n=>{n.toasts=[]})})),{name:"poloniex-app-storage",storage:yt(()=>bn()),partialize:t=>({apiCredentials:t.apiCredentials,ui:t.ui,trading:t.trading})})),yn={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ee=typeof window<"u"&&window.location&&window.location.hostname.includes("webcontainer-api.io"),wn=typeof window<"u"&&window.location&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"),B=(t,e="")=>{const n=yn[t];return n!==void 0?String(n):e},Tn=()=>B("VITE_POLONIEX_API_KEY",""),vn=()=>B("VITE_POLONIEX_API_SECRET",""),_n=(t="futures")=>{const e=B("VITE_POLONIEX_API_BASE_URL","");if(e)return e;const n=B("NEXT_PUBLIC_API_URL","");return n||(t==="futures"?"https://api.poloniex.com/v3/futures":"https://api.poloniex.com/v3")},it=(t="public")=>{const e=B("VITE_POLONIEX_WS_URL","");return e||(t==="public"?"wss://ws.poloniex.com/ws/public":"wss://ws.poloniex.com/ws/private")},Cn=()=>{const t=B("VITE_FORCE_MOCK_MODE","").toLowerCase();return t==="true"||t==="1"},kn=()=>{const t=B("VITE_DISABLE_MOCK_MODE","").toLowerCase();return t==="true"||t==="1"},de=(t=!1)=>Cn()?!0:(kn()||ee||wn,!t),Dn=()=>{const t=B("VITE_BACKEND_URL");if(t)return t;if(typeof window<"u"&&window.location){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"http://localhost:3000":e.includes("railway.app")||e.includes("up.railway.app")?"https://polytrade-be.up.railway.app":window.location.origin}return"http://localhost:3000"},An=_n(),Pn=()=>localStorage.getItem("token")||sessionStorage.getItem("token"),Q=()=>{const t=Pn();return pe.create({baseURL:An,timeout:3e4,headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}})};class rt extends Error{constructor(e,n,s){super(e),this.code=n,this.statusCode=s,this.name="PoloniexAPIError"}}class fe extends Error{constructor(e){super(e),this.name="PoloniexConnectionError"}}class Ae extends Error{constructor(e){super(e),this.name="PoloniexAuthenticationError"}}const Pe={PUBLIC_REQUESTS_PER_SECOND:10,PRIVATE_REQUESTS_PER_SECOND:5,ORDERS_PER_SECOND:2},ie=(t,e,n)=>{},re=t=>t instanceof Error?new Error(t.message):new Error(String(t)),H=class H{constructor(){S(this,"mockMode",!0);S(this,"lastBalanceUpdate",0);S(this,"cachedBalance",null);S(this,"historicalData",new Map);S(this,"balanceUpdateInterval",1e4);S(this,"requestCounter",0);S(this,"rateLimitQueue",new Map);S(this,"positionUpdateCallbacks",new Set);S(this,"orderUpdateCallbacks",new Set);S(this,"liquidationCallbacks",new Set);S(this,"marginCallbacks",new Set);this.loadCredentials()}static getInstance(){return H.instance||(H.instance=new H),H.instance}onPositionUpdate(e){this.positionUpdateCallbacks.add(e)}onOrderUpdate(e){this.orderUpdateCallbacks.add(e)}onLiquidationWarning(e){this.liquidationCallbacks.add(e)}onMarginUpdate(e){this.marginCallbacks.add(e)}async checkRateLimit(e){const n=Date.now(),s=`${e}_requests`,i=e==="public"?Pe.PUBLIC_REQUESTS_PER_SECOND:e==="private"?Pe.PRIVATE_REQUESTS_PER_SECOND:Pe.ORDERS_PER_SECOND;this.rateLimitQueue.has(s)||this.rateLimitQueue.set(s,[]);const r=this.rateLimitQueue.get(s),a=n-1e3;for(;r.length>0&&r[0]<a;)r.shift();if(r.length>=i){const c=r[0],u=1e3-(n-c);await new Promise(m=>setTimeout(m,u))}r.push(n)}loadCredentials(){try{const e=Ee.getState(),{isLiveTrading:n}=e.apiCredentials;this.mockMode=de(!0)||!n,this.cachedBalance=null,this.lastBalanceUpdate=0}catch{this.mockMode=de(!1)}}async getAccountBalance(){var e,n,s,i,r;if(this.cachedBalance&&Date.now()-this.lastBalanceUpdate<this.balanceUpdateInterval)return this.cachedBalance;try{if(this.mockMode)return{totalAmount:"15478.23",availableAmount:"12345.67",accountEquity:"15820.45",unrealizedPnL:"342.22",todayPnL:"156.78",todayPnLPercentage:"1.02"};const a=Q();ie("GET","/account/balances");const c=await a.get("/account/balances");return this.cachedBalance=c.data,this.lastBalanceUpdate=Date.now(),this.cachedBalance}catch(a){if(pe.isAxiosError(a)){if(((e=a.response)==null?void 0:e.status)===401)throw new Ae("Authentication failed - please check your API credentials");if(((n=a.response)==null?void 0:n.status)===400&&((s=a.response.data)!=null&&s.requiresApiKeys))throw new Ae("API credentials required - please add your Poloniex API keys");if((i=a.response)!=null&&i.status)throw new rt(`Backend API error: ${a.response.statusText}`,((r=a.response.data)==null?void 0:r.code)||"API_ERROR",a.response.status)}throw new fe(`Failed to fetch account balance: ${re(a).message}`)}}async getMarketData(e){var n;try{if(this.mockMode)return this.generateMockMarketData(100);await this.checkRateLimit("public");const s=Q();return ie("GET",`/klines/${e}`),(await s.get(`/klines/${e}`,{params:{interval:"5m",limit:100}})).data}catch(s){throw pe.isAxiosError(s)&&((n=s.response)==null?void 0:n.status)===404?new rt(`Market data not found for ${e}`,"NOT_FOUND",404):new fe(`Failed to fetch market data for ${e}: ${re(s).message}`)}}generateMockMarketData(e){return Array.from({length:e},(n,s)=>{const i=5e4+Math.random()*5e3,r=i*.01,a=Date.now()-(e-1-s)*60*1e3,c=i+(Math.random()-.5)*r,u=c+Math.random()*r,m=c-Math.random()*r,h=m+Math.random()*(u-m);return[new Date(a).toISOString(),c.toString(),u.toString(),m.toString(),h.toString(),(100+Math.random()*900).toString()]})}async getOpenPositions(){var e;try{if(this.mockMode)return{positions:[{symbol:"BTC_USDT_PERP",posId:"12345",pos:"long",marginMode:"cross",posCost:"25000",posSide:"long",posSize:"0.5",markPrice:"51000",unrealizedPnL:"500",liquidationPrice:"45000"}]};await this.checkRateLimit("private");const n=Q();return ie("GET","/account/balances"),(await n.get("/account/balances")).data}catch(n){throw pe.isAxiosError(n)&&((e=n.response)==null?void 0:e.status)===401?new Ae("Authentication failed for positions"):new fe(`Failed to fetch open positions: ${re(n).message}`)}}async placeOrder(e,n,s,i,r){await this.checkRateLimit("order");try{if(this.mockMode)return{success:!0,orderId:"mock-order-"+Date.now(),pair:e,side:n,type:s,quantity:i,price:r||"market"};const a=Q(),c={symbol:e,side:n.toUpperCase(),type:s.toUpperCase(),amount:i.toString(),...s==="limit"&&r?{price:r.toString()}:{}};return ie("POST","/orders",c),(await a.post("/orders",c)).data}catch(a){const c=re(a);if(ee)return{success:!0,orderId:"mock-order-"+Date.now(),pair:e,side:n,type:s,quantity:i,price:r||"market"};throw c}}async getRecentTrades(e,n=50){try{if(this.mockMode)return this.generateMockTrades(e,n);await this.checkRateLimit("public");const s=Q();return ie("GET","/trades"),(await s.get("/trades",{params:{symbol:e,limit:n}})).data}catch(s){throw new fe(`Failed to fetch recent trades for ${e}: ${re(s).message}`)}}generateMockTrades(e,n){return Array.from({length:n},(s,i)=>{const r=51e3+(Math.random()-.5)*1e3,a=.01+Math.random()*.5,c=Date.now()-i*60*1e3;return{id:`mock-trade-${i}-${Date.now()}`,price:r.toString(),quantity:a.toString(),amount:(r*a).toString(),takerSide:Math.random()>.5?"buy":"sell",ts:c,createdAt:new Date(c).toISOString()}})}async getHistoricalData(e,n,s){const i=`${e}-${n}-${s}`;if(this.historicalData.has(i))return this.historicalData.get(i);try{if(this.mockMode){const u=this.generateMockHistoricalData(e,n,s);return this.historicalData.set(i,u),u}const c=(await Q().get(`/klines/${e}`,{params:{interval:"1h",startTime:new Date(n).getTime(),endTime:new Date(s).getTime(),limit:1e3}})).data.map(u=>({pair:e,timestamp:new Date(u[0]).getTime(),open:parseFloat(u[1]),high:parseFloat(u[2]),low:parseFloat(u[3]),close:parseFloat(u[4]),volume:parseFloat(u[5])}));return this.historicalData.set(i,c),c}catch{const a=this.generateMockHistoricalData(e,n,s);return this.historicalData.set(i,a),a}}generateMockHistoricalData(e,n,s){const i=new Date(n).getTime(),r=new Date(s).getTime(),a=60*60*1e3,c=[];let u=5e4;for(let m=i;m<=r;m+=a){const h=u*.01,d=u+(Math.random()-.5)*h,f=d+Math.random()*h,p=d-Math.random()*h,E=p+Math.random()*(f-p);c.push({pair:e,timestamp:m,open:d,high:f,low:p,close:E,volume:100+Math.random()*900}),u=E}return c}};S(H,"instance");let ze=H;const Z=ze.getInstance(),In={retryCount:3,retryDelay:1e3,logToServer:!0,showToUser:!0},jn=(t={})=>{const e=l.useMemo(()=>({...In,...t}),[t]),[n,s]=l.useState({hasError:!1,error:null,errorType:"unknown",severity:"low",retryAttempt:0,lastErrorTime:0}),i=l.useCallback(()=>{s({hasError:!1,error:null,errorType:"unknown",severity:"low",retryAttempt:0,lastErrorTime:0})},[]),r=l.useCallback(h=>{const d=h.message.toLowerCase();return h.name==="ApiError"||d.includes("api")||d.includes("endpoint")?"api":h.name==="NetworkError"||d.includes("network")||d.includes("connection")||d.includes("offline")||d.includes("timeout")?"network":h.name==="ValidationError"||d.includes("validation")||d.includes("invalid")?"validation":h.name==="AuthenticationError"||d.includes("auth")||d.includes("permission")||d.includes("token")||d.includes("unauthorized")?"authentication":"unknown"},[]),a=l.useCallback((h,d)=>{const f=h.message.toLowerCase();return f.includes("critical")||f.includes("fatal")||f.includes("crash")?"critical":d==="authentication"||f.includes("security")||f.includes("data loss")?"high":d==="api"||d==="network"||f.includes("timeout")?"medium":"low"},[]),c=l.useCallback((h,d,f)=>{console.error("Error logged to server:",{message:h.message,stack:h.stack,type:d,severity:f,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href});try{const p=JSON.parse(localStorage.getItem("errorLog")||"[]");p.push({message:h.message,type:d,severity:f,timestamp:new Date().toISOString(),url:window.location.href}),p.length>20&&p.shift(),localStorage.setItem("errorLog",JSON.stringify(p))}catch(p){console.error("Failed to log error to localStorage",p)}},[]),u=l.useCallback(h=>{const d=r(h),f=a(h,d),p=Date.now();s(E=>{const g={hasError:!0,error:h,errorType:d,severity:f,retryAttempt:E.retryAttempt+1,lastErrorTime:p};return e.logToServer&&c(h,d,f),g.retryAttempt<=(e.retryCount||0)&&(d==="network"||d==="api")?setTimeout(()=>{e.onRetry&&e.onRetry(h,g.retryAttempt),s(w=>w.error===h?{...w,hasError:!1}:w)},(e.retryDelay||1e3)*Math.pow(2,g.retryAttempt-1)):e.onFallback&&e.onFallback(h),g})},[e,r,a,c]),m=l.useCallback((h,d={})=>{const f={...e,...d};return async(...p)=>{try{return await h(...p)}catch(E){if(u(E instanceof Error?E:new Error(String(E))),f.fallbackValue!==void 0)return f.fallbackValue;throw E}}},[e,u]);return l.useEffect(()=>{if(n.hasError&&n.severity!=="critical"&&n.severity!=="high"){const h=setTimeout(()=>{i()},1e4);return()=>clearTimeout(h)}},[n.hasError,n.severity,i]),{error:n.error,errorType:n.errorType,severity:n.severity,hasError:n.hasError,retryAttempt:n.retryAttempt,handleError:u,resetError:i,withErrorHandling:m}},O={pingInterval:3e4,pingTimeout:6e4,pongTimeout:1e4,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:3e4,randomizationFactor:.5,transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,closeOnBeforeunload:!1,withCredentials:!0,autoConnect:!0,query:{version:"1.0",transport:"websocket"}},_={CONNECT:"connect",DISCONNECT:"disconnect",RECONNECT:"reconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECT_ERROR:"reconnect_error",RECONNECT_FAILED:"reconnect_failed",CONNECT_ERROR:"connect_error",CONNECT_TIMEOUT:"connect_timeout",MARKET_DATA:"marketData",TRADE_EXECUTED:"tradeExecuted",CHAT_MESSAGE:"chatMessage",ERROR:"error",SUBSCRIBE_MARKET:"subscribeMarket",UNSUBSCRIBE_MARKET:"unsubscribeMarket",PING:"ping",PONG:"pong"},at={url:it("private"),publicUrl:it("public"),reconnectInterval:5e3,maxReconnectAttempts:10,pingInterval:3e4},V=class V{constructor(){S(this,"socket",null);S(this,"poloniexWs",null);S(this,"usePoloniexDirect",!1);S(this,"connectionState","disconnected");S(this,"eventListeners",new Map);S(this,"reconnectAttempts",0);S(this,"maxReconnectAttempts",10);S(this,"initialReconnectDelay",1e3);S(this,"maxReconnectDelay",3e4);S(this,"reconnectionJitter",.5);S(this,"currentReconnectDelay",this.initialReconnectDelay);S(this,"reconnectionStrategy","exponential_backoff");S(this,"reconnectTimer",null);S(this,"pingTimer",null);S(this,"pingInterval",O.pingInterval);S(this,"pingTimeout",O.pingTimeout);S(this,"lastPingTime",0);S(this,"lastPongTime",0);S(this,"offlineData",new Map);S(this,"connectionAttempted",!1);S(this,"useMockData",!0);S(this,"healthCheckEndpoint","/api/health");S(this,"subscriptions",new Set);S(this,"pendingMessages",[]);S(this,"lastErrorLog",{});S(this,"ERROR_LOG_THROTTLE_MS",3e4);S(this,"connectionStats",{connectTime:null,disconnectTime:null,lastPingTime:null,lastPongTime:null,pingLatency:null,reconnectAttempts:0,successfulReconnects:0,failedReconnects:0,totalDisconnects:0,connectionUptime:0,connectionDowntime:0});S(this,"config",{url:Dn(),options:{...O,reconnectionStrategy:"exponential_backoff",initialReconnectDelay:O.reconnectionDelay,maxReconnectDelay:O.reconnectionDelayMax,maxReconnectAttempts:O.reconnectionAttempts,reconnectionJitter:O.randomizationFactor,timeout:1e4,pingInterval:O.pingInterval,pingTimeout:O.pingTimeout,autoConnect:O.autoConnect,forceNew:!0,transports:O.transports}});const e=!!(Tn()&&vn()),n=de(e);this.usePoloniexDirect=e&&!n,this.useMockData=n,console.log("WebSocket Service initialized:",{usePoloniexDirect:this.usePoloniexDirect,useMockData:this.useMockData,hasCredentials:e});try{const s=localStorage.getItem("websocket_offline_data");s&&(this.offlineData=new Map(JSON.parse(s)))}catch(s){console.error("Error loading offline data:",s)}typeof window<"u"&&(window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),window.addEventListener("beforeunload",this.cleanup.bind(this)))}static getInstance(){return V.instance||(V.instance=new V),V.instance}configure(e){if(this.config={...this.config,...e,options:{...this.config.options,...e.options},auth:{...this.config.auth,...e.auth}},this.config.options){const{reconnectionStrategy:n,initialReconnectDelay:s,maxReconnectDelay:i,maxReconnectAttempts:r,reconnectionJitter:a,pingInterval:c,pingTimeout:u}=this.config.options;n&&(this.reconnectionStrategy=n),s&&(this.initialReconnectDelay=s),i&&(this.maxReconnectDelay=i),r&&(this.maxReconnectAttempts=r),a&&(this.reconnectionJitter=a),c&&(this.pingInterval=c),u&&(this.pingTimeout=u)}}throttledLog(e,n,s,...i){const r=Date.now(),a=this.lastErrorLog[n]||0;r-a>this.ERROR_LOG_THROTTLE_MS&&(this.lastErrorLog[n]=r)}getConnectionState(){return this.connectionState}getConnectionStats(){return this.connectionState==="connected"&&this.connectionStats.connectTime?this.connectionStats.connectionUptime=Date.now()-this.connectionStats.connectTime:this.connectionStats.disconnectTime&&(this.connectionStats.connectionDowntime=Date.now()-this.connectionStats.disconnectTime),{...this.connectionStats}}handleOnline(){console.log("Device is online, attempting to reconnect WebSocket"),(this.connectionState==="disconnected"||this.connectionState==="failed")&&this.reconnect()}handleOffline(){console.log("Device is offline, WebSocket connection will be affected"),this.connectionState==="connected"&&(this.connectionState="disconnected",this.connectionStats.disconnectTime=Date.now(),this.connectionStats.totalDisconnects++)}cleanup(){this.stopPingTimer(),this.stopPoloniexPingTimer(),this.stopReconnectTimer(),this.disconnect(),typeof window<"u"&&(window.removeEventListener("online",this.handleOnline.bind(this)),window.removeEventListener("offline",this.handleOffline.bind(this)),window.removeEventListener("beforeunload",this.cleanup.bind(this)))}calculateReconnectDelay(){let e;switch(this.reconnectionStrategy){case"exponential_backoff":e=Math.min(this.initialReconnectDelay*Math.pow(2,this.reconnectAttempts),this.maxReconnectDelay);break;case"linear_backoff":e=Math.min(this.initialReconnectDelay*(this.reconnectAttempts+1),this.maxReconnectDelay);break;case"immediate":e=100;break;case"none":default:return-1}const n=1+(Math.random()*2-1)*this.reconnectionJitter;return Math.floor(e*n)}startPingTimer(){this.stopPingTimer(),this.pingTimer=setInterval(()=>{this.connectionState==="connected"&&(this.lastPingTime=Date.now(),this.connectionStats.lastPingTime=this.lastPingTime,this.usePoloniexDirect&&this.poloniexWs||this.socket&&(this.socket.emit(_.PING,{timestamp:this.lastPingTime}),setTimeout(()=>{const e=this.lastPongTime-this.lastPingTime;(e<=0||e>this.pingTimeout)&&(this.throttledLog("warn","ping-timeout",`WebSocket ping timeout after ${this.pingTimeout}ms`),this.socket&&(this.socket.disconnect(),this.handleDisconnect(new Error("Ping timeout"))))},this.pingTimeout)))},this.pingInterval)}stopPingTimer(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null)}stopReconnectTimer(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null)}connectToPoloniex(){return new Promise((e,n)=>{try{const s=at.publicUrl;console.log("Connecting to Poloniex V3 futures WebSocket:",s),this.poloniexWs=new WebSocket(s),this.poloniexWs.onopen=()=>{console.log("Connected to Poloniex V3 futures WebSocket"),this.connectionState="connected",this.useMockData=!1,this.reconnectAttempts=0,this.connectionStats.connectTime=Date.now(),this.startPoloniexPingTimer(),this.subscribeToPoloniexChannels(),this.notifyListeners("connectionStateChanged",this.connectionState),e()},this.poloniexWs.onmessage=i=>{try{const r=JSON.parse(i.data);this.handlePoloniexMessage(r)}catch(r){console.error("Error parsing Poloniex WebSocket message:",r)}},this.poloniexWs.onerror=i=>{console.error("Poloniex WebSocket error:",i),this.handlePoloniexDisconnect(),n(i)},this.poloniexWs.onclose=()=>{console.log("Poloniex WebSocket connection closed"),this.handlePoloniexDisconnect()}}catch(s){console.error("Failed to create Poloniex WebSocket connection:",s),n(s)}})}handlePoloniexMessage(e){try{e.channel==="ticker"&&e.data?(Array.isArray(e.data)?e.data:[e.data]).forEach(s=>{var r;const i={pair:((r=s.symbol)==null?void 0:r.replace("_","-"))||"BTC-USDT",timestamp:Date.now(),open:parseFloat(s.open)||0,high:parseFloat(s.high)||0,low:parseFloat(s.low)||0,close:parseFloat(s.close)||0,volume:parseFloat(s.quantity)||0};this.notifyListeners(_.MARKET_DATA,i)}):e.channel==="trades"&&e.data&&(Array.isArray(e.data)?e.data:[e.data]).forEach(s=>{var r;const i={id:s.id,pair:((r=s.symbol)==null?void 0:r.replace("_","-"))||"BTC-USDT",price:parseFloat(s.price)||0,amount:parseFloat(s.quantity)||0,side:s.takerSide==="buy"?"buy":"sell",timestamp:s.ts||Date.now()};this.notifyListeners(_.TRADE_EXECUTED,i)})}catch(n){console.error("Error handling Poloniex message:",n)}}subscribeToPoloniexChannels(){if(!this.poloniexWs||this.poloniexWs.readyState!==WebSocket.OPEN)return;const e={event:"subscribe",channel:["ticker"],symbols:["BTC_USDT","ETH_USDT","SOL_USDT","ADA_USDT","DOT_USDT"]};this.poloniexWs.send(JSON.stringify(e)),console.log("Subscribed to Poloniex ticker channels")}handlePoloniexDisconnect(){this.connectionState="disconnected",this.connectionStats.disconnectTime=Date.now(),this.connectionStats.totalDisconnects++,this.stopPoloniexPingTimer(),this.notifyListeners("connectionStateChanged",this.connectionState),this.reconnectToPoloniex()}reconnectToPoloniex(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max Poloniex reconnect attempts reached, switching to mock mode"),this.useMockData=!0,this.connectionState="failed",this.notifyListeners("connectionStateChanged",this.connectionState);return}const e=this.calculateReconnectDelay();this.reconnectAttempts++,this.connectionState="reconnecting",console.log(`Reconnecting to Poloniex in ${e}ms (attempt ${this.reconnectAttempts})`),this.reconnectTimer=setTimeout(()=>{this.connectToPoloniex().then(()=>{console.log("Poloniex reconnection successful"),this.connectionStats.successfulReconnects++}).catch(()=>{console.log("Poloniex reconnection failed"),this.connectionStats.failedReconnects++,this.reconnectToPoloniex()})},e)}startPoloniexPingTimer(){this.stopPoloniexPingTimer(),this.pingTimer=setInterval(()=>{this.poloniexWs&&this.poloniexWs.readyState===WebSocket.OPEN&&(this.lastPingTime=Date.now(),this.connectionStats.lastPingTime=this.lastPingTime)},at.pingInterval)}stopPoloniexPingTimer(){this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null)}connect(e){return new Promise((n,s)=>{try{if(e&&(this.config.auth={...this.config.auth,token:e}),this.connectionState==="connected"){n();return}if(this.connectionState==="connecting"){const i=setInterval(()=>{this.connectionState==="connected"?(clearInterval(i),n()):(this.connectionState==="failed"||this.connectionState==="disconnected")&&(clearInterval(i),s(new Error("Connection failed")))},100);return}if(this.reconnectAttempts=0,this.currentReconnectDelay=this.initialReconnectDelay,this.connectionState="connecting",this.connectionAttempted&&this.useMockData){this.throttledLog("log","using-mock-data","Using mock data (previous connection attempt failed)"),this.connectionState="failed",n();return}this.connectionAttempted=!0,this.usePoloniexDirect?(console.info("Attempting direct Poloniex V3 futures WebSocket connection..."),this.connectToPoloniex().then(()=>{n()}).catch(i=>{console.warn("Failed to connect to Poloniex, falling back to mock mode:",i),this.useMockData=!0,this.connectionState="failed",n()})):(console.info("Attempting internal backend WebSocket connection..."),this.connectToBackend(e).then(()=>{n()}).catch(i=>{console.warn("Failed to connect to backend, using mock mode:",i),this.useMockData=!0,this.connectionState="failed",n()}))}catch(i){this.throttledLog("error","websocket-connection-error","WebSocket connection error:",i instanceof Error?i.message:String(i)),this.useMockData=!0,this.connectionState="failed",n()}})}connectToBackend(e){return new Promise((n,s)=>{var i;try{const r=setTimeout(()=>{var a;this.throttledLog("warn","connection-timeout",`WebSocket connection timed out after ${((a=this.config.options)==null?void 0:a.timeout)||1e4}ms`),this.connectionState="failed",this.useMockData=!0,n()},((i=this.config.options)==null?void 0:i.timeout)||1e4);if(typeof window<"u"&&window.location&&window.location.hostname.includes("webcontainer-api.io")){this.useMockData=!0,this.connectionState="failed",clearTimeout(r),this.throttledLog("log","webcontainer-mock","Running in WebContainer environment, defaulting to mock data"),n();return}fetch(this.config.url+this.healthCheckEndpoint,{method:"GET",signal:AbortSignal.timeout(5e3)}).then(a=>{if(!a.ok)throw new Error("Server health check failed");return a.json()}).then(()=>{var c,u,m,h;clearTimeout(r);const a={auth:this.config.auth,transports:((c=this.config.options)==null?void 0:c.transports)||["websocket","polling"],reconnection:!1,timeout:((u=this.config.options)==null?void 0:u.timeout)||1e4,forceNew:((m=this.config.options)==null?void 0:m.forceNew)||!0,autoConnect:((h=this.config.options)==null?void 0:h.autoConnect)!==void 0?this.config.options.autoConnect:!1,closeOnBeforeunload:!1,withCredentials:!0,upgrade:!0};this.socket=St(this.config.url,a),this.setupSocketEventHandlers(),a.autoConnect||this.socket.connect(),n()}).catch(a=>{clearTimeout(r),this.throttledLog("log","server-unavailable","Server not available, using mock data:",a.message),this.useMockData=!0,this.connectionState="failed",n()})}catch(r){this.throttledLog("error","websocket-connection-error","WebSocket connection error:",r instanceof Error?r.message:String(r)),this.useMockData=!0,this.connectionState="failed",n()}})}setupSocketEventHandlers(){this.socket&&(this.socket.on(_.CONNECT,()=>{console.log("WebSocket connected successfully"),this.connectionState="connected",this.useMockData=!1,this.reconnectAttempts=0,this.currentReconnectDelay=this.initialReconnectDelay,this.connectionStats.connectTime=Date.now(),this.startPingTimer(),this.resubscribe(),this.sendPendingMessages(),this.notifyListeners("connectionStateChanged",this.connectionState)}),this.socket.on(_.DISCONNECT,e=>{this.throttledLog("log","websocket-disconnect",`WebSocket disconnected: ${e}`),this.handleDisconnect(new Error(e))}),this.socket.on(_.CONNECT_ERROR,e=>{this.throttledLog("error","websocket-connect-error","WebSocket connection error:",e),this.handleDisconnect(e)}),this.socket.on(_.CONNECT_TIMEOUT,()=>{this.throttledLog("error","websocket-timeout","WebSocket connection timeout"),this.handleDisconnect(new Error("Connection timeout"))}),this.socket.on(_.PONG,e=>{this.lastPongTime=Date.now(),this.connectionStats.lastPongTime=this.lastPongTime,e&&e.timestamp&&(this.connectionStats.pingLatency=this.lastPongTime-e.timestamp)}),this.socket.on(_.MARKET_DATA,e=>{this.notifyListeners(_.MARKET_DATA,e)}),this.socket.on(_.TRADE_EXECUTED,e=>{this.notifyListeners(_.TRADE_EXECUTED,e)}),this.socket.on(_.CHAT_MESSAGE,e=>{this.notifyListeners(_.CHAT_MESSAGE,e)}),this.socket.on(_.ERROR,e=>{console.error("WebSocket error:",typeof e=="object"?JSON.stringify(e):e),this.notifyListeners(_.ERROR,e)}))}resubscribe(){this.isConnected()&&(console.log(`Resubscribing to ${this.subscriptions.size} channels`),this.subscriptions.forEach(e=>{if(this.usePoloniexDirect&&this.poloniexWs){const n={event:"subscribe",channel:["ticker"],symbols:[e.replace("-","_")]};this.poloniexWs.send(JSON.stringify(n))}else this.socket&&this.socket.emit(_.SUBSCRIBE_MARKET,{pair:e})}))}sendPendingMessages(){if(this.isConnected())for(console.log(`Sending ${this.pendingMessages.length} pending messages`);this.pendingMessages.length>0;){const e=this.pendingMessages.shift();e&&(this.usePoloniexDirect&&this.poloniexWs?this.poloniexWs.send(JSON.stringify(e)):this.socket&&this.socket.emit(e.event,e.data))}}handleDisconnect(e){if(this.connectionState="disconnected",this.connectionStats.disconnectTime=Date.now(),this.connectionStats.totalDisconnects++,this.stopPingTimer(),this.notifyListeners("connectionStateChanged",this.connectionState),this.notifyListeners(EVENTS.ERROR,e),this.reconnectionStrategy==="none"){this.useMockData=!0;return}this.reconnect()}reconnect(){if(this.stopReconnectTimer(),this.reconnectAttempts>=this.maxReconnectAttempts){console.log(`Max reconnection attempts (${this.maxReconnectAttempts}) reached, staying in mock mode`),this.connectionState="failed",this.useMockData=!0,this.connectionStats.failedReconnects++,this.notifyListeners("connectionStateChanged",this.connectionState);return}const e=this.calculateReconnectDelay();if(e<0){console.log("Reconnection strategy is NONE, not attempting to reconnect"),this.connectionState="failed",this.useMockData=!0;return}this.reconnectAttempts++,this.connectionState="reconnecting",this.connectionStats.reconnectAttempts++,this.notifyListeners("connectionStateChanged",this.connectionState),console.log(`Attempting reconnect ${this.reconnectAttempts}/${this.maxReconnectAttempts} in ${e}ms`),this.reconnectTimer=setTimeout(()=>{this.connect().then(()=>{this.connectionState==="connected"?(console.log("Reconnected successfully"),this.connectionStats.successfulReconnects++):(console.log("Reconnect attempt failed"),this.connectionStats.failedReconnects++,this.reconnect())}).catch(()=>{console.log("Reconnect attempt failed with error"),this.connectionStats.failedReconnects++,this.reconnect()})},e)}isConnected(){return this.usePoloniexDirect?this.connectionState==="connected"&&this.poloniexWs!==null&&this.poloniexWs.readyState===WebSocket.OPEN:this.connectionState==="connected"&&this.socket!==null}isMockMode(){return this.useMockData}saveOfflineData(e,n){try{this.offlineData.set(e,n),localStorage.setItem("websocket_offline_data",JSON.stringify(Array.from(this.offlineData.entries())))}catch(s){console.error("Error saving offline data:",s)}}subscribeToMarket(e){if(this.subscriptions.add(e),!this.isConnected()){console.log("WebSocket not connected, skipping market subscription");const n=this.offlineData.get(`market_${e}`);n&&this.notifyListeners(_.MARKET_DATA,n);return}if(this.usePoloniexDirect&&this.poloniexWs){const n={event:"subscribe",channel:["ticker"],symbols:[e.replace("-","_")]};this.poloniexWs.send(JSON.stringify(n))}else this.socket&&this.socket.emit(_.SUBSCRIBE_MARKET,{pair:e})}unsubscribeFromMarket(e){if(this.subscriptions.delete(e),!!this.isConnected())if(this.usePoloniexDirect&&this.poloniexWs){const n={event:"unsubscribe",channel:["ticker"],symbols:[e.replace("-","_")]};this.poloniexWs.send(JSON.stringify(n))}else this.socket&&this.socket.emit(_.UNSUBSCRIBE_MARKET,{pair:e})}send(e,n){if(!this.isConnected()){console.log(`WebSocket not connected, queueing message: ${e}`),this.pendingMessages.push({event:e,data:n});return}if(this.usePoloniexDirect&&this.poloniexWs){const s={event:e,...n};this.poloniexWs.send(JSON.stringify(s))}else this.socket&&this.socket.emit(e,n)}sendChatMessage(e,n){this.send(_.CHAT_MESSAGE,{message:e,username:n,timestamp:Date.now()})}on(e,n){var s;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(s=this.eventListeners.get(e))==null||s.add(n)}off(e,n){var s;this.eventListeners.has(e)&&((s=this.eventListeners.get(e))==null||s.delete(n))}notifyListeners(e,n){var s;this.eventListeners.has(e)&&((e===_.MARKET_DATA||e===_.TRADE_EXECUTED)&&this.saveOfflineData(e,n),(s=this.eventListeners.get(e))==null||s.forEach(i=>{try{i(n)}catch(r){console.error(`Error in ${e} event listener:`,r instanceof Error?r.message:String(r))}}))}disconnect(){this.stopPingTimer(),this.stopPoloniexPingTimer(),this.stopReconnectTimer(),this.socket&&(this.socket.disconnect(),this.socket=null),this.poloniexWs&&(this.poloniexWs.close(),this.poloniexWs=null),this.connectionState="disconnected",this.notifyListeners("connectionStateChanged",this.connectionState)}handlePageVisibilityChange(e){e?(console.log("Page visible - ensuring WebSocket connection is active"),(this.connectionState==="disconnected"||this.connectionState==="failed")&&this.connect()):console.log("Page hidden - maintaining WebSocket connection in background")}getConnectionHealth(){const e=Date.now(),n=this.connectionStats.connectTime?e-this.connectionStats.connectTime:0;return{state:this.connectionState,isHealthy:this.connectionState==="connected",uptime:n,lastPing:this.connectionStats.lastPingTime||0,latency:this.connectionStats.pingLatency,reconnectAttempts:this.reconnectAttempts}}broadcastMarketData(e){this.useMockData?setTimeout(()=>{this.notifyListeners(_.MARKET_DATA,e)},100):this.isConnected()&&this.send(_.MARKET_DATA,e)}broadcastTradeExecuted(e){this.useMockData?setTimeout(()=>{this.notifyListeners(_.TRADE_EXECUTED,e)},100):this.isConnected()&&this.send(_.TRADE_EXECUTED,e)}useConnectionState(){const[e,n]=te.useState(this.connectionState);return te.useEffect(()=>{const s=i=>{n(i)};return this.on("connectionStateChanged",s),()=>{this.off("connectionStateChanged",s)}},[]),e}};S(V,"instance");let Fe=V;const y=Fe.getInstance(),ys=()=>{const[t,e]=te.useState(y.getConnectionState()),[n,s]=te.useState(y.isMockMode()),i=jn();return te.useEffect(()=>{const r=a=>{e(a),s(y.isMockMode()),a==="failed"&&i.handleError(new Error("WebSocket connection failed after multiple attempts"))};return y.on("connectionStateChanged",r),()=>{y.off("connectionStateChanged",r)}},[i]),{connectionState:t,isMockMode:n,isConnected:y.isConnected(),connect:y.connect.bind(y),disconnect:y.disconnect.bind(y),subscribe:y.subscribeToMarket.bind(y),unsubscribe:y.unsubscribeFromMarket.bind(y),send:y.send.bind(y),on:y.on.bind(y),off:y.off.bind(y),getStats:y.getConnectionStats.bind(y)}},Nn=(t="BTC-USDT")=>{const{apiKey:e,apiSecret:n,isLiveTrading:s}=Ge(),[i,r]=l.useState(W),[a,c]=l.useState(K),[u,m]=l.useState(null),[h,d]=l.useState(!1),[f,p]=l.useState(null),E=!!(e&&n),[g,w]=l.useState(de(E)),k=l.useRef(),T=l.useCallback(C=>{try{return C.map(x=>({pair:t,timestamp:new Date(x[0]).getTime(),open:parseFloat(x[1]),high:parseFloat(x[2]),low:parseFloat(x[3]),close:parseFloat(x[4]),volume:parseFloat(x[5])}))}catch(x){return console.error("Error mapping Poloniex data:",x instanceof Error?x.message:String(x)),[]}},[t]),v=l.useCallback(C=>{try{return{id:C.id||`generated-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,pair:t,timestamp:new Date(C.createdAt).getTime(),type:C.takerSide==="buy"?"BUY":"SELL",price:parseFloat(C.price),amount:parseFloat(C.quantity),total:parseFloat(C.price)*parseFloat(C.quantity),strategyId:"",status:"COMPLETED"}}catch(x){return console.error("Error mapping Poloniex trade:",x instanceof Error?x.message:String(x)),{id:`error-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,pair:t,timestamp:Date.now(),type:"BUY",price:0,amount:0,total:0,strategyId:"",status:"FAILED"}}},[t]),j=l.useCallback(async C=>{if(g){r(W);return}if(ee){r(W);return}d(!0),p(null);try{const x=await Z.getMarketData(C);if(x&&Array.isArray(x)){const b=T(x);if(b.length>0)r(b);else throw new Error("No market data returned from API")}else throw new Error("Invalid market data format received from API")}catch(x){const b=x;console.error("Error fetching market data:",b.message),p(b)}finally{d(!1)}},[g,T]),z=l.useCallback(async C=>{if(g){c(K);return}if(ee){c(K);return}d(!0);try{const x=await Z.getRecentTrades(C);if(x&&Array.isArray(x)){const b=x.map(v).filter(D=>D.id.indexOf("error-")!==0&&!isNaN(D.price)&&!isNaN(D.amount));if(b.length>0)c(b);else throw new Error("No valid trades returned from API")}else throw new Error("Invalid trades data format received from API")}catch(x){const b=x;console.error("Error fetching trades:",b.message),p(b)}finally{d(!1)}},[g,v]),Y=l.useCallback(async()=>{if(g){m({totalAmount:"15478.23",availableAmount:"12345.67",accountEquity:"15820.45",unrealizedPnL:"342.22",todayPnL:"156.78",todayPnLPercentage:"1.02"});return}if(ee){m({totalAmount:"15478.23",availableAmount:"12345.67",accountEquity:"15820.45",unrealizedPnL:"342.22",todayPnL:"156.78",todayPnLPercentage:"1.02"});return}d(!0);try{const C=await Z.getAccountBalance();m(C)}catch(C){const x=C;console.error("Error fetching account balance:",x.message),p(x)}finally{d(!1)}},[g]);k.current={fetchMarketData:j,fetchTrades:z,fetchAccountBalance:Y};const Ce=l.useCallback(()=>{d(!0),Z.loadCredentials(),p(null),Promise.all([j(t),z(t),Y()]).finally(()=>{d(!1)})},[t,j,z,Y]);return l.useEffect(()=>{const C=!!(e&&n),x=de(C)||!s;w(x),s&&C&&!x&&(Z.loadCredentials(),d(!0),p(null),k.current&&Promise.all([k.current.fetchMarketData(t),k.current.fetchTrades(t),k.current.fetchAccountBalance()]).finally(()=>{d(!1)}))},[s,e,n,t]),l.useEffect(()=>{if(ee)return w(!0),r(W),c(K),()=>{};y.connect().then(()=>{w(y.isMockMode()),y.isConnected()?y.subscribeToMarket(t):(r(W),c(K))}).catch(b=>{console.error("Error connecting to WebSocket:",b instanceof Error?b.message:String(b)),w(!0),r(W),c(K)});const C=b=>{b.pair===t&&r(D=>{const F=D.findIndex(U=>U.timestamp===b.timestamp);if(F>=0){const U=[...D];return U[F]=b,U}else return[...D,b].sort((oe,he)=>oe.timestamp-he.timestamp)})},x=b=>{b.pair===t&&c(D=>D.some(F=>F.id===b.id)?D:[b,...D].slice(0,50))};return y.on("marketData",C),y.on("tradeExecuted",x),setTimeout(()=>{k.current&&(k.current.fetchMarketData(t),setTimeout(()=>{k.current&&(k.current.fetchTrades(t),setTimeout(()=>{k.current&&k.current.fetchAccountBalance()},500))},500))},500),()=>{y.off("marketData",C),y.off("tradeExecuted",x),y.isConnected()&&y.unsubscribeFromMarket(t)}},[t]),{marketData:i,trades:a,accountBalance:u,isLoading:h,error:f,isMockMode:g,fetchMarketData:j,fetchTrades:z,fetchAccountBalance:Y,refreshApiConnection:Ce}},At=l.createContext(void 0),Mn=({children:t,initialPair:e="BTC-USDT"})=>{const{marketData:n,trades:s,accountBalance:i,isLoading:r,error:a,isMockMode:c,refreshApiConnection:u}=Nn(e),[m,h]=l.useState(W),[d,f]=l.useState(K);l.useEffect(()=>{n.length>0&&h(n)},[n]),l.useEffect(()=>{s.length>0&&f(s)},[s]);const[p,E]=l.useState([{id:"1",name:"Moving Average Crossover",type:ae.MA_CROSSOVER,parameters:{fastPeriod:10,slowPeriod:50,pair:"BTC-USDT",timeframe:"1d"},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),performance:{totalPnL:12.5,winRate:.65,tradesCount:24}}]),[g,w]=l.useState(["1"]),[k,T]=l.useState([]),v=l.useCallback(x=>{T(b=>b.includes(x)?b:[...b,x])},[]),j=l.useCallback(()=>{T([])},[]);l.useEffect(()=>{if(a){const x=a instanceof Error?a.message:String(a);v(x)}},[a,v]);const z=x=>{E(b=>[...b,x])},Y=x=>{E(b=>b.filter(D=>D.id!==x)),w(b=>b.filter(D=>D!==x))},Ce=x=>{w(b=>b.includes(x)?b.filter(D=>D!==x):[...b,x])},C=async(x,b,D,F,U)=>{try{return c?(console.log("Using mock order placement",{pair:x,side:b,type:D,quantity:F,price:U}),{success:!0,orderId:"mock-order-"+Date.now(),pair:x,side:b,type:D,quantity:F,price:U||"market"}):await Z.placeOrder(x,b,D,F,U)}catch(oe){const he=oe instanceof Error?oe.message:"Unknown error placing order";throw v(he),new Error(he)}};return o.jsx(At.Provider,{value:{marketData:m,trades:d,strategies:p,activeStrategies:g,accountBalance:i,isLoading:r,isMockMode:c,addStrategy:z,removeStrategy:Y,toggleStrategyActive:Ce,placeOrder:C,errors:k,addError:v,clearErrors:j,refreshApiConnection:u},children:t})},Rn=()=>{const t=l.useContext(At);if(t===void 0)throw new Error("useTradingContext must be used within a TradingProvider");return t},On=()=>{const t=We(),{accountBalance:e,isLoading:n}=Rn(),{isDesktop:s}=Et(),[i,r]=l.useState(!1),a=[{path:"/",label:"Dashboard",icon:o.jsx(lt,{size:20})},{path:"/dashboard/live",label:"Live Trading",icon:o.jsx(Ot,{size:20})},{path:"/strategies",label:"Trading Strategies",icon:o.jsx(ge,{size:20})},{path:"/backtesting",label:"Advanced Backtesting",icon:o.jsx(Lt,{size:20})},{path:"/account",label:"Account",icon:o.jsx($e,{size:20})},{path:"/transactions",label:"Transaction History",icon:o.jsx(Ut,{size:20})},{path:"/trades",label:"Trade History",icon:o.jsx(zt,{size:20})},{path:"/charts",label:"Market Analysis",icon:o.jsx(dt,{size:20})},{path:"/performance",label:"Performance",icon:o.jsx(ut,{size:20})},{path:"/chat",label:"Community Chat",icon:o.jsx(ht,{size:20})},{path:"/extension",label:"Chrome Extension",icon:o.jsx(mt,{size:20})},{path:"/settings",label:"Settings",icon:o.jsx(He,{size:20})}],c=()=>{r(!i)};return s?o.jsxs("aside",{id:"navigation",className:`
        ${i?"w-16":"w-64"} 
        bg-neutral-800 text-white transition-all duration-300 ease-in-out
        relative flex-shrink-0
      `,role:"navigation","aria-label":"Main navigation",children:[o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 mt-2",children:[o.jsxs("div",{className:`flex items-center ${i?"justify-center":""}`,children:[o.jsx(ge,{className:"h-8 w-8 text-blue-400 mr-2","aria-hidden":"true"}),!i&&o.jsx("h2",{className:"text-xl font-bold",children:"TradingBot"})]}),o.jsx("button",{onClick:c,className:"p-1 rounded-md text-neutral-400 hover:text-white hover:bg-neutral-700 transition-colors","aria-label":i?"Expand sidebar":"Collapse sidebar","aria-expanded":!i,children:i?o.jsx(ft,{size:20,"aria-hidden":"true"}):o.jsx(Rt,{size:20,"aria-hidden":"true"})})]}),o.jsx("nav",{"aria-label":"Main menu",children:o.jsx("ul",{className:"space-y-1",role:"list",children:a.map(u=>o.jsx("li",{children:o.jsxs(Ke,{to:u.path,className:`
                    flex items-center p-3 rounded-md transition-all duration-200 group
                    ${t.pathname===u.path?"bg-blue-700 text-white":"text-neutral-300 hover:bg-neutral-700 hover:text-white"}
                    ${i?"justify-center":""}
                  `,title:i?u.label:void 0,"aria-label":u.label,"aria-current":t.pathname===u.path?"page":void 0,children:[o.jsx("span",{className:`flex-shrink-0 ${i?"":"mr-3"}`,"aria-hidden":"true",children:u.icon}),!i&&o.jsx("span",{className:"transition-opacity duration-200",children:u.label}),i&&o.jsx("div",{className:`
                      absolute left-full ml-2 px-2 py-1 
                      bg-neutral-900 text-white text-sm rounded-md
                      opacity-0 group-hover:opacity-100 transition-opacity duration-200
                      pointer-events-none whitespace-nowrap z-50
                    `,children:u.label})]})},u.path))})})]}),!i&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-neutral-700",children:o.jsxs("div",{className:"bg-neutral-900 p-3 rounded-md",children:[o.jsx("div",{className:"text-sm text-neutral-400 mb-2",children:"Account Balance"}),n?o.jsx("div",{className:"text-sm text-neutral-500",children:"Loading..."}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-lg font-semibold",children:["$",parseFloat((e==null?void 0:e.totalAmount)||"0").toFixed(2)," USDT"]}),o.jsxs("div",{className:`text-xs mt-1 ${parseFloat((e==null?void 0:e.todayPnL)||"0")>=0?"text-green-400":"text-red-400"}`,children:[parseFloat((e==null?void 0:e.todayPnL)||"0")>=0?"+":"",parseFloat((e==null?void 0:e.todayPnLPercentage)||"0").toFixed(2),"% today"]})]})]})})]}):null},Ln=()=>o.jsxs("div",{className:"sr-only-focusable",children:[o.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),o.jsx("a",{href:"#navigation",className:"skip-link",children:"Skip to navigation"})]}),G=class G{constructor(){S(this,"config");this.config=this.loadConfiguration(),this.validateConfiguration()}static getInstance(){return G.instance||(G.instance=new G),G.instance}loadConfiguration(){const i=this.getStoredConfig();return{apiKey:(i==null?void 0:i.apiKey)||null,apiSecret:(i==null?void 0:i.apiSecret)||null,forceMockMode:(i==null?void 0:i.forceMockMode)??!1,isProduction:!0,wsUrl:"wss://ws.poloniex.com/ws/public",apiUrl:"https://api.poloniex.com",liveTradingEnabled:!1}}getStoredConfig(){try{const e=localStorage.getItem("poloniex_config");return e?JSON.parse(e):null}catch{return null}}validateConfiguration(){const{apiKey:e,apiSecret:n,forceMockMode:s}=this.config,i=!!(e&&n&&e.length>10&&n.length>10),r=s===!0;this.config.liveTradingEnabled=i&&!r,!i&&!r&&console.warn("API credentials missing or invalid. Running in MOCK mode.",`
To enable live trading:`,`
1. Set VITE_POLONIEX_API_KEY and VITE_POLONIEX_API_SECRET in .env`,`
2. Ensure VITE_FORCE_MOCK_MODE is not set to "true"`),i&&r&&console.warn("Valid API credentials found but VITE_FORCE_MOCK_MODE is enabled.",`
To enable live trading, set VITE_FORCE_MOCK_MODE=false`)}getConfig(){return{...this.config}}isLiveTradingEnabled(){return this.config.liveTradingEnabled}isMockMode(){return!this.config.liveTradingEnabled}updateConfig(e){this.config={...this.config,...e},this.validateConfiguration(),localStorage.setItem("poloniex_config",JSON.stringify({apiKey:this.config.apiKey,apiSecret:this.config.apiSecret,forceMockMode:this.config.forceMockMode})),window.dispatchEvent(new CustomEvent("config-updated",{detail:this.config}))}clearStoredConfig(){localStorage.removeItem("poloniex_config"),this.config=this.loadConfiguration(),this.validateConfiguration()}};S(G,"instance");let ye=G;const Un=()=>{const[t,e]=l.useState(ye.getInstance().getConfig()),[n,s]=l.useState(!0);if(l.useEffect(()=>{const d=f=>{e(f.detail)};return window.addEventListener("config-updated",d),()=>window.removeEventListener("config-updated",d)},[]),!t||!n)return null;const r=t.liveTradingEnabled?{type:"success",icon:pt,title:"Live Trading Mode",message:"Connected with valid credentials",details:["API credentials configured","Real trading enabled"]}:{type:"warning",icon:Ve,title:"Demo Mode Active",message:"Using simulated trading data",details:[...!t.apiKey||!t.apiSecret?["Missing API credentials"]:[],...t.forceMockMode?["Force mock mode enabled"]:[],"No real trades will be executed"]},a=r.icon,c=r.type==="warning"?"bg-yellow-50":"bg-green-50",u=r.type==="warning"?"border-yellow-200":"border-green-200",m=r.type==="warning"?"text-yellow-800":"text-green-800",h=r.type==="warning"?"text-yellow-600":"text-green-600";return o.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:o.jsxs("div",{className:`${c} ${u} border rounded-lg p-4 shadow-lg`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(a,{className:`w-5 h-5 ${h} mt-0.5`}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:`text-sm font-medium ${m}`,children:r.title}),o.jsx("p",{className:`text-xs ${m} mt-1`,children:r.message}),r.details.length>0&&o.jsx("ul",{className:`text-xs ${m} mt-2 space-y-1`,children:r.details.map((d,f)=>o.jsxs("li",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"w-1 h-1 bg-current rounded-full"}),o.jsx("span",{children:d})]},f))})]})]}),o.jsx("button",{onClick:()=>s(!1),className:`${m} hover:opacity-70 transition-opacity`,children:o.jsx(ue,{className:"w-4 h-4"})})]}),!t.isProduction&&o.jsx("div",{className:"mt-3 pt-3 border-t border-current border-opacity-20",children:o.jsxs("details",{className:`text-xs ${m}`,children:[o.jsx("summary",{className:"cursor-pointer font-medium",children:"Debug Info"}),o.jsxs("div",{className:"mt-2 space-y-1 font-mono text-xs",children:[o.jsxs("div",{children:["Environment: ",t.isProduction?"Production":"Development"]}),o.jsxs("div",{children:["WebSocket URL: ",t.wsUrl]}),o.jsxs("div",{children:["Has API Key: ",t.apiKey?"Yes":"No"]}),o.jsxs("div",{children:["Has API Secret: ",t.apiSecret?"Yes":"No"]}),o.jsxs("div",{children:["Force Mock: ",t.forceMockMode?"Yes":"No"]}),o.jsxs("div",{children:["Live Trading: ",t.liveTradingEnabled?"Yes":"No"]})]})]})})]})})},zn=(t,e,n=3e4)=>{const s=l.useRef();l.useEffect(()=>{const i=()=>{document.hidden?s.current=setTimeout(()=>{e()},n):(s.current&&(clearTimeout(s.current),s.current=void 0),t())};return document.addEventListener("visibilitychange",i),()=>{document.removeEventListener("visibilitychange",i),s.current&&clearTimeout(s.current)}},[t,e,n])},Pt=l.createContext(null),Fn=({children:t})=>{const[e,n]=te.useState({isConnected:!1,connectionState:"disconnected",lastError:null,connectionHealth:{isHealthy:!1,uptime:0,latency:null,reconnectAttempts:0}});return zn(()=>{y.handlePageVisibilityChange(!0)},()=>{y.handlePageVisibilityChange(!1)},3e4),l.useEffect(()=>{const s=a=>{n(c=>({...c,connectionState:a,isConnected:a==="connected"}))},i=a=>{n(c=>({...c,lastError:a instanceof Error?a.message:"Unknown error"}))};y.on("connectionStateChanged",s),y.on("error",i),y.connect().catch(console.error);const r=setInterval(()=>{const a=y.getConnectionHealth();n(c=>({...c,connectionHealth:{isHealthy:a.isHealthy,uptime:a.uptime,latency:a.latency,reconnectAttempts:a.reconnectAttempts}}))},5e3);return()=>{clearInterval(r),y.off("connectionStateChanged",s),y.off("error",i),y.disconnect()}},[]),o.jsx(Pt.Provider,{value:e,children:t})},Bn=()=>{const t=l.useContext(Pt);if(!t)throw new Error("useWebSocket must be used within a WebSocketProvider");return t},Wn=({className:t=""})=>{const e=Bn(),[n,s]=l.useState(!1),i=()=>e.isConnected?{icon:Ft,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",status:"Connected",description:"Real-time data active"}:e.connectionState==="connecting"||e.connectionState==="reconnecting"?{icon:Bt,color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",status:"Connecting",description:"Establishing connection..."}:{icon:Wt,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",status:"Disconnected",description:"Using mock data"},r=m=>m<6e4?`${Math.floor(m/1e3)}s`:m<36e5?`${Math.floor(m/6e4)}m`:`${Math.floor(m/36e5)}h ${Math.floor(m%36e5/6e4)}m`,a=m=>m===null?"N/A":`${Math.round(m)}ms`,c=i(),u=c.icon;return o.jsx("div",{className:`fixed bottom-4 right-4 z-40 ${t}`,children:o.jsxs("div",{className:`${c.bgColor} ${c.borderColor} border rounded-lg shadow-lg transition-all duration-200`,children:[o.jsxs("div",{className:`p-3 cursor-pointer flex items-center space-x-2 ${n?"border-b border-current border-opacity-20":""}`,onClick:()=>s(!n),children:[o.jsx(u,{className:`w-4 h-4 ${c.color}`}),o.jsx("span",{className:`text-sm font-medium ${c.color}`,children:c.status}),o.jsx("div",{className:`w-2 h-2 rounded-full ${e.isConnected?"bg-green-500":"bg-red-500"} animate-pulse`})]}),n&&o.jsx("div",{className:`p-3 text-xs ${c.color}`,children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Status:"}),o.jsx("span",{className:"font-medium",children:c.description})]}),e.isConnected&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Uptime:"}),o.jsx("span",{className:"font-mono",children:r(e.connectionHealth.uptime)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Latency:"}),o.jsx("span",{className:"font-mono",children:a(e.connectionHealth.latency)})]})]}),e.connectionHealth.reconnectAttempts>0&&o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Reconnects:"}),o.jsx("span",{className:"font-mono",children:e.connectionHealth.reconnectAttempts})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"State:"}),o.jsx("span",{className:"font-mono capitalize",children:e.connectionState})]}),e.lastError&&o.jsx("div",{className:"pt-2 border-t border-current border-opacity-20",children:o.jsxs("div",{className:"flex items-start space-x-1",children:[o.jsx(gt,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-xs break-all",children:e.lastError})]})})]})})]})})},Kn=()=>{const[t,e]=l.useState(ye.getInstance().getConfig()),[n,s]=l.useState(!1),[i,r]=l.useState(!0);if(l.useEffect(()=>{const c=u=>{e(u.detail)};return window.addEventListener("config-updated",c),()=>window.removeEventListener("config-updated",c)},[]),!i)return null;const a=t.liveTradingEnabled;return o.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:o.jsxs("div",{className:`
        ${a?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}
        border rounded-lg p-4 shadow-lg
      `,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`
              px-3 py-1 rounded-full text-sm font-medium flex items-center gap-2
              ${a?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}
            `,children:[a?o.jsx(pt,{className:"w-4 h-4"}):o.jsx(Ve,{className:"w-4 h-4"}),a?"LIVE TRADING":"MOCK MODE"]}),o.jsx("button",{onClick:()=>s(!n),className:`
                p-1 rounded-full hover:bg-opacity-20 transition-colors
                ${a?"hover:bg-green-600":"hover:bg-yellow-600"}
              `,title:"Configuration Settings",children:o.jsx(He,{className:"w-4 h-4"})})]}),o.jsx("button",{onClick:()=>r(!1),className:`
              p-1 rounded-full hover:bg-opacity-20 transition-colors
              ${a?"text-green-600 hover:bg-green-600":"text-yellow-600 hover:bg-yellow-600"}
            `,children:o.jsx(ue,{className:"w-4 h-4"})})]}),n&&o.jsxs("div",{className:`
            mt-4 p-3 rounded-lg text-sm
            ${a?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}
          `,children:[o.jsx("div",{className:"font-medium mb-2",children:"Configuration Status"}),o.jsxs("div",{className:"space-y-1 text-xs",children:[o.jsxs("div",{children:["Mode: ",a?"Live Trading":"Mock Trading"]}),o.jsxs("div",{children:["API Key: ",t.apiKey?" Configured":" Missing"]}),o.jsxs("div",{children:["API Secret: ",t.apiSecret?" Configured":" Missing"]}),o.jsxs("div",{children:["Force Mock: ",t.forceMockMode?"Yes":"No"]}),o.jsxs("div",{children:["Environment: ",t.isProduction?"Production":"Development"]})]}),!a&&o.jsxs("div",{className:"mt-2 p-2 bg-yellow-200 rounded text-xs",children:[o.jsx("strong",{children:"To enable live trading:"}),o.jsx("br",{}),"1. Set VITE_POLONIEX_API_KEY and VITE_POLONIEX_SECRET",o.jsx("br",{}),'2. Ensure VITE_FORCE_MOCK_MODE is not set to "true"']})]})]})})},$n=()=>{const[t,e]=l.useState(!0),[n,s]=l.useState(!1);l.useEffect(()=>{const d=localStorage.getItem("envDebug_dismissed")==="true",f=localStorage.getItem("envDebug_minimized")==="true";e(!d),s(f)},[]);const i=()=>{e(!1),localStorage.setItem("envDebug_dismissed","true")},r=()=>{const d=!n;s(d),localStorage.setItem("envDebug_minimized",d.toString())},a=()=>{e(!0),localStorage.setItem("envDebug_dismissed","false")};if(!t)return o.jsx("button",{onClick:a,style:{position:"fixed",top:"10px",right:"10px",background:"#4a90e2",color:"#fff",border:"none",borderRadius:"4px",padding:"5px 8px",fontSize:"11px",cursor:"pointer",zIndex:9999,opacity:.7},title:"Show environment debug info",children:""});const c={API_KEY:void 0,API_SECRET:void 0,API_URL:void 0,WS_URL:void 0,FORCE_MOCK:void 0,NODE_ENV:"production",IS_PROD:!0},u=!1,m=c.FORCE_MOCK==="true",h=u;return o.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",background:"#1a1a1a",color:"#fff",padding:n?"10px":"15px",borderRadius:"8px",fontSize:"12px",zIndex:9999,maxWidth:n?"200px":"400px",border:"1px solid #333",transition:"all 0.3s ease"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:n?"0":"10px"},children:[o.jsx("h3",{style:{margin:"0",color:"#4a90e2",fontSize:n?"11px":"12px"},children:" Environment Debug"}),o.jsxs("div",{style:{display:"flex",gap:"5px"},children:[o.jsx("button",{onClick:r,style:{background:"transparent",border:"none",color:"#ccc",cursor:"pointer",padding:"2px 5px",fontSize:"12px"},title:n?"Expand":"Minimize",children:n?"":""}),o.jsx("button",{onClick:i,style:{background:"transparent",border:"none",color:"#ccc",cursor:"pointer",padding:"2px 5px",fontSize:"12px"},title:"Dismiss",children:""})]})]}),!n&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{marginBottom:"10px"},children:[o.jsx("strong",{children:"Mode: "}),o.jsx("span",{style:{color:"#ff9800"},children:" MOCK"})]}),o.jsxs("div",{style:{marginBottom:"10px"},children:[o.jsx("strong",{children:"Why Mock Mode?"}),o.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[o.jsx("li",{style:{color:"#ff5252"},children:"No API Key"}),o.jsx("li",{style:{color:"#ff5252"},children:"No API Secret"}),m,h]})]}),o.jsxs("details",{children:[o.jsx("summary",{style:{cursor:"pointer",marginBottom:"10px"},children:"Environment Variables"}),o.jsx("pre",{style:{background:"#0a0a0a",padding:"10px",borderRadius:"4px",overflow:"auto",fontSize:"11px"},children:Object.entries(c).map(([d,f])=>{const p=d.includes("SECRET")&&f?f.substring(0,10)+"...":f||"NOT SET";return`${d}: ${p}
`}).join("")})]}),o.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"10px",padding:"5px 10px",background:"#4a90e2",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]}),n&&o.jsxs("div",{style:{fontSize:"10px",color:"#ccc"},children:["Mode: ",o.jsx("span",{style:{color:"#ff9800"},children:"MOCK"})]})]})},Hn=()=>{const[t,e]=l.useState("checking"),[n,s]=l.useState("checking"),[i,r]=l.useState(null),[a,c]=l.useState(!0),u=l.useRef(!1),m=l.useRef(!1),h=l.useRef({api:0,ws:0}),d=Ee(w=>w.addToast),f="http://localhost:3000",p="ws://localhost:3000";l.useEffect(()=>{(async()=>{try{const T=await fetch(`${f}/api/health`,{method:"GET",headers:{Accept:"application/json"},mode:"cors"});if(!T.ok)throw new Error(`HTTP ${T.status}: ${T.statusText}`);const v=await T.json();e("connected"),r(v),u.current=!1}catch(T){const v=T,j=Date.now();!u.current||j-h.current.api>3e4?(v.message.includes("CORS")||v.message.includes("Failed to fetch")?(e("cors-blocked"),d({message:"Backend API unavailable - using mock data (expected in development)",type:"warning",dismissible:!0})):(e("failed"),d({message:`API connection failed: ${v.message}`,type:"error",dismissible:!0})),u.current=!0,h.current.api=j):v.message.includes("CORS")||v.message.includes("Failed to fetch")?e("cors-blocked"):e("failed")}})();const k=St(p,{transports:["websocket","polling"],reconnectionAttempts:3,timeout:5e3});return k.on("connect",()=>{s("connected"),m.current=!1}),k.on("connect_error",T=>{const v=Date.now();(!m.current||v-h.current.ws>3e4)&&(T.message.includes("WebSocket is closed before the connection is established")?d({message:"WebSocket unavailable - using mock data (expected in development)",type:"warning",dismissible:!0}):d({message:`WebSocket error: ${T.message}`,type:"error",dismissible:!0}),m.current=!0,h.current.ws=v),s("failed")}),()=>{k.disconnect()}},[f,p,d]);const E=w=>{switch(w){case"connected":return"#4caf50";case"failed":return"#f44336";case"cors-blocked":return"#ff9800";default:return"#ff9800"}},g=w=>{switch(w){case"connected":return"CONNECTED";case"failed":return"FAILED";case"cors-blocked":return"CORS BLOCKED";case"checking":return"CHECKING";default:return w.toUpperCase()}};return o.jsxs(o.Fragment,{children:[a&&o.jsxs("div",{style:{position:"fixed",top:"10px",left:"10px",background:"#1a1a1a",color:"#fff",padding:"15px",borderRadius:"8px",fontSize:"12px",zIndex:9999,maxWidth:"350px",border:"1px solid #333"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[o.jsx("h3",{style:{margin:"0 0 5px 0",color:"#4a90e2"},children:" Connection Status"}),o.jsx("button",{onClick:()=>c(!1),style:{background:"none",border:"none",color:"#999",cursor:"pointer",fontSize:"16px",padding:"0",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Hide connection status",children:""})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsx("span",{children:"API Connection:"}),o.jsx("span",{style:{color:E(t),fontWeight:"bold"},children:g(t)})]}),o.jsx("div",{style:{fontSize:"12px",color:"#888"},children:f}),i&&o.jsx("pre",{style:{background:"#0a0a0a",padding:"8px",borderRadius:"4px",fontSize:"11px",marginTop:"8px"},children:JSON.stringify(i,null,2)})]}),o.jsxs("div",{style:{marginBottom:"15px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsx("span",{children:"WebSocket:"}),o.jsx("span",{style:{color:E(n),fontWeight:"bold"},children:g(n)})]}),o.jsx("div",{style:{fontSize:"12px",color:"#888"},children:p})]}),o.jsx("button",{onClick:()=>window.location.reload(),style:{width:"100%",padding:"8px",background:"#4a90e2",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Refresh"})]}),!a&&o.jsx("button",{onClick:()=>c(!0),style:{position:"fixed",top:"10px",left:"10px",background:"#1a1a1a",color:"#4a90e2",border:"1px solid #333",borderRadius:"4px",padding:"8px 12px",cursor:"pointer",fontSize:"12px",zIndex:9999},title:"Show connection status",children:" Status"})]})},Vn=()=>{const[t,e]=l.useState(null),[n,s]=l.useState(!1),[i,r]=l.useState(!1);l.useEffect(()=>{const u=localStorage.getItem("pwa_install_dismissed")==="true",m=window.matchMedia("(display-mode: standalone)").matches,h=window.navigator.standalone===!0;if(u||(m||h))return;const f=E=>{E.preventDefault(),e(E),r(!0),setTimeout(()=>{s(!0)},5e3)},p=()=>{console.log("PWA: App was installed"),s(!1),e(null),r(!1)};return window.addEventListener("beforeinstallprompt",f),window.addEventListener("appinstalled",p),()=>{window.removeEventListener("beforeinstallprompt",f),window.removeEventListener("appinstalled",p)}},[]);const a=async()=>{if(t)try{await t.prompt(),(await t.userChoice).outcome==="accepted"?console.log("PWA: User accepted the install prompt"):console.log("PWA: User dismissed the install prompt"),e(null),s(!1)}catch(u){console.error("PWA: Error during installation:",u)}},c=()=>{s(!1),localStorage.setItem("pwa_install_dismissed","true")};return!n||!i?null:o.jsxs("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 animate-in slide-in-from-bottom duration-300",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Kt,{className:"h-6 w-6 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Install Poloniex Trading"}),o.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Add to your home screen for quick access and offline support"})]})]}),o.jsx("button",{onClick:c,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":"Dismiss install prompt",children:o.jsx(ue,{className:"h-4 w-4"})})]}),o.jsxs("div",{className:"mt-3 flex space-x-2",children:[o.jsx("button",{onClick:a,className:"flex-1 bg-blue-600 text-white text-sm font-medium py-2 px-3 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:"Install"}),o.jsx("button",{onClick:c,className:"flex-1 bg-gray-100 text-gray-700 text-sm font-medium py-2 px-3 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",children:"Not now"})]})]})},Gn=(t,e)=>{const n=xt(),[s,i]=l.useState(5);return l.useEffect(()=>{var c,u,m;if(((c=e==null?void 0:e.message)==null?void 0:c.includes("Failed to load"))||((u=e==null?void 0:e.message)==null?void 0:u.includes("chunk"))||((m=e==null?void 0:e.message)==null?void 0:m.includes("route"))){const h=setInterval(()=>{i(d=>d<=1?(clearInterval(h),n("/dashboard"),0):d-1)},1e3);return()=>clearInterval(h)}},[t,e,n]),{countdown:s,navigateToDashboard:()=>{n("/dashboard")}}},Jn=({error:t,errorCount:e,onReset:n})=>{var u;const{countdown:s,navigateToDashboard:i}=Gn(!0,t),[r,a]=l.useState(!1),c=e>3||((u=t==null?void 0:t.message)==null?void 0:u.includes("critical"));return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-lg w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:o.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:c?"Critical Error":"Something went wrong"}),o.jsx("p",{className:"text-gray-600 mb-4",children:c?"A critical error has occurred. Please refresh the page or contact support.":"Don't worry, we're working on fixing this issue."})]}),t&&o.jsxs("div",{className:"mb-4 text-left",children:[o.jsxs("button",{onClick:()=>a(!r),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:[r?"Hide":"Show"," Error Details"]}),r&&o.jsxs("div",{className:"mt-2 p-3 bg-gray-100 rounded text-sm text-gray-700",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Error:"})," ",t.message]}),t.stack&&o.jsxs("details",{className:"mt-2",children:[o.jsx("summary",{className:"cursor-pointer text-gray-600",children:"Stack Trace"}),o.jsx("pre",{className:"mt-1 text-xs whitespace-pre-wrap break-all",children:t.stack})]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[o.jsx("button",{onClick:n,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Try Again"}),o.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors",children:"Go to Dashboard"})]}),s>0&&o.jsxs("p",{className:"mt-4 text-sm text-gray-500",children:["Automatically redirecting to dashboard in ",s," seconds..."]}),e>1&&o.jsxs("p",{className:"mt-2 text-sm text-orange-600",children:["Error occurred ",e," times"]})]})})};class qn extends l.Component{constructor(n){super(n);S(this,"resetTimeoutId",null);S(this,"logError",(n,s)=>{console.error("ErrorBoundary caught an error:",n),console.error("Error info:",s),this.isInitializationError(n)&&console.error("Initialization error detected - this may require a page refresh")});S(this,"isInitializationError",n=>{const s=n.message||"";return s.includes("Cannot access")&&s.includes("before initialization")||s.includes("temporal dead zone")||s.includes("ReferenceError")||s.includes("185")||s.includes("Maximum update depth exceeded")||s.includes("infinite")||s.includes("hydration")||s.includes("Text content does not match server-rendered HTML")||s.includes("Hydration failed")});S(this,"handleReset",()=>{this.resetTimeoutId&&(clearTimeout(this.resetTimeoutId),this.resetTimeoutId=null),this.setState({hasError:!1,error:null,errorInfo:null,errorId:""})});this.state={hasError:!1,error:null,errorInfo:null,errorCount:0,errorId:""}}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorId:`error-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}componentDidCatch(n,s){this.setState(i=>({errorInfo:s,errorCount:i.errorCount+1})),this.logError(n,s),this.state.errorCount<3&&!this.isInitializationError(n)&&(this.resetTimeoutId=window.setTimeout(()=>{this.handleReset()},3e4))}componentWillUnmount(){this.resetTimeoutId&&clearTimeout(this.resetTimeoutId)}render(){if(this.state.hasError){const n=this.props.fallback||Jn;return o.jsx(n,{error:this.state.error,errorCount:this.state.errorCount,onReset:this.handleReset})}return this.props.children}}const Xn=()=>{const{apiKey:t,apiSecret:e}=Ge(),[n,s]=l.useState(!1),i=l.useCallback(r=>{if(r.source!==window||!r.data||r.data.source!=="POLONIEX_EXTENSION")return;const a=r.data;switch(console.log("Received message from extension:",a),a.type){case"PLACE_ORDER":console.log("Order received from extension:",a.data);break;case"GET_ACCOUNT_DATA":console.log("Account data requested from extension");break;default:console.log("Unknown message type:",a.type)}},[]);return l.useEffect(()=>{try{window.chrome&&chrome.runtime&&chrome.runtime.sendMessage&&chrome.runtime.sendMessage("jcdmopolmojdhpclfbemdpcdneobmnje",{type:"CHECK_INSTALLATION"},a=>{a&&a.installed?(s(!0),console.log("Extension is installed and connected!")):(s(!1),console.log("Extension is not installed or not responding"))})}catch(r){console.log("Error checking extension installation:",r),s(!1)}return window.addEventListener("message",i),()=>{window.removeEventListener("message",i)}},[i]),l.useEffect(()=>{n&&t&&e&&window.chrome&&chrome.runtime&&chrome.runtime.sendMessage&&chrome.runtime.sendMessage("jcdmopolmojdhpclfbemdpcdneobmnje",{type:"UPDATE_CREDENTIALS",data:{apiKey:t,apiSecret:e}},a=>{a&&a.success&&console.log("API credentials updated in extension")})},[n,t,e]),null},Yn=()=>{const t=Ee(a=>a.toasts),e=Ee(a=>a.removeToast),n=l.useRef(new Map),s=l.useCallback(a=>{const c=n.current.get(a);c&&clearTimeout(c);const u=setTimeout(()=>{e(a),n.current.delete(a)},5e3);n.current.set(a,u)},[e]);l.useEffect(()=>{t.forEach(c=>{c.dismissible!==!1&&!n.current.has(c.id)&&s(c.id)});const a=new Set(t.map(c=>c.id));n.current.forEach((c,u)=>{a.has(u)||(clearTimeout(c),n.current.delete(u))})},[t.length,s]),l.useEffect(()=>()=>{n.current.forEach(a=>clearTimeout(a)),n.current.clear()},[]);const i=a=>{switch(a){case"success":return o.jsx(Ht,{className:"w-5 h-5 text-green-500"});case"error":return o.jsx(gt,{className:"w-5 h-5 text-red-500"});case"warning":return o.jsx(Ve,{className:"w-5 h-5 text-yellow-500"});case"info":default:return o.jsx($t,{className:"w-5 h-5 text-blue-500"})}},r=a=>{const c="relative flex items-center p-4 mb-3 rounded-lg shadow-lg border transition-all duration-300 max-w-md";switch(a){case"success":return me(c,"bg-green-50 border-green-200 text-green-800");case"error":return me(c,"bg-red-50 border-red-200 text-red-800");case"warning":return me(c,"bg-yellow-50 border-yellow-200 text-yellow-800");case"info":default:return me(c,"bg-blue-50 border-blue-200 text-blue-800")}};return t.length===0?null:o.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(a=>o.jsxs("div",{className:r(a.type),children:[o.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[i(a.type),o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:"text-sm font-medium",children:a.message})})]}),a.dismissible!==!1&&o.jsx("button",{onClick:()=>e(a.id),className:"ml-3 flex-shrink-0 p-1 rounded-full hover:bg-gray-200 transition-colors","aria-label":"Dismiss notification",children:o.jsx(ue,{className:"w-4 h-4"})})]},a.id))})},Qn=({children:t})=>{const e=We(),n=xt();return l.useEffect(()=>{sessionStorage.setItem("lastRoute",e.pathname),!["/","/strategies","/charts","/performance","/account","/chat","/settings","/extension"].includes(e.pathname)&&e.pathname!=="/404"&&n("/404",{replace:!0})},[e.pathname,n]),o.jsx(o.Fragment,{children:t})},J=class J{constructor(){S(this,"errorCount",0);S(this,"maxErrors",10);S(this,"suppressErrors",!1);this.setupErrorInterceptor()}static getInstance(){return J.instance||(J.instance=new J),J.instance}setupErrorInterceptor(){const e=console.error;console.error=(...n)=>{var i;const s=((i=n[0])==null?void 0:i.toString())||"";if(!(this.isExtensionError(s)&&(this.handleExtensionError(s),this.suppressErrors||this.errorCount>this.maxErrors))){if(this.isReactProductionError(s)){this.handleExtensionError(s);return}e.apply(console,n)}},window.addEventListener("unhandledrejection",n=>{var s;this.isExtensionError(((s=n.reason)==null?void 0:s.toString())||"")&&(n.preventDefault(),this.handleExtensionError(n.reason))})}isExtensionError(e){return["listener indicated an asynchronous response","message channel closed","Extension context invalidated","Receiving end does not exist","Could not establish connection","chrome-extension"].some(s=>e.toLowerCase().includes(s.toLowerCase()))}isReactProductionError(e){return["Minified React error #185","visit https://react.dev/errors/185","use the non-minified dev environment for full errors"].some(s=>e.toLowerCase().includes(s.toLowerCase()))}handleExtensionError(e){this.errorCount++;const n=typeof e=="string"?e:e.message||e.toString();if(this.isReactProductionError(n)){console.warn("React Error #185 detected: This is likely caused by maximum update depth exceeded. Check for infinite re-renders in component state updates or useEffect dependencies."),console.warn("Initialization error detected - this may require a page refresh");return}(this.errorCount===1||this.errorCount%10===0)&&console.warn(`Browser extension communication error (${this.errorCount} occurrences). This is likely caused by a browser extension and can be safely ignored.`),this.errorCount>this.maxErrors*2&&(this.suppressErrors=!0,console.warn("Suppressing further extension errors to reduce console noise."))}reset(){this.errorCount=0,this.suppressErrors=!1}};S(J,"instance");let Be=J;class Zn{static isExtensionInstalled(e){var n,s;if(e&&(chrome!=null&&chrome.runtime))try{chrome.runtime.sendMessage(e,{ping:!0},()=>!chrome.runtime.lastError)}catch{return!1}return!!((n=window.chrome)!=null&&n.runtime||(s=window.browser)!=null&&s.runtime)}static detectConflictingExtensions(){const e=[];return[{name:"MetaMask",check:()=>!!window.ethereum},{name:"AdBlock",check:()=>!!window.adblockDetected},{name:"React DevTools",check:()=>!!window.__REACT_DEVTOOLS_GLOBAL_HOOK__}].forEach(s=>{s.check()&&e.push(s.name)}),e}static setupExtensionCompatibility(){Be.getInstance();const e=this.detectConflictingExtensions();e.length>0&&console.info(`Detected browser extensions: ${e.join(", ")}. Some console errors may appear due to extension communication.`),this.protectMessageChannels()}static protectMessageChannels(){const e=window.postMessage;window.postMessage=function(...n){try{return e.apply(window,n)}catch(s){if(s!=null&&s.toString().includes("message channel closed"))return;throw s}}}}const es=l.lazy(()=>R(()=>import("./Dashboard-B3KufttE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),ts=l.lazy(()=>R(()=>import("./LiveTradingDashboard-D922YQXM.js"),__vite__mapDeps([9,1,2,3,7,8,10,5,6]),import.meta.url)),ns=l.lazy(()=>R(()=>import("./Strategies-D7j36S5d.js"),__vite__mapDeps([11,1,2,3,4,12,7,8]),import.meta.url)),ss=l.lazy(()=>R(()=>import("./Backtesting-DCVyi-Ve.js"),__vite__mapDeps([13,1,2,3,12,7,8]),import.meta.url)),os=l.lazy(()=>R(()=>import("./Account-CdD4l8Gt.js"),__vite__mapDeps([14,1,2,3,6,7,8]),import.meta.url)),is=l.lazy(()=>R(()=>import("./TransactionHistory-ZXUL7fnR.js"),__vite__mapDeps([15,1,2,3]),import.meta.url)),rs=l.lazy(()=>R(()=>import("./TradeHistory-C9itp1K4.js"),__vite__mapDeps([16,1,2,3]),import.meta.url)),as=l.lazy(()=>R(()=>import("./MarketAnalysis-EUtPDXJ9.js"),__vite__mapDeps([17,1,2,3,4,6,7,8]),import.meta.url)),cs=l.lazy(()=>R(()=>import("./Performance-DPalqm9O.js"),__vite__mapDeps([18,1,2,3,8]),import.meta.url)),ls=l.lazy(()=>R(()=>import("./Settings-Dq0a8jsy.js"),__vite__mapDeps([19,1,2,3,7,8]),import.meta.url)),ds=l.lazy(()=>R(()=>import("./Chat-8W-4CWKU.js"),__vite__mapDeps([20,1,2,3]),import.meta.url)),us=l.lazy(()=>R(()=>import("./ExtensionDownload-BXG43aZv.js"),__vite__mapDeps([21,1,2,3,7,8]),import.meta.url)),ct=l.lazy(()=>R(()=>import("./NotFound-D9Dwe4IF.js"),__vite__mapDeps([22,1,2,3]),import.meta.url)),hs=()=>o.jsxs("div",{className:"flex items-center justify-center min-h-screen",role:"status","aria-label":"Loading application",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600","aria-hidden":"true"}),o.jsx("span",{className:"sr-only",children:"Loading..."})]});function ms(){return l.useEffect(()=>{Zn.setupExtensionCompatibility()},[]),o.jsxs(o.Fragment,{children:[o.jsx(Ln,{}),o.jsx(Vt,{children:o.jsx(qn,{children:o.jsx(en,{children:o.jsx(Fn,{children:o.jsxs(Mn,{children:[o.jsxs("div",{className:"flex h-screen bg-neutral-100 overflow-hidden",children:[o.jsx(On,{}),o.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[o.jsx(nn,{}),o.jsx("main",{id:"main-content",className:"flex-1 overflow-y-auto bg-neutral-100 p-4 sm:p-6 lg:p-8",role:"main","aria-label":"Main content",tabIndex:-1,children:o.jsx(Qn,{children:o.jsx(l.Suspense,{fallback:o.jsx(hs,{}),children:o.jsxs(Gt,{children:[o.jsx(I,{path:"/",element:o.jsx(es,{})}),o.jsx(I,{path:"/dashboard/live",element:o.jsx(ts,{})}),o.jsx(I,{path:"/strategies",element:o.jsx(ns,{})}),o.jsx(I,{path:"/backtesting",element:o.jsx(ss,{})}),o.jsx(I,{path:"/charts",element:o.jsx(as,{})}),o.jsx(I,{path:"/performance",element:o.jsx(cs,{})}),o.jsx(I,{path:"/account",element:o.jsx(os,{})}),o.jsx(I,{path:"/transactions",element:o.jsx(is,{})}),o.jsx(I,{path:"/trades",element:o.jsx(rs,{})}),o.jsx(I,{path:"/chat",element:o.jsx(ds,{})}),o.jsx(I,{path:"/settings",element:o.jsx(ls,{})}),o.jsx(I,{path:"/extension",element:o.jsx(us,{})}),o.jsx(I,{path:"/404",element:o.jsx(ct,{})}),o.jsx(I,{path:"*",element:o.jsx(ct,{})})]})})})})]})]}),o.jsx(Xn,{}),o.jsx(Yn,{}),o.jsx(Un,{}),o.jsx(Kn,{}),o.jsx(Wn,{}),o.jsx($n,{}),o.jsx(Hn,{}),o.jsx(Vn,{})]})})})})})]})}Jt.createRoot(document.getElementById("root")).render(o.jsx(l.StrictMode,{children:o.jsx(ms,{})}));export{ae as S,ys as a,Es as b,Ge as c,Nn as d,K as m,Z as p,Rn as u};
//# sourceMappingURL=index-CF9_aBFn.js.map
