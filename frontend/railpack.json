{
<<<<<<< Updated upstream
  "version": "1",
  "build": {
    "provider": "node",
    "steps": {
      "install": {
        "commands": ["yarn install --immutable"]
      },
      "copyShared": {
        "commands": [
          "rm -rf ./src/shared",
          "mkdir -p ./src/shared/types ./src/shared/middleware",
          "cp ../shared/types/*.ts ./src/shared/types/ || echo 'No shared types'",
          "cp ../shared/*.ts ./src/shared/ || echo 'No shared index'",
          "cp -r ../shared/middleware ./src/shared/ || echo 'No shared middleware'"
        ],
        "dependsOn": ["install"]
      },
      "build": {
        "commands": ["yarn build:railway"],
        "dependsOn": ["copyShared"]
      }
=======
  "$schema": "https://schema.railpack.com",
  "provider": "node",
  "steps": {
    "install": {
      "commands": [
        "bash -lc 'corepack enable'",
        "bash -lc 'corepack prepare yarn@4.9.2 --activate'",
        "yarn install --immutable"
      ]
    },
    "copyShared": {
      "inputs": [
        {
          "step": "install",
          "include": [
            "."
          ]
        }
      ],
      "commands": [
        "rm -rf ./src/shared",
        "mkdir -p ./src/shared/types ./src/shared/middleware",
        "cp ../shared/types/*.ts ./src/shared/types/ || echo 'No shared types'",
        "cp ../shared/*.ts ./src/shared/ || echo 'No shared index'",
        "cp -r ../shared/middleware ./src/shared/ || echo 'No shared middleware'"
      ]
    },
    "build": {
      "inputs": [
        {
          "step": "copyShared",
          "include": [
            "."
          ]
        }
      ],
      "commands": [
        "yarn build:railway"
      ]
>>>>>>> Stashed changes
    }
  },
  "deploy": {
    "startCommand": "node frontend/serve.js",
    "healthCheckPath": "/healthz",
    "healthCheckTimeout": 300
  }
}