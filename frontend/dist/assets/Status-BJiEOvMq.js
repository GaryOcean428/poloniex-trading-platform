import{r as l,j as e,v as i,s as y,f as S,E as k,au as E,a7 as C,W as L,A as D,av as n,aw as I,I as b}from"./vendor-DsQnMDHq.js";import{l as M}from"./index-CKZf6eLu.js";import"./crypto-CVBDpkJt.js";import"./chartjs-DvSMsvNv.js";import"./utils-BDAWB_4D.js";import"./recharts-C046zHnu.js";import"./ui-D6B6e0vX.js";const F=()=>{const[t,f]=l.useState(null),[N,x]=l.useState(!0),[m,c]=l.useState(null),[h,u]=l.useState(new Set);l.useEffect(()=>{const s=localStorage.getItem("dismissedStatusNotifications");s&&u(new Set(JSON.parse(s))),d()},[]);const d=async()=>{try{x(!0);const s=await fetch("/api/status");if(!s.ok){const r=s.status===404?"Status endpoint not found":`Server error: ${s.status} ${s.statusText}`;throw new Error(r)}const a=await s.json();f(a),c(null)}catch(s){s instanceof TypeError&&s.message.includes("fetch")?c("Network connection failed - check if server is running"):c(s instanceof Error?s.message:"Unknown error")}finally{x(!1)}},g=s=>{const a=new Set(h);a.add(s),u(a);try{localStorage.setItem("dismissedStatusNotifications",JSON.stringify([...a]))}catch(r){M.warn("Failed to save dismissed notifications to localStorage",{component:"Status",action:"dismiss_notification",errorMessage:r instanceof Error?r.message:String(r)})}},o=s=>{switch(s){case"healthy":return e.jsx(n,{className:"w-5 h-5 text-green-600"});case"warning":return e.jsx(i,{className:"w-5 h-5 text-yellow-600"});case"error":return e.jsx(i,{className:"w-5 h-5 text-red-600"});default:return e.jsx(b,{className:"w-5 h-5 text-text-secondary"})}},p=s=>{switch(s){case"success":return e.jsx(n,{className:"w-5 h-5 text-green-600"});case"warning":return e.jsx(i,{className:"w-5 h-5 text-yellow-600"});case"error":return e.jsx(i,{className:"w-5 h-5 text-red-600"});default:return e.jsx(b,{className:"w-5 h-5 text-brand-cyan"})}},w=s=>{switch(s){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"error":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}},v=s=>{const a=Math.floor(s/3600),r=Math.floor(s%3600/60);return`${a}h ${r}m`};if(N)return e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(m)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(i,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("h2",{className:"text-lg font-semibold text-red-800",children:"Error Loading Status"})]}),e.jsx("p",{className:"text-red-700 mt-2",children:m}),e.jsx("button",{onClick:d,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"Retry"})]})});if(!t)return null;const j=(t.notifications||[]).filter(s=>!h.has(s.id));return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-text-primary",children:"System Status"}),e.jsxs("p",{className:"text-text-secondary mt-1",children:["Last updated: ",new Date(t.timestamp).toLocaleString()]})]}),e.jsxs("button",{onClick:d,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),j.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary",children:"Current Notices"}),j.map(s=>e.jsx("div",{className:`border rounded-lg p-4 ${w(s.type)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[p(s.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-text-primary",children:s.title}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:s.message}),s.details.length>0&&e.jsx("ul",{className:"text-sm text-text-secondary mt-2 space-y-1",children:s.details.map((a,r)=>e.jsxs("li",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"w-1 h-1 bg-current rounded-full"}),e.jsx("span",{children:a})]},r))}),s.actionUrl&&e.jsxs(S,{to:s.actionUrl,className:"inline-flex items-center text-sm text-brand-cyan hover:text-brand-cyan/80 mt-2",children:["View Details",e.jsx(k,{className:"w-4 h-4 ml-1"})]})]})]}),s.dismissible&&e.jsx("button",{onClick:()=>g(s.id),className:"text-text-muted hover:text-text-secondary transition-colors",children:"Ã—"})]})},s.id))]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-bg-tertiary border border-border-subtle rounded-lg p-6 shadow-elev-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"w-6 h-6 text-text-secondary mr-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"API Server"})]}),o(t.services.api.status)]}),e.jsxs("div",{className:"space-y-2 text-sm text-text-secondary",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"capitalize",children:t.services.api.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Uptime:"}),e.jsx("span",{children:v(t.services.api.uptime)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Version:"}),e.jsx("span",{children:t.services.api.version})]})]})]}),e.jsxs("div",{className:"bg-bg-tertiary border border-border-subtle rounded-lg p-6 shadow-elev-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-6 h-6 text-gray-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Database"})]}),o(t.services.database.status)]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"capitalize",children:t.services.database.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last Check:"}),e.jsx("span",{children:new Date(t.services.database.lastCheck).toLocaleTimeString()})]})]})]}),e.jsxs("div",{className:"bg-bg-tertiary border border-border-subtle rounded-lg p-6 shadow-elev-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"w-6 h-6 text-gray-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold",children:"WebSocket"})]}),o(t.services.websocket.status)]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsx("span",{className:"capitalize",children:t.services.websocket.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Connections:"}),e.jsx("span",{children:t.services.websocket.connections})]})]})]})]}),e.jsxs("div",{className:"bg-bg-tertiary border border-border-subtle rounded-lg p-6 shadow-elev-1",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(D,{className:"w-6 h-6 text-gray-600 mr-2"}),"Feature Status"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:"Live Trading"}),t.features.liveTradingEnabled?e.jsx(n,{className:"w-5 h-5 text-green-600"}):e.jsx(i,{className:"w-5 h-5 text-yellow-600"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:"Mock Mode"}),t.features.mockMode?e.jsx(i,{className:"w-5 h-5 text-yellow-600"}):e.jsx(n,{className:"w-5 h-5 text-green-600"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:"Extension Support"}),t.features.extensionSupported?e.jsx(n,{className:"w-5 h-5 text-green-600"}):e.jsx(i,{className:"w-5 h-5 text-red-600"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-md",children:[e.jsx("span",{className:"text-sm font-medium",children:"WebSocket"}),t.features.webSocketConnected?e.jsx(n,{className:"w-5 h-5 text-green-600"}):e.jsx(i,{className:"w-5 h-5 text-red-600"})]})]})]}),e.jsxs("div",{className:"bg-bg-tertiary border border-border-subtle rounded-lg p-6 shadow-elev-1",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(I,{className:"w-6 h-6 text-gray-600 mr-2"}),"Environment Information"]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Environment:"}),e.jsx("span",{className:"capitalize font-medium",children:t.environment})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{children:new Date(t.timestamp).toLocaleString()})]})]})]})]})};export{F as default};
//# sourceMappingURL=Status-BJiEOvMq.js.map
