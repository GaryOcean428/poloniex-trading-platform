import{r as m,j as e,ad as P,a8 as I,s as S,ae as $,aa as K,w as U,t as q,O as _,a4 as G,v as B,a6 as W,U as H,af as V,ag as Y,F as z,C as J,o as Q,ah as X,ai as Z}from"./vendor-DsQnMDHq.js";import{b as ee,d as te,e as se,f as k,u as re,p as O}from"./index-CKZf6eLu.js";import{c as ae}from"./crypto-CVBDpkJt.js";import"./chartjs-DvSMsvNv.js";import"./utils-BDAWB_4D.js";import"./recharts-C046zHnu.js";import"./ui-D6B6e0vX.js";var ne=Object.defineProperty,le=(c,s,a)=>s in c?ne(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a,L=(c,s,a)=>le(c,typeof s!="symbol"?s+"":s,a);se("futures");const ie="",f="/api/futures",D=c=>c&&c.replace(/-/g,"").toUpperCase(),i={ACCOUNT_BALANCE:`${f}/account/balance`,ACCOUNT_BILLS:`${f}/account/bills`,CURRENT_POSITIONS:`${f}/trade/position/opens`,POSITION_HISTORY:`${f}/trade/position/history`,ADJUST_MARGIN:`${f}/position/margin`,GET_LEVERAGES:`${f}/account/leverage-info`,SET_LEVERAGE:`${f}/trade/set-leverage`,SWITCH_POSITION_MODE:`${f}/position/mode`,VIEW_POSITION_MODE:`${f}/position/mode-info`,PLACE_ORDER:`${f}/trade/order`,CANCEL_ORDER:`${f}/trade/cancel-order`,CANCEL_ALL_ORDERS:`${f}/trade/cancel-all-orders`,ORDER_HISTORY:`${f}/trade/history-orders`,OPEN_ORDERS:`${f}/trade/open-orders`,MARKET_TICKER:`${f}/market/get-trading-info`,MARKET_KLINES:`${f}/market/get-kline-data`,MARKET_DEPTH:`${f}/market/get-order-book`,MARKET_TRADES:`${f}/market/get-execution-info`,MARKET_FUNDING_RATE:`${f}/market/get-funding-rate`},ce=(c,s,a,n="")=>{const h=te();if(!h)throw new Error("VITE_POLONIEX_API_SECRET is not defined");const b=c+s+a+n;return ae.createHmac("sha256",h).update(b).digest("base64")},de=(c,s,a="")=>{const n=ee();if(!n)throw new Error("VITE_POLONIEX_API_KEY is not defined");const h=Date.now().toString(),b=ce(h,c,s,a);return{"Content-Type":"application/json","PF-API-KEY":n,"PF-API-SIGN":b,"PF-API-TIMESTAMP":h}};class F{constructor(s=!1){L(this,"baseHost"),L(this,"mockMode"),this.baseHost=ie,this.mockMode=s}async request(s,a,n={},h=!0){if(this.mockMode)return this.mockResponse(a,n);const b=new URL(this.baseHost+a);let j="";s==="GET"&&Object.keys(n).length>0?Object.keys(n).forEach(u=>{n[u]!==void 0&&b.searchParams.append(u,String(n[u]))}):s!=="GET"&&Object.keys(n).length>0&&(j=JSON.stringify(n));const p=h?de(s,a,j):{"Content-Type":"application/json"},x=await fetch(b.toString(),{method:s,headers:p,body:s!=="GET"?j:void 0}),y=x.headers.get("content-type")||"";if(!x.ok){let u={};if(y.includes("application/json"))u=await x.json().catch(()=>({}));else{const v=await x.text().catch(()=>"");u={status:x.status,url:b.toString(),preview:v?.slice(0,200)}}throw new Error(`API error (${x.status}) from ${b.toString()}: ${JSON.stringify(u)}`)}if(!y.includes("application/json")){const u=await x.text().catch(()=>"");throw new Error(`Non-JSON response (${x.status}) from ${b.toString()}: ${u?.slice(0,200)}`)}return await x.json()}mockResponse(s,a){let n;switch(s){case i.ACCOUNT_BALANCE:n={state:"NORMAL",eq:"10000.00",isoEq:"5000.00",im:"1000.00",mm:"500.00"};break;case i.CURRENT_POSITIONS:n=[{symbol:"BTC-USDT",side:"BUY",mgnMode:"ISOLATED",posSide:"LONG",openAvgPx:"50000.00",qty:"0.1",availQty:"0.1",lever:"10",adl:"1",liqPx:"45000.00",im:"500.00",mm:"250.00",mgn:"500.00",maxWAmt:"4500.00",upl:"100.00",uplRatio:"0.02",pnl:"100.00",markPx:"51000.00",mgnRatio:"0.05",state:"NORMAL"}];break;case i.VIEW_POSITION_MODE:n={posMode:"ONE_WAY"};break;case i.GET_LEVERAGES:n={symbol:String(a.symbol||"BTC-USDT"),leverage:"10",maxLeverage:"75"};break;case i.OPEN_ORDERS:n=[];break;case i.MARKET_TICKER:n={symbol:String(a.symbol||"BTC-USDT"),last:"50000.00",bestAsk:"50010.00",bestBid:"49990.00",high24h:"51000.00",low24h:"49000.00",volume24h:"1000.00",fundingRate:"0.0001",nextFundingTime:Date.now()+480*60*1e3};break;case i.MARKET_KLINES:n=[{ts:Date.now(),open:"50000.00",high:"50200.00",low:"49900.00",close:"50050.00",volume:"100.00"}];break;case i.MARKET_DEPTH:n={asks:[["50010.00","10.00"],["50020.00","20.00"]],bids:[["49990.00","15.00"],["49980.00","25.00"]],ts:Date.now()};break;case i.MARKET_TRADES:n=[{ts:Date.now(),price:"50000.00",size:"0.1",side:"BUY"}];break;case i.MARKET_FUNDING_RATE:n={symbol:String(a.symbol||"BTC-USDT"),fundingRate:"0.0001",nextFundingTime:Date.now()+480*60*1e3};break;default:n={}}return Promise.resolve(n)}async getAccountBalance(){return this.request("GET",i.ACCOUNT_BALANCE)}async getAccountBills(s){return this.request("GET",i.ACCOUNT_BILLS,s)}async getCurrentPositions(s){return this.request("GET",i.CURRENT_POSITIONS,{symbol:s})}async getPositionHistory(s){return this.request("GET",i.POSITION_HISTORY,s)}async adjustMargin(s){return this.request("POST",i.ADJUST_MARGIN,s)}async getLeverages(s){return this.request("GET",i.GET_LEVERAGES,{symbol:s})}async setLeverage(s){return this.request("POST",i.SET_LEVERAGE,s)}async switchPositionMode(s){return this.request("POST",i.SWITCH_POSITION_MODE,{posMode:s})}async getPositionMode(){return this.request("GET",i.VIEW_POSITION_MODE)}async placeOrder(s){return this.request("POST",i.PLACE_ORDER,s)}async cancelOrder(s){return this.request("POST",i.CANCEL_ORDER,s)}async cancelAllOrders(s){return this.request("POST",i.CANCEL_ALL_ORDERS,{symbol:s})}async getOrderHistory(s){return this.request("GET",i.ORDER_HISTORY,s)}async getOpenOrders(s){return this.request("GET",i.OPEN_ORDERS,{symbol:s})}async getMarketTicker(s){return this.request("GET",i.MARKET_TICKER,{symbol:D(s)},!1)}async getMarketKlines(s){const a={...s,symbol:D(s.symbol)};return this.request("GET",i.MARKET_KLINES,a,!1)}async getMarketDepth(s){const a={...s,symbol:D(s.symbol)};return this.request("GET",i.MARKET_DEPTH,a,!1)}async getMarketTrades(s){const a={...s,symbol:D(s.symbol)};return this.request("GET",i.MARKET_TRADES,a,!1)}async getMarketFundingRate(s){return this.request("GET",i.MARKET_FUNDING_RATE,{symbol:D(s)},!1)}}const oe=()=>{const[c,s]=m.useState("all"),[a,n]=m.useState("all"),[h,b]=m.useState(""),j=t=>{const o=typeof t=="string"?parseFloat(t):t;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(o)},p=t=>{try{const o=new Date(typeof t=="string"?parseInt(t):t);return isNaN(o.getTime())?"Invalid Date":o.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},[x,y]=m.useState([]),[u,v]=m.useState(!1),[l,E]=m.useState(null),A=t=>{const N={deposit:"DEPOSIT",withdrawal:"WITHDRAWAL",trade:"TRADE",fee:"TRADE",funding:"TRADE"}[t.type?.toLowerCase?.()||"trade"]||"TRADE";return{id:t.billId,type:N,description:`${t.symbol||t.currency||""} ${t.type}`.trim(),amount:parseFloat(t.amount||"0"),status:"COMPLETED",timestamp:typeof t.ts=="number"&&t.ts<1e12?t.ts*1e3:t.ts}};m.useEffect(()=>{let t=!0;return(async()=>{v(!0),E(null);try{const N={limit:200},T=Date.now();if(a!=="all"){let d=0;a==="week"?d=T-10080*60*1e3:a==="month"?d=new Date(new Date().getFullYear(),new Date().getMonth()-1,new Date().getDate()).getTime():a==="quarter"?d=new Date(new Date().getFullYear(),new Date().getMonth()-3,new Date().getDate()).getTime():a==="year"&&(d=new Date(new Date().getFullYear()-1,new Date().getMonth(),new Date().getDate()).getTime()),N.startTime=d,N.endTime=T}const r=(await new F().getAccountBills(N)).map(A);t&&y(r)}catch(N){t&&E(N instanceof Error?N.message:"Failed to load transactions")}finally{t&&v(!1)}})(),()=>{t=!1}},[a]);const g=m.useMemo(()=>x.filter(t=>{if(c!=="all"&&t.type.toLowerCase()!==c.toLowerCase())return!1;if(h){const o=h.toLowerCase();return t.id.toLowerCase().includes(o)||t.description.toLowerCase().includes(o)||t.type.toLowerCase().includes(o)||t.status.toLowerCase().includes(o)}return!0}),[x,c,h]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>s("all"),className:`px-3 py-1.5 text-sm rounded-md ${c==="all"?"bg-blue-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:"All"}),e.jsxs("button",{onClick:()=>s("deposit"),className:`px-3 py-1.5 text-sm rounded-md flex items-center ${c==="deposit"?"bg-green-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:[e.jsx(P,{className:"h-3.5 w-3.5 mr-1"}),"Deposits"]}),e.jsxs("button",{onClick:()=>s("withdrawal"),className:`px-3 py-1.5 text-sm rounded-md flex items-center ${c==="withdrawal"?"bg-red-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:[e.jsx(I,{className:"h-3.5 w-3.5 mr-1"}),"Withdrawals"]}),e.jsxs("button",{onClick:()=>s("trade"),className:`px-3 py-1.5 text-sm rounded-md flex items-center ${c==="trade"?"bg-blue-600 text-white":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200"}`,children:[e.jsx(S,{className:"h-3.5 w-3.5 mr-1"}),"Trades"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:h,onChange:t=>b(t.target.value),placeholder:"Search transactions...",className:"pl-9 pr-3 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx($,{className:"absolute left-3 top-2.5 h-4 w-4 text-neutral-400"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:a,onChange:t=>n(t.target.value),className:"pl-9 pr-8 py-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none","aria-label":"Filter transactions by date range",title:"Filter transactions by date range",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"week",children:"Last Week"}),e.jsx("option",{value:"month",children:"Last Month"}),e.jsx("option",{value:"quarter",children:"Last Quarter"}),e.jsx("option",{value:"year",children:"Last Year"})]}),e.jsx(K,{className:"absolute left-3 top-2.5 h-4 w-4 text-neutral-400"})]}),e.jsxs("button",{className:"flex items-center px-3 py-2 bg-neutral-100 text-neutral-700 rounded-md hover:bg-neutral-200",children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"Export"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-neutral-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-neutral-200",children:[e.jsx("thead",{className:"bg-neutral-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Date"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-neutral-200",children:[u&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-sm text-neutral-500",children:"Loading transactions..."})}),l&&!u&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-sm text-red-600",children:l})}),!u&&!l&&g.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-sm text-neutral-500",children:"No transactions found"})}),!u&&!l&&g.map(t=>e.jsxs("tr",{className:"hover:bg-neutral-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-500",children:t.id}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:`mr-2 flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center ${t.type==="DEPOSIT"?"bg-green-100":t.type==="WITHDRAWAL"?"bg-red-100":"bg-blue-100"}`,children:[t.type==="DEPOSIT"&&e.jsx(P,{className:"h-4 w-4 text-green-600"}),t.type==="WITHDRAWAL"&&e.jsx(I,{className:"h-4 w-4 text-red-600"}),t.type==="TRADE"&&e.jsx(S,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900",children:t.type}),e.jsx("div",{className:"text-xs text-neutral-500",children:t.description})]})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-neutral-900",children:[t.type==="WITHDRAWAL"?"-":"",j(t.amount)]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="COMPLETED"?"bg-green-100 text-green-800":t.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.status})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-500",children:p(t.timestamp)})]},t.id))]})]})})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-neutral-500",children:["Showing ",g.length," of ",x.length," transactions"]}),e.jsxs("div",{className:"flex",children:[e.jsx("button",{className:"px-3 py-1 border border-neutral-300 rounded-l-md bg-white text-neutral-700 hover:bg-neutral-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{className:"px-3 py-1 border border-neutral-300 border-l-0 rounded-r-md bg-white text-neutral-700 hover:bg-neutral-50",children:"Next"})]})]})]})},me=()=>{const[c,s]=m.useState(!1),[a,n]=m.useState(!0),[h,b]=m.useState(!1),[j,p]=m.useState(null),[x,y]=m.useState(null),[u,v]=m.useState([]),[l,E]=m.useState({credentialName:"",apiKey:"",apiSecret:"",passphrase:"",permissions:{read:!0,trade:!1,withdraw:!1}}),A="https://polytrade-be.up.railway.app";m.useEffect(()=>{if(x||j){const r=setTimeout(()=>{y(null),p(null)},5e3);return()=>clearTimeout(r)}},[x,j]);const g=async()=>{try{n(!0),p(null);const r=k();if(!r){p("You must be logged in to view API credentials");return}const d=await fetch(`${A}/api/keys`,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!d.ok)throw new Error("Failed to load API credentials");const w=await d.json();if(w.success)v(w.credentials);else throw new Error(w.error||"Failed to load API credentials")}catch(r){p(r instanceof Error?r.message:"Failed to load API credentials")}finally{n(!1)}};m.useEffect(()=>{g()},[g]);const t=(r,d)=>{E(w=>({...w,[r]:d}))},o=r=>{E(d=>({...d,permissions:{...d.permissions,[r]:!d.permissions[r]}}))},N=async()=>{if(!l.credentialName.trim()||!l.apiKey.trim()||!l.apiSecret.trim()){p("Please fill in all required fields");return}try{b(!0),p(null);const r=k();if(!r){p("You must be logged in to create API credentials");return}const d=await fetch(`${A}/api/keys`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({credentialName:l.credentialName,apiKey:l.apiKey,apiSecret:l.apiSecret,passphrase:l.passphrase||void 0,permissions:l.permissions})});if(!d.ok){const R=await d.json();throw new Error(R.error||"Failed to create API credentials")}const w=await d.json();if(w.success)y("API credentials created successfully"),s(!1),E({credentialName:"",apiKey:"",apiSecret:"",passphrase:"",permissions:{read:!0,trade:!1,withdraw:!1}}),await g();else throw new Error(w.error||"Failed to create API credentials")}catch(r){p(r instanceof Error?r.message:"Failed to create API credentials")}finally{b(!1)}},T=async r=>{if(confirm("Are you sure you want to delete these API credentials? This action cannot be undone."))try{const d=k();if(!d){p("You must be logged in to delete API credentials");return}const w=await fetch(`${A}/api/keys/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!w.ok){const M=await w.json();throw new Error(M.error||"Failed to delete API credentials")}const R=await w.json();if(R.success)y("API credentials deleted successfully"),await g();else throw new Error(R.error||"Failed to delete API credentials")}catch(d){p(d instanceof Error?d.message:"Failed to delete API credentials")}},C=r=>new Date(r).toLocaleDateString();return e.jsxs("div",{className:"space-y-6",children:[x&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 text-green-700",children:e.jsxs("div",{className:"flex",children:[e.jsx(U,{className:"h-5 w-5 mr-3 flex-shrink-0"}),e.jsx("p",{children:x})]})}),j&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 text-red-700",children:e.jsxs("div",{className:"flex",children:[e.jsx(q,{className:"h-5 w-5 mr-3 flex-shrink-0"}),e.jsx("p",{children:j})]})}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 text-blue-700",children:e.jsxs("div",{className:"flex",children:[e.jsx(_,{className:"h-6 w-6 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"API Key Security"}),e.jsx("p",{className:"mt-1 text-sm",children:"Keep your API keys secure. Never share them with others or expose them in client-side code. Keys with trade and withdraw permissions should be used with extreme caution."})]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-medium",children:"Your API Keys"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:g,disabled:a,className:"flex items-center px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 disabled:opacity-50",title:"Refresh API credentials list",children:[e.jsx(S,{className:`h-4 w-4 mr-2 ${a?"animate-spin":""}`}),"Refresh"]}),e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Add API Keys"]})]})]}),c&&e.jsxs("div",{className:"bg-white rounded-lg border border-neutral-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-neutral-50 border-b border-neutral-200",children:e.jsx("h3",{className:"font-medium",children:"Add Poloniex API Keys"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"credential-name",className:"block text-sm font-medium text-neutral-700",children:"Credential Name *"}),e.jsx("input",{type:"text",id:"credential-name",value:l.credentialName,onChange:r=>t("credentialName",r.target.value),className:"mt-1 block w-full border border-neutral-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Main Trading Account",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"api-key",className:"block text-sm font-medium text-neutral-700",children:"API Key *"}),e.jsx("input",{type:"text",id:"api-key",value:l.apiKey,onChange:r=>t("apiKey",r.target.value),className:"mt-1 block w-full border border-neutral-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"Enter your Poloniex API Key",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"api-secret",className:"block text-sm font-medium text-neutral-700",children:"API Secret *"}),e.jsx("input",{type:"password",id:"api-secret",value:l.apiSecret,onChange:r=>t("apiSecret",r.target.value),className:"mt-1 block w-full border border-neutral-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"Enter your Poloniex API Secret",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"passphrase",className:"block text-sm font-medium text-neutral-700",children:"Passphrase (Optional)"}),e.jsx("input",{type:"password",id:"passphrase",value:l.passphrase,onChange:r=>t("passphrase",r.target.value),className:"mt-1 block w-full border border-neutral-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 font-mono",placeholder:"Enter passphrase if required"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Permissions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"permission-read",type:"checkbox",checked:l.permissions.read,onChange:()=>o("read"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-neutral-300 rounded"}),e.jsx("label",{htmlFor:"permission-read",className:"ml-2 block text-sm text-neutral-700",children:"Read (View account balances and trades)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"permission-trade",type:"checkbox",checked:l.permissions.trade,onChange:()=>o("trade"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-neutral-300 rounded"}),e.jsx("label",{htmlFor:"permission-trade",className:"ml-2 block text-sm text-neutral-700",children:"Trade (Place and cancel orders)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"permission-withdraw",type:"checkbox",checked:l.permissions.withdraw,onChange:()=>o("withdraw"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-neutral-300 rounded"}),e.jsxs("label",{htmlFor:"permission-withdraw",className:"ml-2 flex items-center text-sm text-neutral-700",children:["Withdraw (Transfer funds out of your account)",e.jsxs("span",{className:"ml-2 text-red-600 flex items-center text-xs",children:[e.jsx(B,{className:"h-3 w-3 mr-0.5"}),"High Risk"]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),disabled:h,className:"px-4 py-2 border border-neutral-300 rounded-md shadow-sm text-sm font-medium text-neutral-700 bg-white hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"button",onClick:N,disabled:h||!l.credentialName.trim()||!l.apiKey.trim()||!l.apiSecret.trim(),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:h?"Creating...":"Create Credentials"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-neutral-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-neutral-50 border-b border-neutral-200",children:e.jsx("h3",{className:"font-medium",children:"Your API Credentials"})}),e.jsx("div",{className:"overflow-x-auto",children:a?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(S,{className:"h-8 w-8 animate-spin mx-auto text-neutral-400 mb-2"}),e.jsx("p",{className:"text-neutral-500",children:"Loading API credentials..."})]}):u.length===0?e.jsx("div",{className:"p-8 text-center",children:e.jsx("p",{className:"text-neutral-500",children:"No API credentials found. Add your first set of credentials to get started."})}):e.jsxs("table",{className:"min-w-full divide-y divide-neutral-200",children:[e.jsx("thead",{className:"bg-neutral-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Exchange"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Permissions"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Last Used"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"relative px-4 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:u.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-neutral-900",children:r.credentialName}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-500",children:e.jsx("span",{className:"capitalize",children:r.exchange})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-500",children:e.jsxs("div",{className:"space-x-2",children:[r.permissions.read&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Read"}),r.permissions.trade&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Trade"}),r.permissions.withdraw&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:"Withdraw"})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-500",children:C(r.createdAt)}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-500",children:r.lastUsedAt?C(r.lastUsedAt):"Never"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-500",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${r.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>T(r.id),className:"text-red-600 hover:text-red-900",title:"Delete API credentials",children:e.jsx(W,{className:"h-4 w-4"})})})]},r.id))})]})})]})]})},Ne=()=>{const{accountBalance:c}=re(),[s,a]=m.useState("overview"),[n,h]=m.useState(!1),[b,j]=m.useState([]),[p,x]=m.useState(!1),[y,u]=m.useState(null),v=async()=>{h(!0);try{O.loadCredentials(),await O.getAccountBalance()}finally{h(!1)}},l=t=>{const o=typeof t=="string"?parseFloat(t):t;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(o)},E=t=>{try{const o=new Date(typeof t=="string"?parseInt(t):t);return isNaN(o.getTime())?"Invalid Date":o.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch{return"Invalid Date"}},A=t=>{const N={deposit:"DEPOSIT",withdrawal:"WITHDRAWAL",trade:"TRADE",fee:"TRADE",funding:"TRADE"}[t.type?.toLowerCase?.()||"trade"]||"TRADE";return{id:t.billId,type:N,description:`${t.symbol||t.currency||""} ${t.type}`.trim(),amount:parseFloat(t.amount||"0"),status:"COMPLETED",timestamp:typeof t.ts=="number"&&t.ts<1e12?t.ts*1e3:t.ts}};m.useEffect(()=>{let t=!0;return(async()=>{x(!0),u(null);try{const T=(await new F().getAccountBills({limit:5})).map(A);t&&j(T)}catch(N){t&&u(N instanceof Error?N.message:"Failed to load")}finally{t&&x(!1)}})(),()=>{t=!1}},[]);const g={totalBalance:parseFloat(c?.total?.toString()||"0"),availableBalance:parseFloat(c?.available?.toString()||"0"),equity:parseFloat(c?.total?.toString()||"0"),todayPnL:0,verificationStatus:"Verified",tradingLevel:"Advanced",feeRate:"0.1%"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Account Overview"}),e.jsxs("button",{onClick:v,disabled:n,className:"flex items-center px-3 py-2 bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100",children:[e.jsx(S,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),n?"Refreshing...":"Refresh Data"]})]}),e.jsxs("div",{className:"bg-bg-tertiary rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>a("overview"),className:`px-4 py-3 font-medium text-sm flex items-center ${s==="overview"?"text-blue-600 border-b-2 border-blue-600":"text-text-muted hover:text-text-secondary"}`,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs("button",{onClick:()=>a("transactions"),className:`px-4 py-3 font-medium text-sm flex items-center ${s==="transactions"?"text-blue-600 border-b-2 border-blue-600":"text-text-muted hover:text-text-secondary"}`,children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Transactions"]}),e.jsxs("button",{onClick:()=>a("api"),className:`px-4 py-3 font-medium text-sm flex items-center ${s==="api"?"text-blue-600 border-b-2 border-blue-600":"text-text-muted hover:text-text-secondary"}`,children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"API Keys"]}),e.jsxs("button",{onClick:()=>a("settings"),className:`px-4 py-3 font-medium text-sm flex items-center ${s==="settings"?"text-blue-600 border-b-2 border-blue-600":"text-text-muted hover:text-text-secondary"}`,children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Security"]})]}),e.jsxs("div",{className:"p-6",children:[s==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"gradient-primary text-white rounded-lg shadow-elev-2 p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-sm",children:"Total Balance"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:l(g.totalBalance)})]}),e.jsx("div",{className:"bg-blue-400/30 p-2 rounded-full",children:e.jsx(z,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-blue-100",children:"Available"}),e.jsx("span",{className:"font-medium",children:l(g.availableBalance)})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-blue-100",children:"Equity"}),e.jsx("span",{className:"font-medium",children:l(g.equity)})]})]})]}),e.jsxs("div",{className:"bg-bg-tertiary rounded-lg shadow-md p-4 border border-border-subtle",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-neutral-500 text-sm",children:"Profit & Loss"}),e.jsxs("p",{className:"text-2xl font-bold mt-1 text-green-600",children:["+",l(g.todayPnL)]})]}),e.jsx("div",{className:"bg-neutral-100 p-2 rounded-full",children:e.jsx(J,{className:"h-6 w-6 text-neutral-600"})})]}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-neutral-500",children:"Weekly"}),e.jsx("span",{className:"font-medium text-neutral-600",children:"—"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-neutral-500",children:"Monthly"}),e.jsx("span",{className:"font-medium text-neutral-600",children:"—"})]})]})]}),e.jsxs("div",{className:"bg-bg-tertiary rounded-lg shadow-md p-4 border border-border-subtle",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-neutral-500 text-sm",children:"Recent Activity"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:"12 Trades"})]}),e.jsx("div",{className:"bg-neutral-100 p-2 rounded-full",children:e.jsx(Q,{className:"h-6 w-6 text-neutral-600"})})]}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"flex items-center text-neutral-500",children:[e.jsx(X,{className:"h-4 w-4 mr-1 text-green-500"}),"Buys"]}),e.jsx("span",{className:"font-medium",children:"7 orders"})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsxs("span",{className:"flex items-center text-neutral-500",children:[e.jsx(Z,{className:"h-4 w-4 mr-1 text-red-500"}),"Sells"]}),e.jsx("span",{className:"font-medium",children:"5 orders"})]})]})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{className:"flex items-center justify-center w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Deposit"]}),e.jsxs("button",{className:"flex items-center justify-center w-full bg-neutral-600 text-white py-2 rounded-md hover:bg-neutral-700",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Withdraw"]})]}),e.jsxs("div",{className:"bg-bg-tertiary rounded-lg border border-border-subtle overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 bg-neutral-50 border-b border-border-subtle",children:e.jsx("h3",{className:"font-medium",children:"Account Status"})}),e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-neutral-500",children:"Verification Status"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),e.jsx("span",{className:"font-medium",children:g.verificationStatus})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-neutral-500",children:"Trading Level"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"font-medium",children:g.tradingLevel})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-neutral-500",children:"Fee Rate"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"font-medium",children:g.feeRate})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-neutral-500",children:"Account Age"}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"font-medium",children:"147 days"})})]})]})})]}),e.jsxs("div",{className:"bg-bg-tertiary rounded-lg border border-border-subtle overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-neutral-50 border-b border-border-subtle flex justify-between items-center",children:[e.jsx("h3",{className:"font-medium",children:"Recent Transactions"}),e.jsx("button",{onClick:()=>a("transactions"),className:"text-sm text-blue-600 hover:text-blue-700",children:"View All"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-border-subtle",children:[e.jsx("thead",{className:"bg-neutral-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Date"})]})}),e.jsxs("tbody",{className:"bg-bg-tertiary divide-y divide-border-subtle",children:[p&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-sm text-neutral-500",children:"Loading recent transactions..."})}),y&&!p&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-sm text-red-600",children:y})}),!p&&!y&&b.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-6 text-center text-sm text-neutral-500",children:"No recent transactions"})}),!p&&!y&&b.slice(0,5).map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:`mr-2 flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center ${t.type==="DEPOSIT"?"bg-green-100":t.type==="WITHDRAWAL"?"bg-red-100":"bg-blue-100"}`,children:[t.type==="DEPOSIT"&&e.jsx(P,{className:"h-4 w-4 text-green-600"}),t.type==="WITHDRAWAL"&&e.jsx(I,{className:"h-4 w-4 text-red-600"}),t.type==="TRADE"&&e.jsx(S,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-neutral-900",children:t.type}),e.jsx("div",{className:"text-xs text-neutral-500",children:t.description})]})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-neutral-900",children:[t.type==="WITHDRAWAL"?"-":"",l(t.amount)]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="COMPLETED"?"bg-green-100 text-green-800":t.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.status})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-neutral-500",children:E(t.timestamp)})]},t.id))]})]})})]})]}),s==="transactions"&&e.jsx(oe,{}),s==="api"&&e.jsx(me,{}),s==="settings"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-tertiary rounded-lg border border-border-subtle overflow-hidden shadow-elev-1",children:[e.jsx("div",{className:"px-4 py-3 bg-bg-secondary border-b border-border-subtle",children:e.jsx("h3",{className:"font-semibold text-text-primary",children:"Security Settings"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Secure your account with 2FA"})]}),e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Enable"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Change Password"}),e.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Update your account password"})]}),e.jsx("button",{className:"px-3 py-1 bg-neutral-200 text-neutral-800 rounded-md hover:bg-neutral-300",children:"Update"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Login History"}),e.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"View your recent login activity"})]}),e.jsx("button",{className:"px-3 py-1 bg-neutral-200 text-neutral-800 rounded-md hover:bg-neutral-300",children:"View"})]})]})]})})]})]})]})};export{Ne as default};
//# sourceMappingURL=Account-TxjliNfA.js.map
